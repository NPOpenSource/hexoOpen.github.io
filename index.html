<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>温杰的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="温杰的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="温杰的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="温杰的博客">
  
    <link rel="alternative" href="/atom.xml" title="温杰的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.2d7529.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="null" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">温杰</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="null" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">温杰</h1>
			</hgroup>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/tags/随笔/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-CTFrame-h学习" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/CTFrame-h学习/">CTFrame.h学习</a>
    </h1>
  

        
        <a href="/2017/03/02/CTFrame-h学习/" class="archive-article-date">
  	<time datetime="2017-03-02T03:52:19.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-02</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/02/CTFrame-h学习/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-coreText概述" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/coreText概述/">coreText概述</a>
    </h1>
  

        
        <a href="/2017/03/02/coreText概述/" class="archive-article-date">
  	<time datetime="2017-03-02T03:44:29.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-02</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>想学好一个framework ，以前总是看看简单的写写代码，实现基本功能。可是稍微遇到点困难的问题，就很难解决，所以这次我决定还是把所有的api都给实现一遍，看看功能，印象深刻。</p>
<h2 id="coretext包含的类文件"><a href="#coretext包含的类文件" class="headerlink" title="coretext包含的类文件"></a>coretext包含的类文件</h2><table>
<thead>
<tr>
<th>CoreText.h</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>CTDefines.h</td>
<td></td>
</tr>
<tr>
<td>CTFont.h</td>
<td></td>
</tr>
<tr>
<td>CTFontCollection.h</td>
<td></td>
</tr>
<tr>
<td>CTFontDescriptor.h</td>
<td></td>
</tr>
<tr>
<td>CTFontManager.h</td>
<td></td>
</tr>
<tr>
<td>CTFontTraits.h</td>
<td></td>
</tr>
<tr>
<td>CTFrame.h</td>
<td></td>
</tr>
<tr>
<td>CTFramesetter.h</td>
<td></td>
</tr>
<tr>
<td>CTGlyphInfo.h</td>
<td></td>
</tr>
<tr>
<td>CTLine.h</td>
<td></td>
</tr>
<tr>
<td>CTParagraphStyle.h</td>
<td></td>
</tr>
<tr>
<td>CTRubyAnnotation.h</td>
<td></td>
</tr>
<tr>
<td>CTRun.h</td>
<td></td>
</tr>
<tr>
<td>CTRunDelegate.h</td>
<td></td>
</tr>
<tr>
<td>CTStringAttributes.h</td>
<td></td>
</tr>
<tr>
<td>CTTextTab.h</td>
<td></td>
</tr>
<tr>
<td>CTTypesetter.h</td>
<td></td>
</tr>
<tr>
<td>SFNTLayoutTypes.h</td>
<td></td>
</tr>
<tr>
<td>SFNTTypes.h</td>
</tr>
</tbody>
</table>
<p>以上是coretext.framework 包含的所有类</p>
<h2 id="富文本字体规范"><a href="#富文本字体规范" class="headerlink" title="富文本字体规范"></a>富文本字体规范</h2><h3 id="字体的相关知识"><a href="#字体的相关知识" class="headerlink" title="字体的相关知识"></a>字体的相关知识</h3><p>字体(Font):是一系列字号、样式和磅值相同的字符(例如:10磅黑体Palatino)。现多被视为字样的同义词</p>
<p>字面(Face):是所有字号的磅值和格式的综合</p>
<p>字体集(Font family):是一组相关字体(例如:Franklin family包括Franklin Gothic、Fran-klinHeavy和Franklin Compressed)</p>
<p>磅值(Weight):用于描述字体粗度。典型的磅值,从最粗到最细,有极细、细、book、中等、半粗、粗、较粗、极粗</p>
<p>样式(Style):字形有三种形式:Roman type是直体;oblique type是斜体;utakuc type是斜体兼曲线(比Roman type更像书法体)。</p>
<p>x高度(X height):指小写字母的平均高度(以x为基准)。磅值相同的两字母,x高度越大的字母看起来比x高度小的字母要大</p>
<p>Cap高度(Cap height):与x高度相似。指大写字母的平均高度(以C为基准)</p>
<p>下行字母(Descender):例如在字母q中,基线以下的字母部分叫下伸部分</p>
<p>上行字母(Ascender):x高度以上的部分(比如字母b)叫做上伸部分</p>
<p>基线(Baseline):通常在x、v、b、m下的那条线</p>
<p>描边(Stroke):组成字符的线或曲线。可以加粗或改变字符形状</p>
<p>衬线(Serif):用来使字符更可视的一条水平线。如字母左上角和下部的水平线。</p>
<p>无衬线(Sans Serif):可以让排字员不使用衬线装饰。</p>
<p>方形字(Block):这种字体的笔画使字符看起来比无衬线字更显眼,但还不到常见的衬线字的程度。例如Lubalin Graph就是方形字,这种字看起来好像是木头块刻的一样</p>
<p>手写体脚本(Calligraphic script):是一种仿效手写体的字体。例如Murray Hill或者Fraktur字体</p>
<p>艺术字(Decorative):像绘画般的字体</p>
<p>Pi符号(Pisymbol):非标准的字母数字字符的特殊符号。例如Wingdings和Mathematical Pi</p>
<p>连写(Ligature):是一系列连写字母如fi、fl、ffi或ffl。由于字些字母形状的原因经常被连写,故排字员已习惯将它们连写。</p>
<p><img src="/images/font.gif" alt="image"></p>
<p><img src="/images/font2.gif" alt="image"></p>
<p>该框架的整体视窗组合图</p>
<p><img src="/images/coretext1.png" alt="image"></p>
<h2 id="坐标系"><a href="#坐标系" class="headerlink" title="坐标系"></a>坐标系</h2><p>UIKit框架的坐标系是左上角</p>
<p>而 coretext的坐标系是左下角</p>
<p>因此 要进行坐标系转换</p>
<h2 id="简单demo"><a href="#简单demo" class="headerlink" title="简单demo"></a>简单demo</h2><p>我们学习这个框架从简单的demo慢慢扩充到复杂功能及所有api介绍</p>
<p>demo 代码<br>$$</p>
<ul>
<li><p>(void)drawRect:(CGRect)rect {<br>  CGContextRef context = UIGraphicsGetCurrentContext();<br>  CGContextSetTextMatrix(context , CGAffineTransformIdentity);<br>  CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</p>
<pre><code>CGContextScaleCTM(context, 1.0 ,-1.0);
</code></pre><p>  NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@”富文本学习/慢慢来吧。不是一朝一夕之功。ok \n ok ok”];</p>
<p>  CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);</p>
<p>  CGMutablePathRef Path = CGPathCreateMutable();<br>  CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-20));<br>  CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);<br>  CTFrameDraw(frame,context);</p>
<p>  CGPathRelease(Path);<br>  CFRelease(framesetter);<br>}<br>$$<br>显示效果</p>
</li>
</ul>
<p><img src="/images/coretext2.tiff" alt="image"></p>
<p>上面就是用coretext实现的简单效果，看着一点都不酷。一个UIlabel就能实现的效果。不过不要紧，慢慢往下看。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/02/coreText概述/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-coretext-framework-大全" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/23/coretext-framework-大全/">coretext.framework 大全</a>
    </h1>
  

        
        <a href="/2017/02/23/coretext-framework-大全/" class="archive-article-date">
  	<time datetime="2017-02-23T03:07:41.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-23</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>想学好一个framework ，以前总是看看简单的写写代码，实现基本功能。可是稍微遇到点困难的问题，就很难解决，所以这次我决定还是把所有的api都给实现一遍，看看功能，印象深刻。</p>
<h2 id="coretext包含的类文件"><a href="#coretext包含的类文件" class="headerlink" title="coretext包含的类文件"></a>coretext包含的类文件</h2><table>
<thead>
<tr>
<th>CoreText.h</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>CTDefines.h</td>
<td></td>
</tr>
<tr>
<td>CTFont.h</td>
<td></td>
</tr>
<tr>
<td>CTFontCollection.h</td>
<td></td>
</tr>
<tr>
<td>CTFontDescriptor.h</td>
<td></td>
</tr>
<tr>
<td>CTFontManager.h</td>
<td></td>
</tr>
<tr>
<td>CTFontTraits.h</td>
<td></td>
</tr>
<tr>
<td>CTFrame.h</td>
<td></td>
</tr>
<tr>
<td>CTFramesetter.h</td>
<td></td>
</tr>
<tr>
<td>CTGlyphInfo.h</td>
<td></td>
</tr>
<tr>
<td>CTLine.h</td>
<td></td>
</tr>
<tr>
<td>CTParagraphStyle.h</td>
<td></td>
</tr>
<tr>
<td>CTRubyAnnotation.h</td>
<td></td>
</tr>
<tr>
<td>CTRun.h</td>
<td></td>
</tr>
<tr>
<td>CTRunDelegate.h</td>
<td></td>
</tr>
<tr>
<td>CTStringAttributes.h</td>
<td></td>
</tr>
<tr>
<td>CTTextTab.h</td>
<td></td>
</tr>
<tr>
<td>CTTypesetter.h</td>
<td></td>
</tr>
<tr>
<td>SFNTLayoutTypes.h</td>
<td></td>
</tr>
<tr>
<td>SFNTTypes.h</td>
</tr>
</tbody>
</table>
<p>以上是coretext.framework 包含的所有类</p>
<h2 id="富文本字体规范"><a href="#富文本字体规范" class="headerlink" title="富文本字体规范"></a>富文本字体规范</h2><h4 id="字体的相关知识"><a href="#字体的相关知识" class="headerlink" title="字体的相关知识"></a>字体的相关知识</h4><p>字体(Font):是一系列字号、样式和磅值相同的字符(例如:10磅黑体Palatino)。现多被视为字样的同义词</p>
<p>字面(Face):是所有字号的磅值和格式的综合</p>
<p>字体集(Font family):是一组相关字体(例如:Franklin family包括Franklin Gothic、Fran-klinHeavy和Franklin Compressed)</p>
<p>磅值(Weight):用于描述字体粗度。典型的磅值,从最粗到最细,有极细、细、book、中等、半粗、粗、较粗、极粗</p>
<p>样式(Style):字形有三种形式:Roman type是直体;oblique type是斜体;utakuc type是斜体兼曲线(比Roman type更像书法体)。</p>
<p>x高度(X height):指小写字母的平均高度(以x为基准)。磅值相同的两字母,x高度越大的字母看起来比x高度小的字母要大</p>
<p>Cap高度(Cap height):与x高度相似。指大写字母的平均高度(以C为基准)</p>
<p>下行字母(Descender):例如在字母q中,基线以下的字母部分叫下伸部分</p>
<p>上行字母(Ascender):x高度以上的部分(比如字母b)叫做上伸部分</p>
<p>基线(Baseline):通常在x、v、b、m下的那条线</p>
<p>描边(Stroke):组成字符的线或曲线。可以加粗或改变字符形状</p>
<p>衬线(Serif):用来使字符更可视的一条水平线。如字母左上角和下部的水平线。</p>
<p>无衬线(Sans Serif):可以让排字员不使用衬线装饰。</p>
<p>方形字(Block):这种字体的笔画使字符看起来比无衬线字更显眼,但还不到常见的衬线字的程度。例如Lubalin Graph就是方形字,这种字看起来好像是木头块刻的一样</p>
<p>手写体脚本(Calligraphic script):是一种仿效手写体的字体。例如Murray Hill或者Fraktur字体</p>
<p>艺术字(Decorative):像绘画般的字体</p>
<p>Pi符号(Pisymbol):非标准的字母数字字符的特殊符号。例如Wingdings和Mathematical Pi</p>
<p>连写(Ligature):是一系列连写字母如fi、fl、ffi或ffl。由于字些字母形状的原因经常被连写,故排字员已习惯将它们连写。</p>
<p><img src="/images/font.gif" alt="image"></p>
<p><img src="/images/font2.gif" alt="image"></p>
<p>该框架的整体视窗组合图</p>
<p><img src="/images/coretext1.png" alt="image"></p>
<h2 id="坐标系"><a href="#坐标系" class="headerlink" title="坐标系"></a>坐标系</h2><p>UIKit框架的坐标系是左上角</p>
<p>而 coretext的坐标系是左下角</p>
<p>因此 要进行坐标系转换</p>
<h2 id="简单demo"><a href="#简单demo" class="headerlink" title="简单demo"></a>简单demo</h2><p>我们学习这个框架从简单的demo慢慢扩充到复杂功能及所有api介绍</p>
<p>demo 代码<br>$$</p>
<ul>
<li><p>(void)drawRect:(CGRect)rect {<br>  CGContextRef context = UIGraphicsGetCurrentContext();<br>  CGContextSetTextMatrix(context , CGAffineTransformIdentity);<br>  CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</p>
<pre><code>CGContextScaleCTM(context, 1.0 ,-1.0);
</code></pre><p>  NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@”富文本学习/慢慢来吧。不是一朝一夕之功。ok \n ok ok”];</p>
<p>  CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);</p>
<p>  CGMutablePathRef Path = CGPathCreateMutable();<br>  CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-20));<br>  CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);<br>  CTFrameDraw(frame,context);</p>
<p>  CGPathRelease(Path);<br>  CFRelease(framesetter);<br>}<br>$$<br>显示效果</p>
</li>
</ul>
<p><img src="/images/coretext2.tiff" alt="image"></p>
<p>上面就是用coretext实现的简单效果，看着一点都不酷。一个UIlabel就能实现的效果。不过不要紧，慢慢往下看。</p>
<h2 id="开始学习API"><a href="#开始学习API" class="headerlink" title="开始学习API"></a>开始学习API</h2><p>首先我们学习绘制api <strong>CTFrame.h</strong></p>
<p>CTFrame 相当于布局控制文件。控制文本的整体绘制。</p>
<p>我们从三个方面来看这个类 </p>
<h5 id="1-frame-访问函数"><a href="#1-frame-访问函数" class="headerlink" title="1 frame 访问函数"></a>1 frame 访问函数</h5><p><code>void CTFrameDraw(CTFrameRef frame,CGContextRef context )</code> </p>
<p><code>将文本呈现在屏幕上</code></p>
<p><code>void CTFrameGetLineOrigins(CTFrameRef frame,CFRange range,CGPoint origins[] )</code></p>
<p><code>获取range范围内frame每行的起点 range 需要解释下 range.location 是 从第几个开始返回point  range.len 是返回几个，要是0就默认返回都最后一个。要是range 的location + len 大于CTLine的数量，所有的origins 都会是（0，0） 获取的坐标点是 coretext坐标系中的坐标</code></p>
<p><code>CFArrayRef CTFrameGetLines(CTFrameRef frame )</code></p>
<p><code>获取frame所有线的数组，frame是由CTLine组成的</code></p>
<p>   NSArray <em> array = (__bridge NSArray </em> )CTFrameGetLines(frame);</p>
<pre><code>NSLog(@&quot;frame lines %@&quot;,array);
</code></pre><p><code>CFDictionaryRef __nullable CTFrameGetFrameAttributes(CTFrameRef frame )</code></p>
<p><code>获取修身frame的相关属性</code></p>
<p><code>CGPathRef CTFrameGetPath(CTFrameRef frame )</code></p>
<p><code>获取frame绘制的路径不包括剪切路径</code>，</p>
<p><code>CFRange CTFrameGetVisibleStringRange(CTFrameRef frame )</code> </p>
<p><code>获取frame 能看见的，绘制在屏幕上的string 的range范围</code></p>
<p><code>CFRange CTFrameGetStringRange(CTFrameRef frame )</code></p>
<p><code>获取frame 字符串的范围(包括不可见的)</code></p>
<h6 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">- (void)drawRect:(CGRect)rect &#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">        CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;富文本学习/慢慢来吧。不是一朝一夕之功。ok \n ok ok&quot;];</div><div class="line">    </div><div class="line">    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    CGMutablePathRef Path = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-640));</div><div class="line">    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);</div><div class="line">    </div><div class="line">    ///frame 相关访问函数 相当于布局控制器。我们能获取布局控制器相关参数</div><div class="line">    CTFrameDraw(frame,context);</div><div class="line">    NSArray * array = (__bridge NSArray * )CTFrameGetLines(frame);</div><div class="line">    NSLog(@&quot;frame lines %@&quot;,array);</div><div class="line">    </div><div class="line">    NSInteger count = CFArrayGetCount((__bridge CFArrayRef)array);</div><div class="line">    CGPoint  origins[count] ;</div><div class="line">    ///range 需要解释下 range.location 是 从第几个开始返回point  range.len 是返回几个，要是0就默认返回都最后一个。要是range 的location + len 大于CTLine的数量，所有的origins 都会是（0，0） 获取的坐标点是 coretext坐标系中的坐标 </div><div class="line">    CTFrameGetLineOrigins(frame, CFRangeMake(0, 0), origins);</div><div class="line">    for (int i =0; i&lt;count; i++) &#123;</div><div class="line">        NSLog(@&quot;frame origins %f %f&quot;,origins[i].x,origins[i].y);</div><div class="line">    &#125;</div><div class="line">   NSDictionary * dic = (__bridge NSDictionary *) CTFrameGetFrameAttributes(frame);</div><div class="line">    NSLog(@&quot;frame att %@&quot;,dic);</div><div class="line">    </div><div class="line">    CGPathRef path = CTFrameGetPath(frame);</div><div class="line">    NSLog(@&quot;frame path %@&quot;,path);</div><div class="line">    </div><div class="line">    CFRange range =  CTFrameGetVisibleStringRange(frame);</div><div class="line">    NSLog(@&quot;frame visibleString Range %ld  %ld&quot;,range.location,range.length);</div><div class="line">    </div><div class="line">    range =  CTFrameGetStringRange(frame);</div><div class="line">    NSLog(@&quot;frame String Range %ld  %ld&quot;,range.location,range.length);</div><div class="line"></div><div class="line">    </div><div class="line">    CGPathRelease(Path);</div><div class="line">    CFRelease(framesetter);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">2017-02-23 15:19:42.578 CoreTextDemo[83004:902122] frame lines (</div><div class="line">    &quot;&lt;CTLine: 0x6080001ae8c0&gt;&#123;run count = 4, string range = (0, 24), width = 250.676, A/D/L = 12.72/4.08/0, glyph count = 24, runs = (\n\n&lt;CTRun: 0x7f8539f09720&gt;&#123;string range = (0, 5), string = \&quot;\\u5BCC\\u6587\\u672C\\u5B66\\u4E60\&quot;, attributes = &lt;CFBasicHash 0x608000267e40 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e05c788 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7f8539f1f160&gt;&#123;name = PingFangSC-Regular, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x608000086a90&gt;&#123;attributes = &lt;CFBasicHash 0x608000261640 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e062908 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x11af8e6c0 [0x10d69fc70]&gt;&#123;contents = \&quot;PingFangSC-Regular\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;\n\n\n&lt;CTRun: 0x7f8539f0de20&gt;&#123;string range = (5, 1), string = \&quot;/\&quot;, attributes = &lt;CFBasicHash 0x6080002609c0 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e05c788 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7f8539f04950&gt;&#123;name = Helvetica, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x600000085960&gt;&#123;attributes = &lt;CFBasicHash 0x60000007dd40 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e062908 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x10e0548a8 [0x10d69fc70]&gt;&#123;contents = \&quot;Helvetica\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;\n\n\n&lt;CTRun: 0x7f8539f2e9b0&gt;&#123;string range = (6, 14), string = \&quot;\\u6162\\u6162\\u6765\\u5427\\u3002\\u4E0D\\u662F\\u4E00\\u671D\\u4E00\\u5915\\u4E4B\\u529F\\u3002\&quot;, attributes = &lt;CFBasicHash 0x608000267e40 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e05c788 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7f8539f1f160&gt;&#123;name = PingFangSC-Regular, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x608000086a90&gt;&#123;attributes = &lt;CFBasicHash 0x608000261640 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e062908 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x11af8e6c0 [0x10d69fc70]&gt;&#123;contents = \&quot;PingFangSC-Regular\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;\n\n\n&lt;CTRun: 0x7f8539f2eaf0&gt;&#123;string range = (20, 4), string = \&quot;ok \\n\&quot;, attributes = &lt;CFBasicHash 0x6080002609c0 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e05c788 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7f8539f04950&gt;&#123;name = Helvetica, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x600000085960&gt;&#123;attributes = &lt;CFBasicHash 0x60000007dd40 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e062908 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x10e0548a8 [0x10d69fc70]&gt;&#123;contents = \&quot;Helvetica\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;\n\n)\n&#125;&quot;</div><div class="line">)</div><div class="line">2017-02-23 15:19:42.578 CoreTextDemo[83004:902122] frame origins 0.000000 14.000000</div><div class="line">2017-02-23 15:19:42.579 CoreTextDemo[83004:902122] frame att (null)</div><div class="line">2017-02-23 15:19:42.579 CoreTextDemo[83004:902122] frame path &lt;CGPath 0x60800003a300&gt;</div><div class="line">2017-02-23 15:19:42.579 CoreTextDemo[83004:902122] frame visibleString Range 0  24</div><div class="line">2017-02-23 15:19:42.580 CoreTextDemo[83004:902122] frame String Range 0  30</div></pre></td></tr></table></figure>
<p>从上面结果看 frame 没有设置 att 属性。那怎么设置属性值呢？请看 <strong>CTFramesetterRef</strong></p>
<h5 id="2-frame-values"><a href="#2-frame-values" class="headerlink" title="2 frame values"></a>2 frame values</h5><p>下面是frame att 属性的key  通过 这些key 可以控制 frame 的绘制布局</p>
<table>
<thead>
<tr>
<th style="text-align:left">kCTFrameProgressionAttributeName</th>
<th style="text-align:left">文字绘制方向，有三个值， kCTFrameProgressionTopToBottom水平绘制  从上到下， kCTFrameProgressionRightToLeft 垂直绘制，从右到左， kCTFrameProgressionLeftToRight 垂直绘制，从左到右</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">kCTFramePathFillRuleAttributeName</td>
<td style="text-align:left">在path路径的绘制规则。有两种 kCTFramePathFillEvenOdd 根据 CGContextEOFillPath 规则绘制  kCTFramePathFillWindingNumber 充满整个path  默认是kCTFramePathFillEvenOdd</td>
</tr>
<tr>
<td style="text-align:left">kCTFramePathWidthAttributeName</td>
<td style="text-align:left">这个属性暂时不知道干嘛用的，使用起来无效</td>
</tr>
<tr>
<td style="text-align:left">kCTFrameClippingPathsAttributeName</td>
<td style="text-align:left">这个value 是array  ，array 中必须包含 字典 ，字典的key值是kCTFramePathClippingPathAttributeName  ，value是path，可选key  kCTFramePathFillRuleAttributeName 可以配置path路径的填充方式</td>
</tr>
<tr>
<td style="text-align:left">kCTFramePathClippingPathAttributeName</td>
<td style="text-align:left">这个value是path</td>
</tr>
</tbody>
</table>
<h6 id="kCTFrameProgressionAttributeName"><a href="#kCTFrameProgressionAttributeName" class="headerlink" title="kCTFrameProgressionAttributeName"></a>kCTFrameProgressionAttributeName</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSMutableDictionary * Framedic = [NSMutableDictionary dictionary];</div><div class="line">  [Framedic setObject:@(kCTFrameProgressionLeftToRight) forKey:(__bridge NSString *)kCTFrameProgressionAttributeName];</div><div class="line">  CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, (__bridge CFDictionaryRef) Framedic);</div></pre></td></tr></table></figure>
<p>效果</p>
<p><img src="/images/coretext3.tiff" alt="image"></p>
<h6 id="kCTFrameProgressionRightToLeft"><a href="#kCTFrameProgressionRightToLeft" class="headerlink" title="kCTFrameProgressionRightToLeft"></a>kCTFrameProgressionRightToLeft</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSMutableDictionary * Framedic = [NSMutableDictionary dictionary];</div><div class="line"> [Framedic setObject:@(kCTFrameProgressionRightToLeft) forKey:(__bridge NSString *)kCTFrameProgressionAttributeName];</div><div class="line"> CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, (__bridge CFDictionaryRef) Framedic);</div></pre></td></tr></table></figure>
<p>效果</p>
<p><img src="images/image.tiff" alt="image"></p>
<h6 id="默认是kCTFrameProgressionTopToBottom"><a href="#默认是kCTFrameProgressionTopToBottom" class="headerlink" title="默认是kCTFrameProgressionTopToBottom"></a>默认是kCTFrameProgressionTopToBottom</h6><h6 id="kCTFramePathFillRuleAttributeName"><a href="#kCTFramePathFillRuleAttributeName" class="headerlink" title="kCTFramePathFillRuleAttributeName"></a>kCTFramePathFillRuleAttributeName</h6><p>我认为这个主要是填充path 规则的 kCTFramePathFillEvenOdd 这种方式进行理解</p>
<p>什么是 CGContextEOFillPath 规则  //使用奇偶规则填充当前路径</p>
<p>修改路径代码如下：使一个大的矩形套一个小的矩形</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CGMutablePathRef Path = CGPathCreateMutable();</div><div class="line">   CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-60));</div><div class="line">   CGPathAddRect(Path, NULL ,CGRectMake(100 , 0 ,self.bounds.size.width-150 , self.bounds.size.height-60));</div></pre></td></tr></table></figure>
<p>结果显示</p>
<p><img src="/images/image-1.tiff" alt="image"></p>
<h6 id="kCTFrameClippingPathsAttributeName-和-kCTFramePathClippingPathAttributeName"><a href="#kCTFrameClippingPathsAttributeName-和-kCTFramePathClippingPathAttributeName" class="headerlink" title="kCTFrameClippingPathsAttributeName 和 kCTFramePathClippingPathAttributeName"></a>kCTFrameClippingPathsAttributeName 和 kCTFramePathClippingPathAttributeName</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">NSMutableArray * arr = [NSMutableArray array];</div><div class="line"></div><div class="line">NSMutableDictionary * fillDic = [NSMutableDictionary dictionary];</div><div class="line">CGMutablePathRef clippath = CGPathCreateMutable();</div><div class="line">CGPathAddRect(clippath, NULL ,CGRectMake(100 , 20 ,self.bounds.size.width-150 , self.bounds.size.height-60));</div><div class="line">[fillDic setObject:(__bridge id _Nonnull)(clippath) forKey:(__bridge NSString *)kCTFramePathClippingPathAttributeName];</div><div class="line">[arr addObject:fillDic];</div><div class="line"></div><div class="line">fillDic = [NSMutableDictionary dictionary];</div><div class="line"> clippath = CGPathCreateMutable();</div><div class="line">CGPathAddRect(clippath, NULL ,CGRectMake(10 , 20 ,10 , self.bounds.size.height-60));</div><div class="line">[fillDic setObject:(__bridge id _Nonnull)(clippath) forKey:(__bridge NSString *)kCTFramePathClippingPathAttributeName];</div><div class="line">[arr addObject:fillDic];</div><div class="line">[Framedic setObject:arr forKey:(__bridge NSString *)kCTFrameClippingPathsAttributeName];</div></pre></td></tr></table></figure>
<p>剪切上面的路径 。与 kCTFramePathFillRuleAttributeName  暂时看不出变化来，应该是这个里面的路径全部clip。可能与path 重叠有关系，目前没做具体研究。</p>
<h5 id="3-frame-types"><a href="#3-frame-types" class="headerlink" title="3 frame types"></a>3 frame types</h5><h6 id="CFTypeID-CTFrameGetTypeID-void"><a href="#CFTypeID-CTFrameGetTypeID-void" class="headerlink" title="CFTypeID CTFrameGetTypeID( void )"></a>CFTypeID CTFrameGetTypeID( void )</h6><p>返回一个CFTypeID </p>
<h3 id="综合CFFrame-h-api-，可以看出该类能获取到frame的信息是-CTLIne-和CTLine-的起点。"><a href="#综合CFFrame-h-api-，可以看出该类能获取到frame的信息是-CTLIne-和CTLine-的起点。" class="headerlink" title="综合CFFrame.h api ，可以看出该类能获取到frame的信息是 CTLIne 和CTLine 的起点。"></a>综合CFFrame.h api ，可以看出该类能获取到frame的信息是 CTLIne 和CTLine 的起点。</h3><p>见图</p>
<p><img src="/images/image-2.tiff" alt="image"></p>
<p>上图不包含剪切的路径。</p>
<h2 id="CTFrameSetter-h"><a href="#CTFrameSetter-h" class="headerlink" title="CTFrameSetter.h"></a>CTFrameSetter.h</h2><p>创建 CTFrame 需要CTFrameSetter.h 类中</p>
<p>该类分四部分，<strong>Framesetter Types</strong> ， <strong>Framesetter Creation</strong> ，<strong>Frame Creation</strong>   ， <strong>Frame Sizing</strong></p>
<h3 id="1-Framesetter-Types"><a href="#1-Framesetter-Types" class="headerlink" title="1.Framesetter Types"></a>1.Framesetter Types</h3><p>CFTypeID CTFramesetterGetTypeID( void )  返回一个CTFramesetter 的 id 。</p>
<h3 id="2-Framesetter-Creation"><a href="#2-Framesetter-Creation" class="headerlink" title="2.Framesetter Creation"></a>2.Framesetter Creation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CTFramesetterRef CTFramesetterCreateWithAttributedString(CFAttributedStringRef string )</div><div class="line">用CFAttributedStringRef 属性字符串创建一个CTFramesetterRef</div></pre></td></tr></table></figure>
<p>获取Framesetter 只有这一种方式获取</p>
<h3 id="3-Frame-Creation"><a href="#3-Frame-Creation" class="headerlink" title="3.Frame Creation"></a>3.Frame Creation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">CTFrameRef CTFramesetterCreateFrame(</div><div class="line">	CTFramesetterRef framesetter,</div><div class="line">	CFRange stringRange,</div><div class="line">	CGPathRef path,</div><div class="line">	CFDictionaryRef __nullable frameAttributes )</div><div class="line">	</div><div class="line">该函数返回一个CTFrame 只有这一种方式创建CTFrameRef</div><div class="line">参数，需要一个CTFramesetterRef  </div><div class="line">      需要一个CFRange</div><div class="line">      需要一个CGPathRef</div><div class="line">	  需要一个CFDictionaryRef</div><div class="line">	  </div><div class="line">	  CFRange 控制的是文本的长度。如果设置长度是0，就是将attstr 字符串绘制到结束</div><div class="line">	  CGPathRef 就是绘制区域</div><div class="line">	  CFDictionaryRef 绘制CTFrame的相关属性设置，key值在CFFrame中</div></pre></td></tr></table></figure>
<p>测试代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CFRange range = CFRangeMake(2, mabstring.length-4);</div><div class="line">CTFrameRef frame = CTFramesetterCreateFrame(framesetter,range, Path, (__bridge CFDictionaryRef) Framedic);</div></pre></td></tr></table></figure>
<p>测试结果：</p>
<p><img src="/images/image-3.tiff" alt="image"></p>
<p>要是代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CFRange range = CFRangeMake(0, 0);  </div><div class="line">CTFrameRef frame = CTFramesetterCreateFrame(framesetter,range, Path, (__bridge CFDictionaryRef) Framedic);</div></pre></td></tr></table></figure>
<p>测试结果</p>
<p><img src="/images/image-4.tiff" alt="image"></p>
<p>从上下两个图看的出来，前面图的文本前后各少两个字。 所有字体还是对其排列。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CTTypesetterRef CTFramesetterGetTypesetter(</div><div class="line">	CTFramesetterRef framesetter ) </div><div class="line">	根据CTFramesetterRef 获取一个CTTypesetterRef  </div><div class="line">	目前还不知道CTTypesetterRef 有啥用</div></pre></td></tr></table></figure>
<h3 id="4-Frame-Sizing"><a href="#4-Frame-Sizing" class="headerlink" title="4.Frame Sizing"></a>4.Frame Sizing</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">CGSize CTFramesetterSuggestFrameSizeWithConstraints(</div><div class="line"></div><div class="line">	CTFramesetterRef framesetter,</div><div class="line"></div><div class="line">	CFRange stringRange,</div><div class="line"></div><div class="line">	CFDictionaryRef __nullable frameAttributes,</div><div class="line"></div><div class="line">	CGSize constraints,</div><div class="line"></div><div class="line">	CFRange * __nullable fitRange )</div><div class="line"></div><div class="line">获取Frame的大小</div><div class="line">这个函数适合创建Frame CGPath是矩形的算法，要是三角形等不规则图形就不适合</div></pre></td></tr></table></figure>
<p>测试代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">     </div><div class="line">    NSMutableDictionary * Framedic = [NSMutableDictionary dictionary];</div><div class="line">    </div><div class="line">    [Framedic setObject:@(kCTFrameProgressionTopToBottom) forKey:(__bridge NSString *)kCTFrameProgressionAttributeName];</div><div class="line">    [Framedic setObject:@(kCTFramePathFillEvenOdd) forKey:(__bridge NSString *)kCTFramePathFillRuleAttributeName];</div><div class="line">    </div><div class="line">    NSMutableArray * arr = [NSMutableArray array];</div><div class="line">    </div><div class="line">    NSMutableDictionary * fillDic = [NSMutableDictionary dictionary];</div><div class="line">    CGMutablePathRef clippath = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(clippath, NULL ,CGRectMake(100 , 20 ,self.bounds.size.width-150 , self.bounds.size.height-60));</div><div class="line">    [fillDic setObject:(__bridge id _Nonnull)(clippath) forKey:(__bridge NSString *)kCTFramePathClippingPathAttributeName];</div><div class="line">    [arr addObject:fillDic];</div><div class="line">    </div><div class="line">    fillDic = [NSMutableDictionary dictionary];</div><div class="line">     clippath = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(clippath, NULL ,CGRectMake(10 , 20 ,10 , self.bounds.size.height-60));</div><div class="line">    [fillDic setObject:(__bridge id _Nonnull)(clippath) forKey:(__bridge NSString *)kCTFramePathClippingPathAttributeName];</div><div class="line">    [arr addObject:fillDic];</div><div class="line">//    [Framedic setObject:arr forKey:(__bridge NSString *)kCTFrameClippingPathsAttributeName];</div><div class="line">    </div><div class="line">    </div><div class="line">    CFRange range = CFRangeMake(0, 0);</div><div class="line">    </div><div class="line">    CTFrameRef frame = CTFramesetterCreateFrame(framesetter,range, Path, (__bridge CFDictionaryRef) Framedic);</div><div class="line">    </div><div class="line">    CGRect rectBoud = CGPathGetBoundingBox(Path);</div><div class="line">    CFRange fitRange = CFRangeMake(0, 0);</div><div class="line">    </div><div class="line">    CGSize size =CTFramesetterSuggestFrameSizeWithConstraints(framesetter, range, (__bridge CFDictionaryRef) Framedic, rectBoud.size, &amp;fitRange);</div><div class="line">    NSLog(@&quot; 获取frame 的大小 %f %f %ld %ld&quot;,size.height,size.width,fitRange.location,fitRange.location);</div></pre></td></tr></table></figure>
<p>这个函数只能测试矩形排版，矩形内必须一次排满路径才行。不能有clip path存在才能准确。局限性比较大。</p>
<h2 id="3-CTLine-h"><a href="#3-CTLine-h" class="headerlink" title="3.CTLine.h"></a>3.CTLine.h</h2><p>CTFrame布局是由Path  和CTLine 组成的。</p>
<p>我们能从CTLine中获取到什么信息呢。</p>
<p>我们从以下方面  <strong>Line Types</strong>, <strong>Line Creation</strong>,<strong>Line Access</strong> ,<strong>Line Measurement</strong>, <strong>Line Caret Positioning and Highlighting</strong></p>
<h4 id="1-Line-Types"><a href="#1-Line-Types" class="headerlink" title="1.Line Types"></a>1.Line Types</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CFTypeID CTLineGetTypeID( void )</div><div class="line">获取CTLine的 CFTypeID</div></pre></td></tr></table></figure>
<p>枚举值 CTLineBoundsOptions   和  CTLineTruncationType</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">typedef CF_OPTIONS(CFOptionFlags, CTLineBoundsOptions) &#123;</div><div class="line">    kCTLineBoundsExcludeTypographicLeading  = 1 &lt;&lt; 0,</div><div class="line">    kCTLineBoundsExcludeTypographicShifts   = 1 &lt;&lt; 1,</div><div class="line">    kCTLineBoundsUseHangingPunctuation      = 1 &lt;&lt; 2,</div><div class="line">    kCTLineBoundsUseGlyphPathBounds         = 1 &lt;&lt; 3,</div><div class="line">    kCTLineBoundsUseOpticalBounds           = 1 &lt;&lt; 4,</div><div class="line">    kCTLineBoundsIncludeLanguageExtents CT_ENUM_AVAILABLE(10_11, 8_0) = 1 &lt;&lt; 5,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>目前看上面的枚举值不知道具体有啥用。放过，等看完下面的回来补充。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">typedef CF_ENUM(uint32_t, CTLineTruncationType) &#123;</div><div class="line">    kCTLineTruncationStart  = 0,</div><div class="line">    kCTLineTruncationEnd    = 1,</div><div class="line">    kCTLineTruncationMiddle = 2</div><div class="line">&#125;;</div><div class="line">这个kCTLineTruncationStart 截断头部</div><div class="line">kCTLineTruncationEnd 截断尾部</div><div class="line">kCTLineTruncationMiddle 截断中间</div></pre></td></tr></table></figure>
<h4 id="2-Line-Creation"><a href="#2-Line-Creation" class="headerlink" title="2.Line Creation"></a>2.Line Creation</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">CTLineRef CTLineCreateWithAttributedString(</div><div class="line">    CFAttributedStringRef attrString )  </div><div class="line">根据CFAttributedStringRef 创建一个 CTLineRef     这个只能创建一行文本。</div><div class="line"></div><div class="line">//CTLine</div><div class="line">-(void)drawRect:(CGRect)rect&#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">//    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;富文本学习富文本学习富文本学习富文本学习富文本学习富文本学习富文本学习富文本学习&quot;];</div><div class="line">   CTLineRef line = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</div><div class="line">    CTLineDraw(line, context);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="/images/image-5.tiff" alt="image"></p>
<p>文字一行排开。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">CTLineRef __nullable CTLineCreateTruncatedLine(</div><div class="line">    CTLineRef line,</div><div class="line">    double width,</div><div class="line">    CTLineTruncationType truncationType,</div><div class="line">    CTLineRef __nullable truncationToken )</div><div class="line">    </div><div class="line">   line 创建的截断的线</div><div class="line">   width 截断位置</div><div class="line">   truncationType 截断类型 头部截断还是中部尾部截断</div><div class="line">   truncationToken  这个是截断标志  不能让 truncationToken 线宽大于 width 要是大于width 函数返回NULL。</div><div class="line">   </div><div class="line">-(void)drawRect:(CGRect)rect&#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">//    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;富文本学习慢慢来吧。不是一朝一夕之功。总是么盛大的饭卡多看看案发扩大到非卡卡打卡卡&quot;];</div><div class="line">   CTLineRef line = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;dd&quot;];</div><div class="line">   CTLineRef  linetoken = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    </div><div class="line">    CTLineRef lineTru = CTLineCreateTruncatedLine(line, 300, kCTLineTruncationStart, linetoken);</div><div class="line">//    CTLineDraw(line, context);</div><div class="line">    CTLineDraw(lineTru, context);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>头部截断效果如下：</p>
<p><img src="/images/image-8.tiff" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">CTLineRef __nullable CTLineCreateJustifiedLine(</div><div class="line">    CTLineRef line,</div><div class="line">    CGFloat justificationFactor,</div><div class="line">    double justificationWidth )</div><div class="line">    line 参考线</div><div class="line">    justificationFactor  调整文字显示宽度比例 。大于等于1 就是justificationWidth 小于 1 大于零  宽度就是justificationFactor * justificationWidth</div><div class="line">    justificationWidth 宽度。</div><div class="line">   调整宽度小于实际宽度，文字会被压扁。</div><div class="line">    </div><div class="line">    //CTLine</div><div class="line">-(void)drawRect:(CGRect)rect&#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">//    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;富文本学习&quot;];</div><div class="line">   CTLineRef line = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">  CTLineRef lineJustified =  CTLineCreateJustifiedLine(line, 1, 300);</div><div class="line">    </div><div class="line">    CTLineDraw(line, context);</div><div class="line">    CTLineDraw(lineJustified, context);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果如图</p>
<p><img src="/images/image-6.tiff" alt="image"></p>
<p>要是文本过长，justificationFactor 必须大于等于 1 否则，不进行CTLine绘制。</p>
<p>代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//CTLine</div><div class="line">-(void)drawRect:(CGRect)rect&#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">//    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;富文本学习慢慢来吧。不是一朝一夕之功。总是么盛大的饭卡多看看案发扩大到非卡卡打卡卡&quot;];</div><div class="line">   CTLineRef line = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">  CTLineRef lineJustified =  CTLineCreateJustifiedLine(line, 1, 300);</div><div class="line">    </div><div class="line">//    CTLineDraw(line, context);</div><div class="line">    CTLineDraw(lineJustified, context);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果图：</p>
<p><img src="/images/image-7.tiff" alt="image"></p>
<p>文字压扁了。</p>
<h3 id="3-Line-Access"><a href="#3-Line-Access" class="headerlink" title="3.Line Access"></a>3.Line Access</h3><table>
<thead>
<tr>
<th>CFIndex CTLineGetGlyphCount( CTLineRef line )</th>
<th>获取Glyph的个数</th>
</tr>
</thead>
<tbody>
<tr>
<td>CFArrayRef CTLineGetGlyphRuns(CTLineRef line )</td>
<td>获取CTRunRef数组</td>
</tr>
<tr>
<td>CFRange CTLineGetStringRange(CTLineRef line )</td>
<td>获取线所在字符串的范围</td>
</tr>
<tr>
<td>double CTLineGetPenOffsetForFlush( CTLineRef line, CGFloat flushFactor, double flushWidth )</td>
<td>文本flushFactor比例的距离到flushWidth<em>flushFactor的距离  flushFactor大于1 相当于1操作。公式  假设文本长度textWidth  结果result=flushWidth  </em>  flushFactor - flushFactor  * textWidth</td>
</tr>
<tr>
<td>void CTLineDraw(  CTLineRef line,  CGContextRef context )</td>
<td>绘制线。位置是从底部向上绘制。</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">-(void)drawRect:(CGRect)rect&#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">//    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;富文本学习慢慢来吧。不是一朝一夕之功。总是么盛大的饭卡多看看案发扩大到非卡卡打卡卡&quot;];</div><div class="line">   CTLineRef line = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;dd&quot;];</div><div class="line">   CTLineRef  linetoken = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    </div><div class="line">    CTLineRef lineTru = CTLineCreateTruncatedLine(line, 300, kCTLineTruncationStart, linetoken);</div><div class="line">//    CTLineDraw(line, context);</div><div class="line"></div><div class="line">    </div><div class="line">    </div><div class="line">    CTLineDraw(line, context);</div><div class="line">    double offset =  CTLineGetPenOffsetForFlush(line, 2, 100);</div><div class="line">    NSLog(@&quot;line offset %f&quot;,offset);</div><div class="line">    ///access</div><div class="line">    CFIndex index =   CTLineGetGlyphCount(lineTru);</div><div class="line">    NSLog(@&quot;line glyph %ld&quot;,index);</div><div class="line">    index =   CTLineGetGlyphCount(line);</div><div class="line">    NSLog(@&quot;line glyph %ld&quot;,index);</div><div class="line">    </div><div class="line">    </div><div class="line">  NSArray * runArr = (__bridge NSArray *)  CTLineGetGlyphRuns(line);</div><div class="line">    NSLog(@&quot;runArr %@&quot; ,runArr);</div><div class="line">    CFRange range =  CTLineGetStringRange(lineTru );</div><div class="line">    NSLog(@&quot;line range %ld %ld&quot;,range.location,range.length);</div><div class="line">    range =  CTLineGetStringRange(line);</div><div class="line">    NSLog(@&quot;line range %ld %ld&quot;,range.location,range.length);</div><div class="line">&#125;</div><div class="line"></div><div class="line">结果：</div><div class="line">2017-02-24 17:07:16.149 CoreTextDemo[5171:125678] line offset 0.000000</div><div class="line">2017-02-24 17:07:16.149 CoreTextDemo[5171:125678] line glyph 25</div><div class="line">2017-02-24 17:07:16.149 CoreTextDemo[5171:125678] line glyph 41</div><div class="line">2017-02-24 17:07:16.150 CoreTextDemo[5171:125678] runArr (</div><div class="line">    &quot;&lt;CTRun: 0x7febf3709730&gt;&#123;string range = (0, 41), string = \&quot;\\u5BCC\\u6587\\u672C\\u5B66\\u4E60\\u6162\\u6162\\u6765\\u5427\\u3002\\u4E0D\\u662F\\u4E00\\u671D\\u4E00\\u5915\\u4E4B\\u529F\\u3002\\u603B\\u662F\\u4E48\\u76DB\\u5927\\u7684\\u996D\\u5361\\u591A\\u770B\\u770B\\u6848\\u53D1\\u6269\\u5927\\u5230\\u975E\\u5361\\u5361\\u6253\\u5361\\u5361\&quot;, attributes = &lt;CFBasicHash 0x600000266940 [0x10f4b1c70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10fe6e788 [0x10f4b1c70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7febf3709600&gt;&#123;name = PingFangSC-Regular, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x608000094e60&gt;&#123;attributes = &lt;CFBasicHash 0x60800026d980 [0x10f4b1c70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10fe74908 [0x10f4b1c70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x11cda06c0 [0x10f4b1c70]&gt;&#123;contents = \&quot;PingFangSC-Regular\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;&quot;</div><div class="line">)</div><div class="line">2017-02-24 17:07:16.150 CoreTextDemo[5171:125678] line range 0 41</div><div class="line">2017-02-24 17:07:16.152 CoreTextDemo[5171:125678] line range 0 41</div></pre></td></tr></table></figure>
<p>从上面结果看：CTLineGetStringRange获取的范围可能会有问题。用的时候要小心（要是自己创建CTline的话）这个只是自己创建的CTline不准，而CTFrame创建的CTLine是没问题的。</p>
<p>CTLineGetPenOffsetForFlush 函数相当于 文本到某点还有多少距离。</p>
<p>测试代码是</p>
<p>` NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@”富文本学”];</p>
<p>   CTLineRef line = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</p>
<pre><code>CTLineDraw(line, context);

double offset =  CTLineGetPenOffsetForFlush(line,0.5, 300);

NSLog(@&quot;line offset %f&quot;,offset);`
</code></pre><p>如图</p>
<p><img src="/images/image-9.tiff" alt="image"></p>
<p>打印结果是<strong>2017-02-24 19:33:15.061 CoreTextDemo[4317:74402] line offset 126.000000</strong></p>
<h3 id="4-Line-Measurement"><a href="#4-Line-Measurement" class="headerlink" title="4.Line Measurement"></a>4.Line Measurement</h3><table>
<thead>
<tr>
<th>CTLineGetTypographicBounds( CTLineRef line,CGFloat <em> __nullable ascent,CGFloat </em> <strong>nullable descent, CGFloat * </strong>nullable leading )</th>
<th>获取线 的ascent descent leading ,返回宽度</th>
</tr>
</thead>
<tbody>
<tr>
<td>CGRect CTLineGetBoundsWithOptions(CTLineRef line,CTLineBoundsOptions options )</td>
<td>目前还不知道CTLineBoundsOptions 代表啥。 应该与富文本的设置有关。暂时不做研究</td>
</tr>
<tr>
<td>double CTLineGetTrailingWhitespaceWidth(CTLineRef line )</td>
<td>目前还不会用</td>
</tr>
<tr>
<td>CGRect CTLineGetImageBounds(CTLineRef line,CGContextRef __nullable context )</td>
<td>目前还不会用</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CGFloat ascent;</div><div class="line">CGFloat descent;</div><div class="line">CGFloat leading;</div><div class="line">CTLineGetTypographicBounds(line, &amp;ascent, &amp;descent, &amp;leading);</div><div class="line">NSLog(@&quot;line ascent %f,descent %f,leading %f&quot;,ascent,descent,leading);</div></pre></td></tr></table></figure>
<h3 id="5-Line-Caret-Positioning-and-Highlighting"><a href="#5-Line-Caret-Positioning-and-Highlighting" class="headerlink" title="5.Line Caret Positioning and Highlighting"></a>5.Line Caret Positioning and Highlighting</h3><table>
<thead>
<tr>
<th>CFIndex CTLineGetStringIndexForPosition(CTLineRef line,CGPoint position )</th>
<th>获取线position位置的String index</th>
</tr>
</thead>
<tbody>
<tr>
<td>CGFloat CTLineGetOffsetForStringIndex(CTLineRef line,CFIndex charIndex,CGFloat * __nullable secondaryOffset )</td>
<td>获取index位置字符的偏移量。目前不知道 返回结果和secondaryOffset 的区别</td>
</tr>
<tr>
<td>void CTLineEnumerateCaretOffsets(CTLineRef line,void (^block)(double offset, CFIndex charIndex, bool leadingEdge, bool* stop) ) CT_AVAILABLE(10_11, 9_0)</td>
<td>返回每个字体的前后边沿</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">CFIndex stringIndex =  CTLineGetStringIndexForPosition(line, CGPointMake(20,3 ));</div><div class="line">    NSLog(@&quot;line StringIndex %ld&quot;,stringIndex);</div><div class="line">    </div><div class="line">    CGFloat  secondaryOffset;</div><div class="line">   CGFloat offsetIndex = CTLineGetOffsetForStringIndex(line, 2,&amp;secondaryOffset );</div><div class="line">    NSLog(@&quot;line IndexOffset %lf ,secondaryOffset %lf&quot;,offsetIndex,secondaryOffset);</div><div class="line">    </div><div class="line">    CTLineEnumerateCaretOffsets(line, ^(double offset, CFIndex charIndex, bool leadingEdge, bool * _Nonnull stop) &#123;</div><div class="line">        NSLog(@&quot; offset %lf,charindex %ld,leadingEdge %d&quot;,offset,charIndex,leadingEdge);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">结果</div><div class="line">2017-02-27 11:29:21.537 CoreTextDemo[6188:222405] line StringIndex 2</div><div class="line">2017-02-27 11:29:21.537 CoreTextDemo[6188:222405] line IndexOffset 24.000000 ,secondaryOffset 24.000000</div><div class="line">2017-02-27 11:29:21.537 CoreTextDemo[6188:222405]  offset 0.000000,charindex 0,leadingEdge 1</div><div class="line">2017-02-27 11:29:21.538 CoreTextDemo[6188:222405]  offset 12.000000,charindex 0,leadingEdge 0</div><div class="line">2017-02-27 11:29:21.538 CoreTextDemo[6188:222405]  offset 12.000000,charindex 1,leadingEdge 1</div><div class="line">2017-02-27 11:29:21.538 CoreTextDemo[6188:222405]  offset 24.000000,charindex 1,leadingEdge 0</div><div class="line">2017-02-27 11:29:21.538 CoreTextDemo[6188:222405]  offset 24.000000,charindex 2,leadingEdge 1</div><div class="line">2017-02-27 11:29:21.538 CoreTextDemo[6188:222405]  offset 36.000000,charindex 2,leadingEdge 0</div><div class="line">2017-02-27 11:29:21.538 CoreTextDemo[6188:222405]  offset 36.000000,charindex 3,leadingEdge 1</div><div class="line">2017-02-27 11:29:21.539 CoreTextDemo[6188:222405]  offset 48.000000,charindex 3,leadingEdge 0</div></pre></td></tr></table></figure>
<p>CTLine  的模型图</p>
<p><img src="/images/image-10.tiff" alt="image"></p>
<h2 id="CTRun-h"><a href="#CTRun-h" class="headerlink" title="CTRun.h"></a>CTRun.h</h2><p>CTLine是由CTRun组成的。</p>
<p>我们通过以下几个方面来看看CTRun</p>
<p>   1.Glyph Run Types</p>
<p>   2Glyph Run Access</p>
<h3 id="1-Glyph-Run-Types"><a href="#1-Glyph-Run-Types" class="headerlink" title="1.Glyph Run Types"></a>1.Glyph Run Types</h3><p>CFTypeID CTRunGetTypeID( void ) 获取CTRunRef 的 CFTypeID </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">typedef CF_OPTIONS(uint32_t, CTRunStatus)</div><div class="line">&#123;</div><div class="line">    kCTRunStatusNoStatus = 0,</div><div class="line">    kCTRunStatusRightToLeft = (1 &lt;&lt; 0),</div><div class="line">    kCTRunStatusNonMonotonic = (1 &lt;&lt; 1),</div><div class="line">    kCTRunStatusHasNonIdentityMatrix = (1 &lt;&lt; 2)</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Run的状态</div><div class="line">kCTRunStatusNoStatus 没有属性</div><div class="line">kCTRunStatusRightToLeft  暂时不知道干嘛的 </div><div class="line">kCTRunStatusNonMonotonic   暂时不知道干嘛的</div><div class="line">kCTRunStatusHasNonIdentityMatrix   暂时不知道干嘛的</div></pre></td></tr></table></figure>
<h3 id="2-Glyph-Run-Access"><a href="#2-Glyph-Run-Access" class="headerlink" title="2.Glyph Run Access"></a>2.Glyph Run Access</h3><table>
<thead>
<tr>
<th>CTRunGetGlyphCount (CTRunRef run )</th>
<th>获取run的字体个数</th>
</tr>
</thead>
<tbody>
<tr>
<td>CFDictionaryRef CTRunGetAttributes(CTRunRef run )</td>
<td>获取run的属性</td>
</tr>
<tr>
<td>CTRunStatus CTRunGetStatus(CTRunRef run )</td>
<td>获取 status 不知道这个干嘛用</td>
</tr>
<tr>
<td>const CGGlyph * __nullable CTRunGetGlyphsPtr(CTRunRef run )</td>
<td>获取一个CGGlyph 指针数组</td>
</tr>
<tr>
<td>void CTRunGetGlyphs(CTRunRef run,CFRange range,CGGlyph buffer[] )</td>
<td>获取数据CGGlyph 在范围range</td>
</tr>
<tr>
<td>const CGPoint * __nullable CTRunGetPositionsPtr(CTRunRef run )</td>
<td>获取每个glyph 字体的起始位置数组</td>
</tr>
<tr>
<td>void CTRunGetPositions(CTRunRef run,CFRange range,CGPoint buffer[] )</td>
<td>获取数据获取数据CGGlyph位置 在范围range</td>
</tr>
<tr>
<td>const CGSize * __nullable CTRunGetAdvancesPtr(CTRunRef run )</td>
<td>获取CGGlyph 的大小数组</td>
</tr>
<tr>
<td>void CTRunGetAdvances(CTRunRef run,CFRange range,CGSize buffer[] )</td>
<td>获取数据获取数据CGGlyph大小 在范围range</td>
</tr>
<tr>
<td>const CFIndex * __nullable CTRunGetStringIndicesPtr(CTRunRef run )</td>
<td>获取CGGlyph 在整个字符串index数组的大小数组</td>
</tr>
<tr>
<td>void CTRunGetStringIndices(CTRunRef run,CFRange range,CFIndex buffer[] )</td>
<td>获取数据获取数据CGGlyph在整个字符串index处数组 在范围range</td>
</tr>
<tr>
<td>CFRange CTRunGetStringRange(CTRunRef run )</td>
<td>获取run在字符串中的range</td>
</tr>
<tr>
<td>double CTRunGetTypographicBounds(CTRunRef run,CFRange range,CGFloat <em> __ nullable ascent,CGFloat </em>  <strong> nullable descent,CGFloat * </strong>nullable leading )</td>
<td>获取run 在范围range的的相关信息 返回宽度</td>
</tr>
<tr>
<td>CGRect CTRunGetImageBounds( CTRunRef run,CGContextRef __nullable context,CFRange range )</td>
<td>获取一个rect 具体是怎么样子不知道</td>
</tr>
<tr>
<td>CGAffineTransform CTRunGetTextMatrix(CTRunRef run )</td>
<td>获取run 的二维矩阵</td>
</tr>
<tr>
<td>void CTRunDraw(CTRunRef run,CGContextRef context,CFRange range )</td>
<td>绘制run 位置什么的不变。</td>
</tr>
</tbody>
</table>
<p>代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div></pre></td><td class="code"><pre><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">//    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;富文本学吧&quot;];</div><div class="line">    NSDictionary * dic = [NSDictionary dictionaryWithObject:[UIFont systemFontOfSize:18] forKey:(__bridge NSString *)kCTFontAttributeName];</div><div class="line">    ///设置字体</div><div class="line">    [mabstring setAttributes:dic range:NSMakeRange(2, 3)];</div><div class="line">   CTLineRef line = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;dd&quot;];</div><div class="line">   CTLineRef  linetoken = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    </div><div class="line">    CTLineRef lineTru = CTLineCreateTruncatedLine(line, 300, kCTLineTruncationStart, linetoken);</div><div class="line">//    CTLineDraw(line, context);</div><div class="line"></div><div class="line">    </div><div class="line">    </div><div class="line">//    CTLineDraw(line, context);</div><div class="line">    double offset =  CTLineGetPenOffsetForFlush(line,0.5, 300);</div><div class="line">    NSLog(@&quot;line offset %f&quot;,offset);</div><div class="line">    UIView * view =[[UIView alloc]initWithFrame:CGRectMake(300/2-offset, self.bounds.size.height-64, offset, 10)];</div><div class="line">    [self addSubview:view];</div><div class="line">    view.backgroundColor =[UIColor redColor];</div><div class="line">    </div><div class="line">    view =[[UIView alloc]initWithFrame:CGRectMake(0, self.bounds.size.height-64, 300/2, 10)];</div><div class="line">    [self addSubview:view];</div><div class="line">    view.alpha = 0.4;</div><div class="line">    view.backgroundColor =[UIColor greenColor];</div><div class="line"></div><div class="line">    ///access</div><div class="line">    CFIndex index =   CTLineGetGlyphCount(lineTru);</div><div class="line">    NSLog(@&quot;line glyph %ld&quot;,index);</div><div class="line">    index =   CTLineGetGlyphCount(line);</div><div class="line">    NSLog(@&quot;line glyph %ld&quot;,index);</div><div class="line">    </div><div class="line">    </div><div class="line">  NSArray * runArr = (__bridge NSArray *)  CTLineGetGlyphRuns(line);</div><div class="line">    NSLog(@&quot;runArr %@&quot; ,runArr);</div><div class="line">    </div><div class="line"></div><div class="line">    if (runArr.count&gt;1) &#123;</div><div class="line">        CTRunRef run = (__bridge CTRunRef)runArr[1];</div><div class="line">        CFIndex index =  CTRunGetGlyphCount(run);</div><div class="line">        NSLog(@&quot;Run glyph 个数 %ld&quot;,index);</div><div class="line">       NSDictionary * dic = (__bridge NSDictionary * ) CTRunGetAttributes(run);</div><div class="line">        NSLog(@&quot;run att %@&quot;,dic);</div><div class="line">        CTRunStatus status = CTRunGetStatus(run);</div><div class="line">        NSLog(@&quot;run status %d&quot;,status);</div><div class="line">        </div><div class="line">        </div><div class="line">       const CGGlyph * glyph = CTRunGetGlyphsPtr(run);</div><div class="line">        const CGPoint * point =   CTRunGetPositionsPtr(run);</div><div class="line">        const CGSize * size = CTRunGetAdvancesPtr(run);</div><div class="line">        const CFIndex *  indexs = CTRunGetStringIndicesPtr(run);</div><div class="line">        for (int i=0; i&lt;index; i++) &#123;</div><div class="line">            NSLog(@&quot;run glyph   %d&quot;,glyph[i]);</div><div class="line">            NSLog(@&quot;run point %lf %lf&quot;,point[i].x,point[i].y);</div><div class="line">            NSLog(@&quot;run size %lf %lf&quot;,size[i].width,size[i].height);</div><div class="line">            NSLog(@&quot;run index %ld&quot;,indexs[i]);</div><div class="line">        &#125;</div><div class="line">        CGGlyph buffer[2];</div><div class="line">        CGPoint pointPos[2];</div><div class="line">        CGSize sizeBuffer[2];</div><div class="line">        CFIndex indexBuffer[2];</div><div class="line">        CTRunGetGlyphs(run, CFRangeMake(0, 2), buffer);</div><div class="line">        NSLog(@&quot;run glyph %d %d&quot;,buffer[0],buffer[1]);</div><div class="line">        CTRunGetPositions(run, CFRangeMake(0, 2), pointPos);</div><div class="line">        NSLog(@&quot;run glyph point %lf %lf&quot;,pointPos[0].x,pointPos[1].y);</div><div class="line">        CTRunGetAdvances(run, CFRangeMake(0, 2), sizeBuffer);</div><div class="line">        NSLog(@&quot;run glyph size %lf %lf&quot;,sizeBuffer[0].width,sizeBuffer[1].height);</div><div class="line">         CTRunGetStringIndices(run,CFRangeMake(0, 2),indexBuffer);</div><div class="line">        NSLog(@&quot;run glyph index %ld %ld&quot;,indexBuffer[0],indexBuffer[1]);</div><div class="line">        CFRange stringRange =  CTRunGetStringRange(run);</div><div class="line">        NSLog(@&quot;run string range %ld %ld&quot;,stringRange.location,stringRange.length);</div><div class="line">        CGFloat ascent;</div><div class="line">        CGFloat descent;</div><div class="line">        CGFloat leading;</div><div class="line">        CTRunGetTypographicBounds(run, CFRangeMake(1, 2), &amp;ascent, &amp;descent, &amp;leading);</div><div class="line">        NSLog(@&quot;run ascent %f,descent %f,leading %f&quot;,ascent,descent,leading);</div><div class="line"></div><div class="line">    CGRect imageRect=  CTRunGetImageBounds(run, context, CFRangeMake(1, 2));</div><div class="line">        NSLog(@&quot;不知道能干嘛 run image rect %@&quot;,NSStringFromCGRect(imageRect));</div><div class="line">        UIView * view = [[UIView alloc]initWithFrame:imageRect];</div><div class="line">        view.backgroundColor =[UIColor redColor ];</div><div class="line">        view.alpha = 0.8;</div><div class="line">        [self addSubview:view];</div><div class="line">        CGAffineTransform transfrom =   CTRunGetTextMatrix(run);</div><div class="line">        NSLog(@&quot;run transform %@&quot;,NSStringFromCGAffineTransform(transfrom));</div><div class="line">        </div><div class="line">        CTRunDraw(run, context, CFRangeMake(1, 2));</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    结果</div><div class="line">    2017-02-27 15:12:46.162 CoreTextDemo[11205:345484] line offset 110.487000</div><div class="line">2017-02-27 15:12:46.163 CoreTextDemo[11205:345484] line glyph 5</div><div class="line">2017-02-27 15:12:46.163 CoreTextDemo[11205:345484] line glyph 5</div><div class="line">2017-02-27 15:12:46.163 CoreTextDemo[11205:345484] runArr (</div><div class="line">    &quot;&lt;CTRun: 0x7fdb89c28330&gt;&#123;string range = (0, 2), string = \&quot;\\u5BCC\\u6587\&quot;, attributes = &lt;CFBasicHash 0x60800026abc0 [0x10117ec70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x101b3b788 [0x10117ec70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7fdb89c28130&gt;&#123;name = PingFangSC-Regular, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x60000008a640&gt;&#123;attributes = &lt;CFBasicHash 0x600000271a80 [0x10117ec70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x101b41908 [0x10117ec70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x10ea6d6c0 [0x10117ec70]&gt;&#123;contents = \&quot;PingFangSC-Regular\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;&quot;,</div><div class="line">    &quot;&lt;CTRun: 0x7fdb89c3d710&gt;&#123;string range = (2, 3), string = \&quot;\\u672C\\u5B66\\u5427\&quot;, attributes = &lt;CFBasicHash 0x60800026a8c0 [0x10117ec70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x101b3b788 [0x10117ec70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7fdb89c3d3f0&gt;&#123;name = .PingFangSC-Regular, size = 18.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x60000008d570&gt;&#123;attributes = &lt;CFBasicHash 0x600000279140 [0x10117ec70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x101b41908 [0x10117ec70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x101b39be8 [0x10117ec70]&gt;&#123;contents = \&quot;.PingFangSC-Regular\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;&quot;</div><div class="line">)</div><div class="line">2017-02-27 15:12:46.171 CoreTextDemo[11205:345484] Run glyph 个数 3</div><div class="line">2017-02-27 15:12:46.171 CoreTextDemo[11205:345484] run att &#123;</div><div class="line">    NSFont = &quot;&lt;UICTFont: 0x7fdb89c3d3f0&gt; font-family: \&quot;.PingFangSC-Regular\&quot;; font-weight: normal; font-style: normal; font-size: 18.00pt&quot;;</div><div class="line">&#125;</div><div class="line">2017-02-27 15:12:46.172 CoreTextDemo[11205:345484] run status 0</div><div class="line">2017-02-27 15:12:46.172 CoreTextDemo[11205:345484] run glyph   3676</div><div class="line">2017-02-27 15:12:46.172 CoreTextDemo[11205:345484] run point 24.000000 0.000000</div><div class="line">2017-02-27 15:12:46.172 CoreTextDemo[11205:345484] run size 18.342000 0.000000</div><div class="line">2017-02-27 15:12:46.172 CoreTextDemo[11205:345484] run index 2</div><div class="line">2017-02-27 15:12:46.172 CoreTextDemo[11205:345484] run glyph   2573</div><div class="line">2017-02-27 15:12:46.173 CoreTextDemo[11205:345484] run point 42.342000 0.000000</div><div class="line">2017-02-27 15:12:46.173 CoreTextDemo[11205:345484] run size 18.342000 0.000000</div><div class="line">2017-02-27 15:12:46.173 CoreTextDemo[11205:345484] run index 3</div><div class="line">2017-02-27 15:12:46.173 CoreTextDemo[11205:345484] run glyph   1929</div><div class="line">2017-02-27 15:12:46.173 CoreTextDemo[11205:345484] run point 60.684000 0.000000</div><div class="line">2017-02-27 15:12:46.173 CoreTextDemo[11205:345484] run size 18.342000 0.000000</div><div class="line">2017-02-27 15:12:46.255 CoreTextDemo[11205:345484] run index 4</div><div class="line">2017-02-27 15:12:46.255 CoreTextDemo[11205:345484] run glyph 3676 2573</div><div class="line">2017-02-27 15:12:46.256 CoreTextDemo[11205:345484] run glyph point 24.000000 0.000000</div><div class="line">2017-02-27 15:12:46.256 CoreTextDemo[11205:345484] run glyph size 18.342000 0.000000</div><div class="line">2017-02-27 15:12:46.256 CoreTextDemo[11205:345484] run glyph index 2 3</div><div class="line">2017-02-27 15:12:46.256 CoreTextDemo[11205:345484] run string range 2 3</div><div class="line">2017-02-27 15:12:46.256 CoreTextDemo[11205:345484] run ascent 15.480000,descent 2.520000,leading 0.540000</div><div class="line">2017-02-27 15:12:46.257 CoreTextDemo[11205:345484] 不知道能干嘛 run image rect &#123;&#123;19.619999999999997, -1.7459999999999998&#125;, &#123;34.128, 16.631999999999998&#125;&#125;</div><div class="line">2017-02-27 15:12:46.257 CoreTextDemo[11205:345484] run transform [1, 0, 0, 1, 0, 0]</div></pre></td></tr></table></figure>
<p>从run 的api中可以看出，run 是CGGlyph 组成的。CGGlayph可以用来创建字体。</p>
<p><strong>CTRun  CTLine CTFrame CTFrameSetter 这些就可以完成文本的布局了。</strong></p>
<h3 id="CTStringAttributes-h"><a href="#CTStringAttributes-h" class="headerlink" title="CTStringAttributes.h"></a>CTStringAttributes.h</h3><p>完成丰富的布局离不开文本String   下面学习 学习CTStringAttributes</p>
<h4 id="配置富文本的key"><a href="#配置富文本的key" class="headerlink" title="配置富文本的key"></a>配置富文本的key</h4><table>
<thead>
<tr>
<th>key</th>
<th>value</th>
<th>注意事项</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCTFontAttributeName</td>
<td>CTFontRef</td>
<td>配置富文本的字体默认是  Helvetica 12</td>
</tr>
<tr>
<td>kCTForegroundColorFromContextAttributeName</td>
<td>CFBooleanRef</td>
<td>Default is false ，具体想法不清楚</td>
</tr>
<tr>
<td>kCTKernAttributeName</td>
<td>CFNumberRef</td>
<td>字符之间的间隔 默认是 0.0</td>
</tr>
<tr>
<td>kCTLigatureAttributeName</td>
<td>CFNumberRef</td>
<td>默认值是1 ，用法不清楚</td>
</tr>
<tr>
<td>kCTForegroundColorAttributeName</td>
<td>CGColorRef</td>
<td>默认是black  。设置字体颜色</td>
</tr>
<tr>
<td>kCTBackgroundColorAttributeName</td>
<td>CGColorRef</td>
<td>默认透明，背景颜色</td>
</tr>
<tr>
<td>kCTParagraphStyleAttributeName</td>
<td>CTParagraphStyleRef</td>
<td>默认不设置该属性。可以设置例如line 对对齐，写的方向，tab规则等。</td>
</tr>
<tr>
<td>kCTStrokeWidthAttributeName</td>
<td>CFNumberRef</td>
<td>线宽。默认0.0</td>
</tr>
<tr>
<td>kCTStrokeColorAttributeName</td>
<td>CGColorRef</td>
<td>线的颜色。默认是  foreground颜色。没啥变化，有时间再研究</td>
</tr>
<tr>
<td>kCTUnderlineStyleAttributeName</td>
<td>CFNumberRef</td>
<td>下划线  类型有 CTUnderlineStyle</td>
</tr>
<tr>
<td>kCTSuperscriptAttributeName</td>
<td>CFNumberRef</td>
<td>默认是0.上标还是下标。 要 the specified font。具体是啥字体不知道。 -1 下标 1 上标。暂时设置没效果。</td>
</tr>
<tr>
<td>kCTUnderlineColorAttributeName</td>
<td>CGColorRef</td>
<td>默认是foreground 颜色  ，下划线颜色.设置不起总用</td>
</tr>
<tr>
<td>kCTVerticalFormsAttributeName</td>
<td>CFBooleanRef</td>
<td>value   false  horizontal    value  true  vertical</td>
</tr>
<tr>
<td>kCTHorizontalInVerticalFormsAttributeName</td>
<td>CFNumberRef</td>
<td>默认是0. value  是1 to 4  只有设置 kCTVerticalFormsAttributeName才起作用.目前不知道杂用。没效果</td>
</tr>
<tr>
<td>kCTGlyphInfoAttributeName</td>
<td>CTGlyphInfoRef</td>
<td>改value 不知道杂用，暂时过</td>
</tr>
<tr>
<td>kCTCharacterShapeAttributeName</td>
<td>CFNumberRef</td>
<td>9.0 以后才能用 ，暂时value 值不知道咋用</td>
</tr>
<tr>
<td>kCTLanguageAttributeName</td>
<td>CFStringRef</td>
<td>具体value值有哪些。暂时不管。</td>
</tr>
<tr>
<td>kCTRunDelegateAttributeName</td>
<td>CTRunDelegateRef</td>
<td>可以用来图文混拍的东西。替代的每一个cgglyph</td>
</tr>
<tr>
<td>kCTBaselineClassAttributeName</td>
<td>CFStringRef</td>
<td>value 有 kCTBaselineClassRoman， kCTBaselineClassIdeographicCentered， kCTBaselineClassIdeographicLow， kCTBaselineClassIdeographicHigh， kCTBaselineClassHanging， kCTBaselineClassMath，暂时不知道杂用</td>
</tr>
<tr>
<td>kCTBaselineInfoAttributeName</td>
<td>CFDictionaryRef</td>
<td>key  是 value 有 kCTBaselineClassRoman， kCTBaselineClassIdeographicCentered， kCTBaselineClassIdeographicLow， kCTBaselineClassIdeographicHigh， kCTBaselineClassHanging， kCTBaselineClassMath，暂时不知道杂用，不会用</td>
</tr>
<tr>
<td>kCTBaselineReferenceInfoAttributeName</td>
<td>CFDictionaryRef</td>
<td>key  是 value 有 kCTBaselineClassRoman， kCTBaselineClassIdeographicCentered， kCTBaselineClassIdeographicLow， kCTBaselineClassIdeographicHigh， kCTBaselineClassHanging， kCTBaselineClassMath，暂时不知道杂用，不会用</td>
</tr>
<tr>
<td>kCTWritingDirectionAttributeName</td>
<td>CFArray</td>
<td>数组中是 number 。暂时不会用</td>
</tr>
<tr>
<td>kCTRubyAnnotationAttributeName</td>
<td>CTRubyAnnotation</td>
<td>暂时不会用</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div></pre></td><td class="code"><pre><div class="line">-(void)setstring:(NSMutableAttributedString * )beginStr appendString:(CFStringRef )key value:(id)value string:(NSString *)string&#123;</div><div class="line">  NSRange range =   [beginStr.string rangeOfString:string];</div><div class="line">    NSMutableDictionary * dic = [NSMutableDictionary dictionaryWithObject:value forKey:(__bridge NSString *)key];</div><div class="line">    [beginStr setAttributes:dic range:range];</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">-(void)string:(NSMutableAttributedString * )beginStr appendString:(CFStringRef )key value:(id)value string:(NSString *)string&#123;</div><div class="line">    </div><div class="line">    </div><div class="line">    NSMutableAttributedString *nextMabstring = [[NSMutableAttributedString alloc]initWithString:string];</div><div class="line">    </div><div class="line">    NSMutableDictionary * dic = [NSMutableDictionary dictionaryWithObject:value forKey:(__bridge NSString *)key];</div><div class="line">    [nextMabstring setAttributes:dic range:NSMakeRange(0, nextMabstring.length)];</div><div class="line">    [beginStr appendAttributedString:nextMabstring];</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)drawRect:(CGRect)rect&#123;</div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;&quot;];</div><div class="line">    </div><div class="line">    [self string:mabstring appendString:kCTFontAttributeName value:[UIFont systemFontOfSize:24] string:@&quot;kCTFontAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTForegroundColorFromContextAttributeName value:@(YES) string:@&quot;kCTForegroundColorFromContextAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTKernAttributeName value:@(30) string:@&quot;kCTKernAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTLigatureAttributeName value:@(2) string:@&quot;kCTLigatureAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTForegroundColorAttributeName value:(id)([UIColor redColor].CGColor) string:@&quot;kCTForegroundColorAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTBackgroundColorAttributeName value:(id)([UIColor blueColor].CGColor) string:@&quot;kCTBackgroundColorAttributeName&quot;];</div><div class="line">    CTParagraphStyleSetting setting[1] ;</div><div class="line">    CGFloat vale =30;</div><div class="line">    setting[0].spec = kCTParagraphStyleSpecifierLineSpacingAdjustment;</div><div class="line">    setting[0].valueSize =sizeof(CGFloat);</div><div class="line">    setting[0].value = &amp;vale;</div><div class="line">    CTParagraphStyleRef stlye = CTParagraphStyleCreate(setting, 1);</div><div class="line">    [self string:mabstring appendString:kCTParagraphStyleAttributeName value:(id)(stlye) string:@&quot;kCTParagraphStyleAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTStrokeWidthAttributeName value:(id)(@(5)) string:@&quot;kCTStrokeWidthAttributeName&quot;];</div><div class="line">    </div><div class="line">    [self string:mabstring appendString:kCTStrokeColorAttributeName value:(id)([UIColor redColor].CGColor) string:@&quot;kCTStrokeColorAttributeName&quot;];</div><div class="line">    </div><div class="line">    [self string:mabstring appendString:kCTUnderlineStyleAttributeName value:(id)(@(kCTUnderlineStyleDouble)) string:@&quot;kCTUnderlineStyleAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTUnderlineStyleAttributeName value:(id)(@(kCTUnderlineStyleThick)) string:@&quot;kCTUnderlineStyleAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTUnderlineStyleAttributeName value:(id)(@(kCTUnderlineStyleSingle)) string:@&quot;kCTUnderlineStyleAttributeName&quot;];</div><div class="line"></div><div class="line">    [self string:mabstring appendString:kCTSuperscriptAttributeName value:(id)(@(-1)) string:@&quot;kCTSuperscriptAttributeName&quot;];</div><div class="line">    </div><div class="line">    [self string:mabstring appendString:kCTUnderlineStyleAttributeName value:(id)(@(kCTUnderlineStyleSingle)) string:@&quot;kCTUnderlineColorAttributeName&quot;];</div><div class="line">    [self setstring:mabstring appendString:kCTUnderlineColorAttributeName value:(id)([UIColor redColor].CGColor) string:@&quot;kCTUnderlineColorAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTVerticalFormsAttributeName value:(id)(@(YES)) string:@&quot;kCTVerticalFormsAttributeName&quot;];</div><div class="line">    </div><div class="line">        [self string:mabstring appendString:kCTVerticalFormsAttributeName value:(id)(@(YES)) string:@&quot;kCTHorizontalInVerticalFormsAttributeName&quot;];</div><div class="line">//        [self setstring:mabstring appendString:kCTHorizontalInVerticalFormsAttributeName value:(id)(@(3)) string:@&quot;kCTHorizontalInVerticalFormsAttributeName&quot;];</div><div class="line">   </div><div class="line">    </div><div class="line">//    [self string:mabstring appendString:kCTGlyphInfoAttributeName value:(id)([UIColor blueColor].CGColor) string:@&quot;kCTGlyphInfoAttributeName&quot;];</div><div class="line">    </div><div class="line">//    [self string:mabstring appendString:kCTCharacterShapeAttributeName value:(id)(@(3)) string:@&quot;kCTCharacterShapeAttributeName&quot;];</div><div class="line">    </div><div class="line">    </div><div class="line">    </div><div class="line">    [self string:mabstring appendString:kCTLanguageAttributeName value:(id)(@&quot;Helvetica&quot;) string:@&quot;kCTLanguageAttributeName&quot;];</div><div class="line">    </div><div class="line">    </div><div class="line">    </div><div class="line">    CTRunDelegateDeallocateCallback  deallocateCallback= CTRunDelegateDeallocateCallbackFunction;</div><div class="line">    </div><div class="line">    NSLog(@&quot;CTRunDelegateGetAscentCallback 获取ascent&quot;);</div><div class="line">    CTRunDelegateGetAscentCallback ascentCallback= CTRunDelegateGetAscentCallbackFunction;</div><div class="line">    CTRunDelegateGetDescentCallback descentCallback =  CTRunDelegateGetDescentCallbackFunction;</div><div class="line">    </div><div class="line">    CTRunDelegateGetWidthCallback widthCallBack = CTRunDelegateGetWidthCallbackFunction;</div><div class="line">    </div><div class="line">    CTRunDelegateCallbacks callBack ;</div><div class="line">    callBack.version =kCTRunDelegateCurrentVersion;</div><div class="line">    callBack.dealloc = deallocateCallback;</div><div class="line">    callBack.getAscent = ascentCallback;</div><div class="line">    callBack.getDescent = descentCallback;</div><div class="line">    callBack.getWidth = widthCallBack;</div><div class="line">    </div><div class="line">    CTRunDelegateRef delegate=  CTRunDelegateCreate(&amp;callBack, NULL);</div><div class="line">    ///获取delegate值</div><div class="line">    [self string:mabstring appendString:kCTRunDelegateAttributeName value:(__bridge id)(delegate) string:@&quot;kCTRunDelegateAttributeName&quot;];</div><div class="line">    </div><div class="line">    [self string:mabstring appendString:kCTBaselineClassAttributeName value:(id)(kCTBaselineClassRoman) string:@&quot;kCTBaselineClassAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTBaselineClassAttributeName value:(id)(kCTBaselineClassIdeographicCentered) string:@&quot;kCTBaselineClassAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTBaselineClassAttributeName value:(id)(kCTBaselineClassIdeographicLow) string:@&quot;kCTBaselineClassAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTBaselineClassAttributeName value:(id)(kCTBaselineClassIdeographicHigh) string:@&quot;kCTBaselineClassAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTBaselineClassAttributeName value:(id)(kCTBaselineClassHanging) string:@&quot;kCTBaselineClassAttributeName&quot;];</div><div class="line">    [self string:mabstring appendString:kCTBaselineClassAttributeName value:(id)(kCTBaselineClassMath) string:@&quot;kCTBaselineClassAttributeName&quot;];</div><div class="line">    </div><div class="line">    </div><div class="line">    </div><div class="line">//    [self string:mabstring appendString:kCTBaselineInfoAttributeName value:(id)([UIColor blueColor].CGColor) string:@&quot;kCTBaselineInfoAttributeName&quot;];</div><div class="line">    </div><div class="line">    </div><div class="line">    </div><div class="line">//    [self string:mabstring appendString:kCTBaselineReferenceInfoAttributeName value:(id)([UIColor blueColor].CGColor) string:@&quot;kCTBaselineReferenceInfoAttributeName&quot;];</div><div class="line">    </div><div class="line">//    [self string:mabstring appendString:kCTWritingDirectionAttributeName value:(id)([UIColor blueColor].CGColor) string:@&quot;kCTWritingDirectionAttributeName&quot;];</div><div class="line">//    [self string:mabstring appendString:kCTRubyAnnotationAttributeName value:(id)([UIColor blueColor].CGColor) string:@&quot;kCTRubyAnnotationAttributeName&quot;];</div><div class="line">    </div><div class="line">    </div><div class="line">    </div><div class="line"></div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line"></div><div class="line">    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    </div><div class="line">    CGMutablePathRef Path = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-60));</div><div class="line">    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);</div><div class="line">    CTFrameDraw(frame, context);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">void CTRunDelegateDeallocateCallbackFunction (void * refCon )&#123;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">CGFloat CTRunDelegateGetAscentCallbackFunction (void * refCon )&#123;</div><div class="line">    return 30;</div><div class="line">&#125;</div><div class="line"></div><div class="line">CGFloat CTRunDelegateGetDescentCallbackFunction (void * refCon )&#123;</div><div class="line">    return 30;</div><div class="line">&#125;</div><div class="line"></div><div class="line">CGFloat CTRunDelegateGetWidthCallbackFunction(void * refCon )&#123;</div><div class="line">    return 30;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>结果截图</p>
<p><img src="/images/image-11.tiff" alt="image"></p>
<p>这个类就是 attString 配置类。</p>
<h4 id="下面就是上面难点和不太清楚的地方攻关"><a href="#下面就是上面难点和不太清楚的地方攻关" class="headerlink" title="下面就是上面难点和不太清楚的地方攻关"></a>下面就是上面难点和不太清楚的地方攻关</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">kCTForegroundColorFromContextAttributeName  这个开关是关于是否用context 颜色来填充</div><div class="line">要是yes的话，kCTUnderlineStyleAttributeName 属性将失去效果。</div><div class="line"></div><div class="line"></div><div class="line">-(void)drawRect:(CGRect)rect&#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetRGBStrokeColor(context, 0, 1, 0, 1);</div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;kCTForegroundColorFromContextAttributeName&quot;];</div><div class="line">    </div><div class="line">    NSMutableDictionary * dic = [NSMutableDictionary dictionaryWithObject:(id)(@(YES)) forKey:(__bridge NSString *)kCTForegroundColorFromContextAttributeName];</div><div class="line">    [dic setObject:(id)([UIColor redColor].CGColor) forKey:(__bridge NSString *)kCTUnderlineColorAttributeName];</div><div class="line">    [dic setObject:(id)(@(kCTUnderlineStyleSingle)) forKey:(__bridge NSString *)kCTUnderlineStyleAttributeName];</div><div class="line">    </div><div class="line">    [mabstring setAttributes:dic range:NSMakeRange(0, mabstring.length)];</div><div class="line">    </div><div class="line">    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    </div><div class="line">    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    </div><div class="line">    CGMutablePathRef Path = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-60));</div><div class="line">    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);</div><div class="line">    CTFrameDraw(frame, context);</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果  <img src="/images/image-12.tiff" alt="image"></p>
<p>同时设置CGContextRef 颜色 和 kCTUnderlineStyleAttributeName 属性值，而其动作用的是CGContextRef颜色。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTLigatureAttributeName  连体字  没发现可用的字体</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTSuperscriptAttributeName  上标和下标 没看出效果</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">kCTUnderlineColorAttributeName  这个可以被 kCTForegroundColorFromContextAttributeName 属性影响， 要是该属性设置为yes  那么该属性就失效了</div><div class="line"></div><div class="line">补充： 下划线的还可以设置成一下样式：</div><div class="line"></div><div class="line">-(void)drawRect:(CGRect)rect&#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetRGBStrokeColor(context, 0, 1, 0, 1);</div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;&quot;];</div><div class="line"></div><div class="line">    [self string:mabstring appendString:kCTUnderlineStyleAttributeName value:(id)(@(kCTUnderlineStyleDouble|kCTUnderlinePatternSolid)) string:@&quot;\nkCTUnderlineStyleAttributeName&quot;];    [self string:mabstring appendString:kCTUnderlineStyleAttributeName value:(id)(@(kCTUnderlineStyleDouble|kCTUnderlinePatternDot)) string:@&quot;\nkCTUnderlineStyleAttributeName&quot;];    [self string:mabstring appendString:kCTUnderlineStyleAttributeName value:(id)(@(kCTUnderlineStyleDouble|kCTUnderlinePatternDash)) string:@&quot;\nkCTUnderlineStyleAttributeName&quot;];    [self string:mabstring appendString:kCTUnderlineStyleAttributeName value:(id)(@(kCTUnderlineStyleDouble|kCTUnderlinePatternDashDot)) string:@&quot;\nkCTUnderlineStyleAttributeName&quot;];    [self string:mabstring appendString:kCTUnderlineStyleAttributeName value:(id)(@(kCTUnderlineStyleDouble|kCTUnderlinePatternDashDotDot)) string:@&quot;\nkCTUnderlineStyleAttributeName&quot;];</div><div class="line"></div><div class="line">    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    </div><div class="line">    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    </div><div class="line">    CGMutablePathRef Path = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-60));</div><div class="line">    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);</div><div class="line">    CTFrameDraw(frame, context);</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果图：<img src="/images/image-13.tiff" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTHorizontalInVerticalFormsAttributeName   暂时不知道有啥用</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTGlyphInfoAttributeName  这个具体用法要看CTGlyphInfo.h</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTCharacterShapeAttributeName  9.0 以后被废弃了。不研究</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTLanguageAttributeName   暂时不知道干嘛用</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTBaselineClassAttributeName  没研究</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTBaselineInfoAttributeName 没研究</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTBaselineReferenceInfoAttributeName  没研究</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">kCTWritingDirectionAttributeName  没研究</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">kCTRubyAnnotationAttributeName   类似汉语拼音的注音</div><div class="line"></div><div class="line">-(void)drawRect:(CGRect)rect&#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetRGBStrokeColor(context, 0, 1, 0, 1);</div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;kCTRubyAnnotationAttributeName&quot;];</div><div class="line">    CTRubyAnnotationRef rubyAnnotation =CTRubyAnnotationCreateWithAttributes(0, 0, 0, (__bridge CFStringRef)@&quot;nihoa&quot;, NULL);</div><div class="line">    NSMutableDictionary * dic = [NSMutableDictionary dictionaryWithObject:(__bridge id)(rubyAnnotation) forKey:(__bridge NSString *)kCTRubyAnnotationAttributeName];</div><div class="line">    [mabstring setAttributes:dic range:NSMakeRange(0, mabstring.length)];</div><div class="line">    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">    CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    </div><div class="line">    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    </div><div class="line">    CGMutablePathRef Path = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-60));</div><div class="line">    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);</div><div class="line">    CTFrameDraw(frame, context);</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果如下:</p>
<p><img src="/images/image-14.tiff" alt="image"></p>
<h3 id="CTFontManager-h"><a href="#CTFontManager-h" class="headerlink" title="CTFontManager.h"></a>CTFontManager.h</h3><p>这个类是字体的管理者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CTRegisterBundleFonts  这个key 如果在application bundle info dictionary 设置为yes  。CTFontManager 将该bundle的所有子文件夹的字体都注册。  运用场景不明。有待学完回来在重新测试。</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div></pre></td><td class="code"><pre><div class="line">CFArrayRef CTFontManagerCopyAvailablePostScriptNames( void ) CT_AVAILABLE(10_6, 10_0);  翻译所有的postScript Names </div><div class="line"></div><div class="line">所有的字体</div><div class="line">(</div><div class="line">    &quot;.AlNilePUA&quot;,</div><div class="line">    &quot;.AlNilePUA-Bold&quot;,</div><div class="line">    &quot;.AppleColorEmojiUI&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoI-Bold&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoI-Light&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoI-Medium&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoI-Regular&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoI-SemiBold&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoI-Thin&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoI-UltraLight&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoW-Bold&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoW-Light&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoW-Medium&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoW-Regular&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoW-SemiBold&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoW-Thin&quot;,</div><div class="line">    &quot;.AppleSDGothicNeoW-UltraLight&quot;,</div><div class="line">    &quot;.DamascusPUA&quot;,</div><div class="line">    &quot;.DamascusPUABold&quot;,</div><div class="line">    &quot;.DamascusPUALight&quot;,</div><div class="line">    &quot;.DamascusPUAMedium&quot;,</div><div class="line">    &quot;.DamascusPUASemiBold&quot;,</div><div class="line">    &quot;.FarahPUA&quot;,</div><div class="line">    &quot;.GeezaProInterface&quot;,</div><div class="line">    &quot;.GeezaProInterface-Bold&quot;,</div><div class="line">    &quot;.GeezaProInterface-Light&quot;,</div><div class="line">    &quot;.GeezaProPUA-Bold&quot;,</div><div class="line">    &quot;.GeezaProPUA-Regular&quot;,</div><div class="line">    &quot;.HelveticaLight&quot;,</div><div class="line">    &quot;.HelveticaLight-Oblique&quot;,</div><div class="line">    &quot;.HelveticaNeueATV&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-Bold&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-BoldItalic&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-Heavy&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-Italic&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-ItalicM3&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-Light&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-M3&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-MediumItalicP4&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-MediumP4&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-Regular&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-Thin&quot;,</div><div class="line">    &quot;.HelveticaNeueInterface-UltraLightP2&quot;,</div><div class="line">    &quot;.HelveticaNeueUI&quot;,</div><div class="line">    &quot;.HelveticaNeueUI-Bold&quot;,</div><div class="line">    &quot;.HelveticaNeueUI-BoldItalic&quot;,</div><div class="line">    &quot;.HelveticaNeueUI-Italic&quot;,</div><div class="line">    &quot;.HiraKakuInterface-W1&quot;,</div><div class="line">    &quot;.HiraKakuInterface-W2&quot;,</div><div class="line">    &quot;.HiraKakuInterface-W3&quot;,</div><div class="line">    &quot;.HiraKakuInterface-W6&quot;,</div><div class="line">    &quot;.HiraKakuInterfaceWatch-W1&quot;,</div><div class="line">    &quot;.HiraKakuInterfaceWatch-W2&quot;,</div><div class="line">    &quot;.HiraKakuInterfaceWatch-W3&quot;,</div><div class="line">    &quot;.HiraKakuInterfaceWatch-W6&quot;,</div><div class="line">    &quot;.Keycaps-Keys&quot;,</div><div class="line">    &quot;.Keycaps-Light&quot;,</div><div class="line">    &quot;.Keycaps-Popups&quot;,</div><div class="line">    &quot;.Keycaps-Thin&quot;,</div><div class="line">    &quot;.KeycapsA-Keys&quot;,</div><div class="line">    &quot;.KeycapsA-Popups&quot;,</div><div class="line">    &quot;.KeycapsB-Keys&quot;,</div><div class="line">    &quot;.KeycapsB-Popups&quot;,</div><div class="line">    &quot;.KeycapsPad-Keys&quot;,</div><div class="line">    &quot;.KeycapsPad-Light&quot;,</div><div class="line">    &quot;.KeycapsPadA-Keys&quot;,</div><div class="line">    &quot;.PhoneFallback&quot;,</div><div class="line">    &quot;.PhoneKeyCaps&quot;,</div><div class="line">    &quot;.PhoneKeyCapsThree&quot;,</div><div class="line">    &quot;.PingFangHK-Light&quot;,</div><div class="line">    &quot;.PingFangHK-Medium&quot;,</div><div class="line">    &quot;.PingFangHK-Regular&quot;,</div><div class="line">    &quot;.PingFangHK-Semibold&quot;,</div><div class="line">    &quot;.PingFangHK-Thin&quot;,</div><div class="line">    &quot;.PingFangHK-Ultralight&quot;,</div><div class="line">    &quot;.PingFangSC-Light&quot;,</div><div class="line">    &quot;.PingFangSC-Medium&quot;,</div><div class="line">    &quot;.PingFangSC-Regular&quot;,</div><div class="line">    &quot;.PingFangSC-Semibold&quot;,</div><div class="line">    &quot;.PingFangSC-Thin&quot;,</div><div class="line">    &quot;.PingFangSC-Ultralight&quot;,</div><div class="line">    &quot;.PingFangTC-Light&quot;,</div><div class="line">    &quot;.PingFangTC-Medium&quot;,</div><div class="line">    &quot;.PingFangTC-Regular&quot;,</div><div class="line">    &quot;.PingFangTC-Semibold&quot;,</div><div class="line">    &quot;.PingFangTC-Thin&quot;,</div><div class="line">    &quot;.PingFangTC-Ultralight&quot;,</div><div class="line">    &quot;.SFCompactDisplay-Black&quot;,</div><div class="line">    &quot;.SFCompactDisplay-Bold&quot;,</div><div class="line">    &quot;.SFCompactDisplay-Heavy&quot;,</div><div class="line">    &quot;.SFCompactDisplay-Light&quot;,</div><div class="line">    &quot;.SFCompactDisplay-Medium&quot;,</div><div class="line">    &quot;.SFCompactDisplay-Regular&quot;,</div><div class="line">    &quot;.SFCompactDisplay-Semibold&quot;,</div><div class="line">    &quot;.SFCompactDisplay-Thin&quot;,</div><div class="line">    &quot;.SFCompactDisplay-Ultralight&quot;,</div><div class="line">    &quot;.SFCompactRounded-Black&quot;,</div><div class="line">    &quot;.SFCompactRounded-Bold&quot;,</div><div class="line">    &quot;.SFCompactRounded-Heavy&quot;,</div><div class="line">    &quot;.SFCompactRounded-Light&quot;,</div><div class="line">    &quot;.SFCompactRounded-Medium&quot;,</div><div class="line">    &quot;.SFCompactRounded-Regular&quot;,</div><div class="line">    &quot;.SFCompactRounded-Semibold&quot;,</div><div class="line">    &quot;.SFCompactRounded-Thin&quot;,</div><div class="line">    &quot;.SFCompactRounded-Ultralight&quot;,</div><div class="line">    &quot;.SFCompactText-Bold&quot;,</div><div class="line">    &quot;.SFCompactText-BoldG1&quot;,</div><div class="line">    &quot;.SFCompactText-BoldG2&quot;,</div><div class="line">    &quot;.SFCompactText-BoldG3&quot;,</div><div class="line">    &quot;.SFCompactText-BoldItalic&quot;,</div><div class="line">    &quot;.SFCompactText-BoldItalicG1&quot;,</div><div class="line">    &quot;.SFCompactText-BoldItalicG2&quot;,</div><div class="line">    &quot;.SFCompactText-BoldItalicG3&quot;,</div><div class="line">    &quot;.SFCompactText-Heavy&quot;,</div><div class="line">    &quot;.SFCompactText-HeavyItalic&quot;,</div><div class="line">    &quot;.SFCompactText-Italic&quot;,</div><div class="line">    &quot;.SFCompactText-ItalicG1&quot;,</div><div class="line">    &quot;.SFCompactText-ItalicG2&quot;,</div><div class="line">    &quot;.SFCompactText-ItalicG3&quot;,</div><div class="line">    &quot;.SFCompactText-Light&quot;,</div><div class="line">    &quot;.SFCompactText-LightItalic&quot;,</div><div class="line">    &quot;.SFCompactText-Medium&quot;,</div><div class="line">    &quot;.SFCompactText-MediumItalic&quot;,</div><div class="line">    &quot;.SFCompactText-Regular&quot;,</div><div class="line">    &quot;.SFCompactText-RegularG1&quot;,</div><div class="line">    &quot;.SFCompactText-RegularG2&quot;,</div><div class="line">    &quot;.SFCompactText-RegularG3&quot;,</div><div class="line">    &quot;.SFCompactText-Semibold&quot;,</div><div class="line">    &quot;.SFCompactText-SemiboldItalic&quot;,</div><div class="line">    &quot;.SFUIDisplay&quot;,</div><div class="line">    &quot;.SFUIDisplay-Black&quot;,</div><div class="line">    &quot;.SFUIDisplay-Bold&quot;,</div><div class="line">    &quot;.SFUIDisplay-Heavy&quot;,</div><div class="line">    &quot;.SFUIDisplay-Light&quot;,</div><div class="line">    &quot;.SFUIDisplay-Medium&quot;,</div><div class="line">    &quot;.SFUIDisplay-Semibold&quot;,</div><div class="line">    &quot;.SFUIDisplay-Thin&quot;,</div><div class="line">    &quot;.SFUIDisplay-Ultralight&quot;,</div><div class="line">    &quot;.SFUIDisplayCondensed-Black&quot;,</div><div class="line">    &quot;.SFUIDisplayCondensed-Bold&quot;,</div><div class="line">    &quot;.SFUIDisplayCondensed-Heavy&quot;,</div><div class="line">    &quot;.SFUIDisplayCondensed-Light&quot;,</div><div class="line">    &quot;.SFUIDisplayCondensed-Medium&quot;,</div><div class="line">    &quot;.SFUIDisplayCondensed-Regular&quot;,</div><div class="line">    &quot;.SFUIDisplayCondensed-Semibold&quot;,</div><div class="line">    &quot;.SFUIDisplayCondensed-Thin&quot;,</div><div class="line">    &quot;.SFUIDisplayCondensed-Ultralight&quot;,</div><div class="line">    &quot;.SFUIText&quot;,</div><div class="line">    &quot;.SFUIText-Bold&quot;,</div><div class="line">    &quot;.SFUIText-BoldG1&quot;,</div><div class="line">    &quot;.SFUIText-BoldG2&quot;,</div><div class="line">    &quot;.SFUIText-BoldG3&quot;,</div><div class="line">    &quot;.SFUIText-BoldItalic&quot;,</div><div class="line">    &quot;.SFUIText-BoldItalicG1&quot;,</div><div class="line">    &quot;.SFUIText-BoldItalicG2&quot;,</div><div class="line">    &quot;.SFUIText-BoldItalicG3&quot;,</div><div class="line">    &quot;.SFUIText-Heavy&quot;,</div><div class="line">    &quot;.SFUIText-HeavyItalic&quot;,</div><div class="line">    &quot;.SFUIText-Italic&quot;,</div><div class="line">    &quot;.SFUIText-ItalicG1&quot;,</div><div class="line">    &quot;.SFUIText-ItalicG2&quot;,</div><div class="line">    &quot;.SFUIText-ItalicG3&quot;,</div><div class="line">    &quot;.SFUIText-Light&quot;,</div><div class="line">    &quot;.SFUIText-LightItalic&quot;,</div><div class="line">    &quot;.SFUIText-Medium&quot;,</div><div class="line">    &quot;.SFUIText-MediumItalic&quot;,</div><div class="line">    &quot;.SFUIText-RegularG1&quot;,</div><div class="line">    &quot;.SFUIText-RegularG2&quot;,</div><div class="line">    &quot;.SFUIText-RegularG3&quot;,</div><div class="line">    &quot;.SFUIText-Semibold&quot;,</div><div class="line">    &quot;.SFUIText-SemiboldItalic&quot;,</div><div class="line">    &quot;.SFUITextCondensed-Bold&quot;,</div><div class="line">    &quot;.SFUITextCondensed-Heavy&quot;,</div><div class="line">    &quot;.SFUITextCondensed-Light&quot;,</div><div class="line">    &quot;.SFUITextCondensed-Medium&quot;,</div><div class="line">    &quot;.SFUITextCondensed-Regular&quot;,</div><div class="line">    &quot;.SFUITextCondensed-Semibold&quot;,</div><div class="line">    &quot;.SavoyeLetPlainCC&quot;,</div><div class="line">    &quot;.SukhumvitSetUI-Bold&quot;,</div><div class="line">    &quot;.SukhumvitSetUI-Light&quot;,</div><div class="line">    &quot;.SukhumvitSetUI-Medium&quot;,</div><div class="line">    AcademyEngravedLetPlain,</div><div class="line">    AlNile,</div><div class="line">    &quot;AlNile-Bold&quot;,</div><div class="line">    AmericanTypewriter,</div><div class="line">    &quot;AmericanTypewriter-Bold&quot;,</div><div class="line">    &quot;AmericanTypewriter-Condensed&quot;,</div><div class="line">    &quot;AmericanTypewriter-CondensedBold&quot;,</div><div class="line">    &quot;AmericanTypewriter-CondensedLight&quot;,</div><div class="line">    &quot;AmericanTypewriter-Light&quot;,</div><div class="line">    &quot;AmericanTypewriter-Semibold&quot;,</div><div class="line">    AppleColorEmoji,</div><div class="line">    AppleGothic,</div><div class="line">    &quot;AppleSDGothicNeo-Bold&quot;,</div><div class="line">    &quot;AppleSDGothicNeo-Light&quot;,</div><div class="line">    &quot;AppleSDGothicNeo-Medium&quot;,</div><div class="line">    &quot;AppleSDGothicNeo-Regular&quot;,</div><div class="line">    &quot;AppleSDGothicNeo-SemiBold&quot;,</div><div class="line">    &quot;AppleSDGothicNeo-Thin&quot;,</div><div class="line">    &quot;AppleSDGothicNeo-UltraLight&quot;,</div><div class="line">    &quot;Arial-BoldItalicMT&quot;,</div><div class="line">    &quot;Arial-BoldMT&quot;,</div><div class="line">    &quot;Arial-ItalicMT&quot;,</div><div class="line">    ArialHebrew,</div><div class="line">    &quot;ArialHebrew-Bold&quot;,</div><div class="line">    &quot;ArialHebrew-Light&quot;,</div><div class="line">    ArialMT,</div><div class="line">    ArialRoundedMTBold,</div><div class="line">    &quot;Asphalt-Medium&quot;,</div><div class="line">    &quot;Athelas-Bold&quot;,</div><div class="line">    &quot;Athelas-BoldItalic&quot;,</div><div class="line">    &quot;Athelas-Italic&quot;,</div><div class="line">    &quot;Athelas-Regular&quot;,</div><div class="line">    &quot;Avenir-Black&quot;,</div><div class="line">    &quot;Avenir-BlackOblique&quot;,</div><div class="line">    &quot;Avenir-Book&quot;,</div><div class="line">    &quot;Avenir-BookOblique&quot;,</div><div class="line">    &quot;Avenir-Heavy&quot;,</div><div class="line">    &quot;Avenir-HeavyOblique&quot;,</div><div class="line">    &quot;Avenir-Light&quot;,</div><div class="line">    &quot;Avenir-LightOblique&quot;,</div><div class="line">    &quot;Avenir-Medium&quot;,</div><div class="line">    &quot;Avenir-MediumOblique&quot;,</div><div class="line">    &quot;Avenir-Oblique&quot;,</div><div class="line">    &quot;Avenir-Roman&quot;,</div><div class="line">    &quot;AvenirNext-Bold&quot;,</div><div class="line">    &quot;AvenirNext-BoldItalic&quot;,</div><div class="line">    &quot;AvenirNext-DemiBold&quot;,</div><div class="line">    &quot;AvenirNext-DemiBoldItalic&quot;,</div><div class="line">    &quot;AvenirNext-Heavy&quot;,</div><div class="line">    &quot;AvenirNext-HeavyItalic&quot;,</div><div class="line">    &quot;AvenirNext-Italic&quot;,</div><div class="line">    &quot;AvenirNext-Medium&quot;,</div><div class="line">    &quot;AvenirNext-MediumItalic&quot;,</div><div class="line">    &quot;AvenirNext-Regular&quot;,</div><div class="line">    &quot;AvenirNext-UltraLight&quot;,</div><div class="line">    &quot;AvenirNext-UltraLightItalic&quot;,</div><div class="line">    &quot;AvenirNextCondensed-Bold&quot;,</div><div class="line">    &quot;AvenirNextCondensed-BoldItalic&quot;,</div><div class="line">    &quot;AvenirNextCondensed-DemiBold&quot;,</div><div class="line">    &quot;AvenirNextCondensed-DemiBoldItalic&quot;,</div><div class="line">    &quot;AvenirNextCondensed-Heavy&quot;,</div><div class="line">    &quot;AvenirNextCondensed-HeavyItalic&quot;,</div><div class="line">    &quot;AvenirNextCondensed-Italic&quot;,</div><div class="line">    &quot;AvenirNextCondensed-Medium&quot;,</div><div class="line">    &quot;AvenirNextCondensed-MediumItalic&quot;,</div><div class="line">    &quot;AvenirNextCondensed-Regular&quot;,</div><div class="line">    &quot;AvenirNextCondensed-UltraLight&quot;,</div><div class="line">    &quot;AvenirNextCondensed-UltraLightItalic&quot;,</div><div class="line">    &quot;Balega-Regular&quot;,</div><div class="line">    Baskerville,</div><div class="line">    &quot;Baskerville-Bold&quot;,</div><div class="line">    &quot;Baskerville-BoldItalic&quot;,</div><div class="line">    &quot;Baskerville-Italic&quot;,</div><div class="line">    &quot;Baskerville-SemiBold&quot;,</div><div class="line">    &quot;Baskerville-SemiBoldItalic&quot;,</div><div class="line">    BebasNeue,</div><div class="line">    BodoniOrnamentsITCTT,</div><div class="line">    &quot;BodoniSvtyTwoITCTT-Bold&quot;,</div><div class="line">    &quot;BodoniSvtyTwoITCTT-Book&quot;,</div><div class="line">    &quot;BodoniSvtyTwoITCTT-BookIta&quot;,</div><div class="line">    &quot;BodoniSvtyTwoOSITCTT-Bold&quot;,</div><div class="line">    &quot;BodoniSvtyTwoOSITCTT-Book&quot;,</div><div class="line">    &quot;BodoniSvtyTwoOSITCTT-BookIt&quot;,</div><div class="line">    &quot;BodoniSvtyTwoSCITCTT-Book&quot;,</div><div class="line">    &quot;BradleyHandITCTT-Bold&quot;,</div><div class="line">    &quot;ChalkboardSE-Bold&quot;,</div><div class="line">    &quot;ChalkboardSE-Light&quot;,</div><div class="line">    &quot;ChalkboardSE-Regular&quot;,</div><div class="line">    Chalkduster,</div><div class="line">    &quot;Charter-Black&quot;,</div><div class="line">    &quot;Charter-BlackItalic&quot;,</div><div class="line">    &quot;Charter-Bold&quot;,</div><div class="line">    &quot;Charter-BoldItalic&quot;,</div><div class="line">    &quot;Charter-Italic&quot;,</div><div class="line">    &quot;Charter-Roman&quot;,</div><div class="line">    Cochin,</div><div class="line">    &quot;Cochin-Bold&quot;,</div><div class="line">    &quot;Cochin-BoldItalic&quot;,</div><div class="line">    &quot;Cochin-Italic&quot;,</div><div class="line">    Copperplate,</div><div class="line">    &quot;Copperplate-Bold&quot;,</div><div class="line">    &quot;Copperplate-Light&quot;,</div><div class="line">    Courier,</div><div class="line">    &quot;Courier-Bold&quot;,</div><div class="line">    &quot;Courier-BoldOblique&quot;,</div><div class="line">    &quot;Courier-Oblique&quot;,</div><div class="line">    &quot;CourierNewPS-BoldItalicMT&quot;,</div><div class="line">    &quot;CourierNewPS-BoldMT&quot;,</div><div class="line">    &quot;CourierNewPS-ItalicMT&quot;,</div><div class="line">    CourierNewPSMT,</div><div class="line">    DBLCDTempBlack,</div><div class="line">    &quot;DINAlternate-Bold&quot;,</div><div class="line">    &quot;DINCondensed-Bold&quot;,</div><div class="line">    Damascus,</div><div class="line">    DamascusBold,</div><div class="line">    DamascusLight,</div><div class="line">    DamascusMedium,</div><div class="line">    DamascusSemiBold,</div><div class="line">    &quot;DearJoeFour-SmallSemibold&quot;,</div><div class="line">    DevanagariSangamMN,</div><div class="line">    &quot;DevanagariSangamMN-Bold&quot;,</div><div class="line">    Didot,</div><div class="line">    &quot;Didot-Bold&quot;,</div><div class="line">    &quot;Didot-Italic&quot;,</div><div class="line">    DiwanMishafi,</div><div class="line">    &quot;Druk-HeavyItalic&quot;,</div><div class="line">    EuphemiaUCAS,</div><div class="line">    &quot;EuphemiaUCAS-Bold&quot;,</div><div class="line">    &quot;EuphemiaUCAS-Italic&quot;,</div><div class="line">    &quot;FaktSlabStencilPro-Medium&quot;,</div><div class="line">    Farah,</div><div class="line">    &quot;Futura-Bold&quot;,</div><div class="line">    &quot;Futura-CondensedExtraBold&quot;,</div><div class="line">    &quot;Futura-CondensedMedium&quot;,</div><div class="line">    &quot;Futura-Medium&quot;,</div><div class="line">    &quot;Futura-MediumItalic&quot;,</div><div class="line">    GeezaPro,</div><div class="line">    &quot;GeezaPro-Bold&quot;,</div><div class="line">    Georgia,</div><div class="line">    &quot;Georgia-Bold&quot;,</div><div class="line">    &quot;Georgia-BoldItalic&quot;,</div><div class="line">    &quot;Georgia-Italic&quot;,</div><div class="line">    GillSans,</div><div class="line">    &quot;GillSans-Bold&quot;,</div><div class="line">    &quot;GillSans-BoldItalic&quot;,</div><div class="line">    &quot;GillSans-Italic&quot;,</div><div class="line">    &quot;GillSans-Light&quot;,</div><div class="line">    &quot;GillSans-LightItalic&quot;,</div><div class="line">    &quot;GillSans-SemiBold&quot;,</div><div class="line">    &quot;GillSans-SemiBoldItalic&quot;,</div><div class="line">    &quot;GillSans-UltraBold&quot;,</div><div class="line">    GujaratiSangamMN,</div><div class="line">    &quot;GujaratiSangamMN-Bold&quot;,</div><div class="line">    GurmukhiMN,</div><div class="line">    &quot;GurmukhiMN-Bold&quot;,</div><div class="line">    Helvetica,</div><div class="line">    &quot;Helvetica-Bold&quot;,</div><div class="line">    &quot;Helvetica-BoldOblique&quot;,</div><div class="line">    &quot;Helvetica-Light&quot;,</div><div class="line">    &quot;Helvetica-LightOblique&quot;,</div><div class="line">    &quot;Helvetica-Oblique&quot;,</div><div class="line">    HelveticaLTMM,</div><div class="line">    HelveticaNeue,</div><div class="line">    &quot;HelveticaNeue-Bold&quot;,</div><div class="line">    &quot;HelveticaNeue-BoldItalic&quot;,</div><div class="line">    &quot;HelveticaNeue-CondensedBlack&quot;,</div><div class="line">    &quot;HelveticaNeue-CondensedBold&quot;,</div><div class="line">    &quot;HelveticaNeue-Italic&quot;,</div><div class="line">    &quot;HelveticaNeue-Light&quot;,</div><div class="line">    &quot;HelveticaNeue-LightItalic&quot;,</div><div class="line">    &quot;HelveticaNeue-Medium&quot;,</div><div class="line">    &quot;HelveticaNeue-MediumItalic&quot;,</div><div class="line">    &quot;HelveticaNeue-Thin&quot;,</div><div class="line">    &quot;HelveticaNeue-ThinItalic&quot;,</div><div class="line">    &quot;HelveticaNeue-UltraLight&quot;,</div><div class="line">    &quot;HelveticaNeue-UltraLightItalic&quot;,</div><div class="line">    &quot;HiraKakuProN-W3&quot;,</div><div class="line">    &quot;HiraKakuProN-W6&quot;,</div><div class="line">    &quot;HiraMinProN-W3&quot;,</div><div class="line">    &quot;HiraMinProN-W6&quot;,</div><div class="line">    &quot;HiraginoSans-W3&quot;,</div><div class="line">    &quot;HiraginoSans-W6&quot;,</div><div class="line">    &quot;HoeflerText-Black&quot;,</div><div class="line">    &quot;HoeflerText-BlackItalic&quot;,</div><div class="line">    &quot;HoeflerText-Italic&quot;,</div><div class="line">    &quot;HoeflerText-Regular&quot;,</div><div class="line">    &quot;IowanOldStyle-Bold&quot;,</div><div class="line">    &quot;IowanOldStyle-BoldItalic&quot;,</div><div class="line">    &quot;IowanOldStyle-Italic&quot;,</div><div class="line">    &quot;IowanOldStyle-Roman&quot;,</div><div class="line">    &quot;JournalSansNew-Inline&quot;,</div><div class="line">    Kailasa,</div><div class="line">    &quot;Kailasa-Bold&quot;,</div><div class="line">    KannadaSangamMN,</div><div class="line">    &quot;KannadaSangamMN-Bold&quot;,</div><div class="line">    KhmerSangamMN,</div><div class="line">    &quot;KohinoorBangla-Light&quot;,</div><div class="line">    &quot;KohinoorBangla-Regular&quot;,</div><div class="line">    &quot;KohinoorBangla-Semibold&quot;,</div><div class="line">    &quot;KohinoorDevanagari-Light&quot;,</div><div class="line">    &quot;KohinoorDevanagari-Regular&quot;,</div><div class="line">    &quot;KohinoorDevanagari-Semibold&quot;,</div><div class="line">    &quot;KohinoorTelugu-Light&quot;,</div><div class="line">    &quot;KohinoorTelugu-Medium&quot;,</div><div class="line">    &quot;KohinoorTelugu-Regular&quot;,</div><div class="line">    LaoSangamMN,</div><div class="line">    LastResort,</div><div class="line">    &quot;LockClock-Light&quot;,</div><div class="line">    MalayalamSangamMN,</div><div class="line">    &quot;MalayalamSangamMN-Bold&quot;,</div><div class="line">    &quot;Marion-Bold&quot;,</div><div class="line">    &quot;Marion-Italic&quot;,</div><div class="line">    &quot;Marion-Regular&quot;,</div><div class="line">    &quot;MarkerFelt-Thin&quot;,</div><div class="line">    &quot;MarkerFelt-Wide&quot;,</div><div class="line">    &quot;Menlo-Bold&quot;,</div><div class="line">    &quot;Menlo-BoldItalic&quot;,</div><div class="line">    &quot;Menlo-Italic&quot;,</div><div class="line">    &quot;Menlo-Regular&quot;,</div><div class="line">    MyanmarSangamMN,</div><div class="line">    &quot;MyanmarSangamMN-Bold&quot;,</div><div class="line">    &quot;Noteworthy-Bold&quot;,</div><div class="line">    &quot;Noteworthy-Light&quot;,</div><div class="line">    NotoSansAvestan,</div><div class="line">    NotoSansBalinese,</div><div class="line">    NotoSansBamum,</div><div class="line">    NotoSansBatak,</div><div class="line">    NotoSansBrahmi,</div><div class="line">    NotoSansBuginese,</div><div class="line">    NotoSansBuhid,</div><div class="line">    NotoSansCarian,</div><div class="line">    NotoSansCham,</div><div class="line">    NotoSansCoptic,</div><div class="line">    NotoSansCuneiform,</div><div class="line">    NotoSansCypriot,</div><div class="line">    NotoSansEgyptianHieroglyphs,</div><div class="line">    NotoSansGlagolitic,</div><div class="line">    NotoSansGothic,</div><div class="line">    NotoSansHanunoo,</div><div class="line">    NotoSansImperialAramaic,</div><div class="line">    NotoSansInscriptionalPahlavi,</div><div class="line">    NotoSansInscriptionalParthian,</div><div class="line">    NotoSansJavanese,</div><div class="line">    NotoSansKaithi,</div><div class="line">    NotoSansKayahLi,</div><div class="line">    NotoSansKharoshthi,</div><div class="line">    NotoSansLepcha,</div><div class="line">    NotoSansLimbu,</div><div class="line">    NotoSansLinearB,</div><div class="line">    NotoSansLisu,</div><div class="line">    NotoSansLycian,</div><div class="line">    NotoSansLydian,</div><div class="line">    NotoSansMandaic,</div><div class="line">    NotoSansMeeteiMayek,</div><div class="line">    NotoSansMongolian,</div><div class="line">    NotoSansNKo,</div><div class="line">    NotoSansNewTaiLue,</div><div class="line">    NotoSansOgham,</div><div class="line">    NotoSansOlChiki,</div><div class="line">    NotoSansOldItalic,</div><div class="line">    NotoSansOldPersian,</div><div class="line">    NotoSansOldSouthArabian,</div><div class="line">    NotoSansOldTurkic,</div><div class="line">    NotoSansOsmanya,</div><div class="line">    NotoSansPhagsPa,</div><div class="line">    NotoSansPhoenician,</div><div class="line">    NotoSansRejang,</div><div class="line">    NotoSansRunic,</div><div class="line">    NotoSansSamaritan,</div><div class="line">    NotoSansSaurashtra,</div><div class="line">    NotoSansShavian,</div><div class="line">    NotoSansSundanese,</div><div class="line">    NotoSansSylotiNagri,</div><div class="line">    NotoSansSyriacEastern,</div><div class="line">    NotoSansTagalog,</div><div class="line">    NotoSansTagbanwa,</div><div class="line">    NotoSansTaiLe,</div><div class="line">    NotoSansTaiTham,</div><div class="line">    NotoSansTaiViet,</div><div class="line">    NotoSansThaana,</div><div class="line">    NotoSansTifinagh,</div><div class="line">    NotoSansUgaritic,</div><div class="line">    NotoSansVai,</div><div class="line">    NotoSansYi,</div><div class="line">    &quot;Optima-Bold&quot;,</div><div class="line">    &quot;Optima-BoldItalic&quot;,</div><div class="line">    &quot;Optima-ExtraBlack&quot;,</div><div class="line">    &quot;Optima-Italic&quot;,</div><div class="line">    &quot;Optima-Regular&quot;,</div><div class="line">    OriyaSangamMN,</div><div class="line">    &quot;OriyaSangamMN-Bold&quot;,</div><div class="line">    &quot;Palatino-Bold&quot;,</div><div class="line">    &quot;Palatino-BoldItalic&quot;,</div><div class="line">    &quot;Palatino-Italic&quot;,</div><div class="line">    &quot;Palatino-Roman&quot;,</div><div class="line">    Papyrus,</div><div class="line">    &quot;Papyrus-Condensed&quot;,</div><div class="line">    PartyLetPlain,</div><div class="line">    PhoneKeyCapsTwo,</div><div class="line">    PhonepadTwo,</div><div class="line">    &quot;PingFangHK-Light&quot;,</div><div class="line">    &quot;PingFangHK-Medium&quot;,</div><div class="line">    &quot;PingFangHK-Regular&quot;,</div><div class="line">    &quot;PingFangHK-Semibold&quot;,</div><div class="line">    &quot;PingFangHK-Thin&quot;,</div><div class="line">    &quot;PingFangHK-Ultralight&quot;,</div><div class="line">    &quot;PingFangSC-Light&quot;,</div><div class="line">    &quot;PingFangSC-Medium&quot;,</div><div class="line">    &quot;PingFangSC-Regular&quot;,</div><div class="line">    &quot;PingFangSC-Semibold&quot;,</div><div class="line">    &quot;PingFangSC-Thin&quot;,</div><div class="line">    &quot;PingFangSC-Ultralight&quot;,</div><div class="line">    &quot;PingFangTC-Light&quot;,</div><div class="line">    &quot;PingFangTC-Medium&quot;,</div><div class="line">    &quot;PingFangTC-Regular&quot;,</div><div class="line">    &quot;PingFangTC-Semibold&quot;,</div><div class="line">    &quot;PingFangTC-Thin&quot;,</div><div class="line">    &quot;PingFangTC-Ultralight&quot;,</div><div class="line">    &quot;Rockwell-Bold&quot;,</div><div class="line">    SavoyeLetPlain,</div><div class="line">    &quot;Scheme-Bold&quot;,</div><div class="line">    Seravek,</div><div class="line">    &quot;Seravek-Bold&quot;,</div><div class="line">    &quot;Seravek-BoldItalic&quot;,</div><div class="line">    &quot;Seravek-ExtraLight&quot;,</div><div class="line">    &quot;Seravek-ExtraLightItalic&quot;,</div><div class="line">    &quot;Seravek-Italic&quot;,</div><div class="line">    &quot;Seravek-Light&quot;,</div><div class="line">    &quot;Seravek-LightItalic&quot;,</div><div class="line">    &quot;Seravek-Medium&quot;,</div><div class="line">    &quot;Seravek-MediumItalic&quot;,</div><div class="line">    &quot;SignPainter-HouseScriptSemibold&quot;,</div><div class="line">    SinhalaSangamMN,</div><div class="line">    &quot;SinhalaSangamMN-Bold&quot;,</div><div class="line">    SnellRoundhand,</div><div class="line">    &quot;SnellRoundhand-Black&quot;,</div><div class="line">    &quot;SnellRoundhand-Bold&quot;,</div><div class="line">    &quot;Superclarendon-Black&quot;,</div><div class="line">    &quot;Superclarendon-BlackItalic&quot;,</div><div class="line">    &quot;Superclarendon-Bold&quot;,</div><div class="line">    &quot;Superclarendon-BoldItalic&quot;,</div><div class="line">    &quot;Superclarendon-Italic&quot;,</div><div class="line">    &quot;Superclarendon-Light&quot;,</div><div class="line">    &quot;Superclarendon-LightItalic&quot;,</div><div class="line">    &quot;Superclarendon-Regular&quot;,</div><div class="line">    Symbol,</div><div class="line">    TamilSangamMN,</div><div class="line">    &quot;TamilSangamMN-Bold&quot;,</div><div class="line">    &quot;TheHandSerif-Semibold&quot;,</div><div class="line">    Thonburi,</div><div class="line">    &quot;Thonburi-Bold&quot;,</div><div class="line">    &quot;Thonburi-Light&quot;,</div><div class="line">    TimesLTMM,</div><div class="line">    &quot;TimesNewRomanPS-BoldItalicMT&quot;,</div><div class="line">    &quot;TimesNewRomanPS-BoldMT&quot;,</div><div class="line">    &quot;TimesNewRomanPS-ItalicMT&quot;,</div><div class="line">    TimesNewRomanPSMT,</div><div class="line">    &quot;Trebuchet-BoldItalic&quot;,</div><div class="line">    TrebuchetMS,</div><div class="line">    &quot;TrebuchetMS-Bold&quot;,</div><div class="line">    &quot;TrebuchetMS-Italic&quot;,</div><div class="line">    Verdana,</div><div class="line">    &quot;Verdana-Bold&quot;,</div><div class="line">    &quot;Verdana-BoldItalic&quot;,</div><div class="line">    &quot;Verdana-Italic&quot;,</div><div class="line">    ZapfDingbatsITC,</div><div class="line">    Zapfino</div><div class="line">) count 548</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div></pre></td><td class="code"><pre><div class="line">CFArrayRef CTFontManagerCopyAvailableFontFamilyNames( void ) CT_AVAILABLE(10_6, 10_0);  所有的 fontFamilyName</div><div class="line"></div><div class="line">结果</div><div class="line">(</div><div class="line">    &quot;.Al Nile PUA&quot;,</div><div class="line">    &quot;.Apple Color Emoji UI&quot;,</div><div class="line">    &quot;.Apple SD Gothic NeoI&quot;,</div><div class="line">    &quot;.Apple SD Gothic NeoW&quot;,</div><div class="line">    &quot;.Damascus PUA&quot;,</div><div class="line">    &quot;.Farah PUA&quot;,</div><div class="line">    &quot;.Geeza Pro Interface&quot;,</div><div class="line">    &quot;.Geeza Pro PUA&quot;,</div><div class="line">    &quot;.Helvetica Light&quot;,</div><div class="line">    &quot;.Helvetica LT MM&quot;,</div><div class="line">    &quot;.Helvetica Neue ATV&quot;,</div><div class="line">    &quot;.Helvetica Neue Interface&quot;,</div><div class="line">    &quot;.Helvetica NeueUI&quot;,</div><div class="line">    &quot;.Hiragino Kaku Gothic Interface&quot;,</div><div class="line">    &quot;.Hiragino Kaku Gothic InterfaceWatch&quot;,</div><div class="line">    &quot;.Keycaps&quot;,</div><div class="line">    &quot;.Keycaps A&quot;,</div><div class="line">    &quot;.Keycaps B&quot;,</div><div class="line">    &quot;.Keycaps Pad&quot;,</div><div class="line">    &quot;.Keycaps Pad A&quot;,</div><div class="line">    &quot;.LastResort&quot;,</div><div class="line">    &quot;.Lock Clock&quot;,</div><div class="line">    &quot;.PhoneFallback&quot;,</div><div class="line">    &quot;.PhoneKeyCaps&quot;,</div><div class="line">    &quot;.PhoneKeyCapsThree&quot;,</div><div class="line">    &quot;.PhoneKeyCapsTwo&quot;,</div><div class="line">    &quot;.PhonepadTwo&quot;,</div><div class="line">    &quot;.PingFang HK&quot;,</div><div class="line">    &quot;.PingFang SC&quot;,</div><div class="line">    &quot;.PingFang TC&quot;,</div><div class="line">    &quot;.Savoye LET CC.&quot;,</div><div class="line">    &quot;.SF Compact Display&quot;,</div><div class="line">    &quot;.SF Compact Rounded&quot;,</div><div class="line">    &quot;.SF Compact Text&quot;,</div><div class="line">    &quot;.SF UI Display&quot;,</div><div class="line">    &quot;.SF UI Display Condensed&quot;,</div><div class="line">    &quot;.SF UI Text&quot;,</div><div class="line">    &quot;.SF UI Text Condensed&quot;,</div><div class="line">    &quot;.Sukhumvit Set UI&quot;,</div><div class="line">    &quot;.Times LT MM&quot;,</div><div class="line">    &quot;Academy Engraved LET&quot;,</div><div class="line">    &quot;Al Nile&quot;,</div><div class="line">    &quot;American Typewriter&quot;,</div><div class="line">    Arial,</div><div class="line">    &quot;Arial Hebrew&quot;,</div><div class="line">    &quot;Arial Rounded MT Bold&quot;,</div><div class="line">    Asphalt,</div><div class="line">    Athelas,</div><div class="line">    Avenir,</div><div class="line">    &quot;Avenir Next&quot;,</div><div class="line">    &quot;Avenir Next Condensed&quot;,</div><div class="line">    Balega,</div><div class="line">    Baskerville,</div><div class="line">    &quot;Bebas Neue&quot;,</div><div class="line">    &quot;Bodoni 72&quot;,</div><div class="line">    &quot;Bodoni 72 Oldstyle&quot;,</div><div class="line">    &quot;Bodoni 72 Smallcaps&quot;,</div><div class="line">    &quot;Bodoni Ornaments&quot;,</div><div class="line">    &quot;Bradley Hand&quot;,</div><div class="line">    &quot;Chalkboard SE&quot;,</div><div class="line">    Chalkduster,</div><div class="line">    Charter,</div><div class="line">    Cochin,</div><div class="line">    Copperplate,</div><div class="line">    Courier,</div><div class="line">    &quot;Courier New&quot;,</div><div class="line">    Damascus,</div><div class="line">    &quot;DB LCD Temp&quot;,</div><div class="line">    &quot;Dear Joe Four&quot;,</div><div class="line">    &quot;Devanagari Sangam MN&quot;,</div><div class="line">    Didot,</div><div class="line">    &quot;DIN Alternate&quot;,</div><div class="line">    &quot;DIN Condensed&quot;,</div><div class="line">    Druk,</div><div class="line">    &quot;Euphemia UCAS&quot;,</div><div class="line">    &quot;Fakt Slab Stencil Pro&quot;,</div><div class="line">    Farah,</div><div class="line">    Futura,</div><div class="line">    &quot;Geeza Pro&quot;,</div><div class="line">    Georgia,</div><div class="line">    &quot;Gill Sans&quot;,</div><div class="line">    &quot;Gujarati Sangam MN&quot;,</div><div class="line">    &quot;Gurmukhi MN&quot;,</div><div class="line">    Helvetica,</div><div class="line">    &quot;Helvetica Neue&quot;,</div><div class="line">    &quot;Hiragino Kaku Gothic ProN&quot;,</div><div class="line">    &quot;Hiragino Mincho ProN&quot;,</div><div class="line">    &quot;Hiragino Sans&quot;,</div><div class="line">    &quot;Hoefler Text&quot;,</div><div class="line">    &quot;Iowan Old Style&quot;,</div><div class="line">    &quot;Journal Sans New&quot;,</div><div class="line">    Kailasa,</div><div class="line">    &quot;Kannada Sangam MN&quot;,</div><div class="line">    &quot;Khmer Sangam MN&quot;,</div><div class="line">    &quot;Kohinoor Bangla&quot;,</div><div class="line">    &quot;Kohinoor Devanagari&quot;,</div><div class="line">    &quot;Kohinoor Telugu&quot;,</div><div class="line">    &quot;Lao Sangam MN&quot;,</div><div class="line">    &quot;Malayalam Sangam MN&quot;,</div><div class="line">    Marion,</div><div class="line">    &quot;Marker Felt&quot;,</div><div class="line">    Menlo,</div><div class="line">    Mishafi,</div><div class="line">    &quot;Myanmar Sangam MN&quot;,</div><div class="line">    Noteworthy,</div><div class="line">    &quot;Noto Sans Avestan&quot;,</div><div class="line">    &quot;Noto Sans Balinese&quot;,</div><div class="line">    &quot;Noto Sans Bamum&quot;,</div><div class="line">    &quot;Noto Sans Batak&quot;,</div><div class="line">    &quot;Noto Sans Brahmi&quot;,</div><div class="line">    &quot;Noto Sans Buginese&quot;,</div><div class="line">    &quot;Noto Sans Buhid&quot;,</div><div class="line">    &quot;Noto Sans Carian&quot;,</div><div class="line">    &quot;Noto Sans Cham&quot;,</div><div class="line">    &quot;Noto Sans Coptic&quot;,</div><div class="line">    &quot;Noto Sans Cuneiform&quot;,</div><div class="line">    &quot;Noto Sans Cypriot&quot;,</div><div class="line">    &quot;Noto Sans Egyptian Hieroglyphs&quot;,</div><div class="line">    &quot;Noto Sans Glagolitic&quot;,</div><div class="line">    &quot;Noto Sans Gothic&quot;,</div><div class="line">    &quot;Noto Sans Hanunoo&quot;,</div><div class="line">    &quot;Noto Sans Imperial Aramaic&quot;,</div><div class="line">    &quot;Noto Sans Inscriptional Pahlavi&quot;,</div><div class="line">    &quot;Noto Sans Inscriptional Parthian&quot;,</div><div class="line">    &quot;Noto Sans Javanese&quot;,</div><div class="line">    &quot;Noto Sans Kaithi&quot;,</div><div class="line">    &quot;Noto Sans Kayah Li&quot;,</div><div class="line">    &quot;Noto Sans Kharoshthi&quot;,</div><div class="line">    &quot;Noto Sans Lepcha&quot;,</div><div class="line">    &quot;Noto Sans Limbu&quot;,</div><div class="line">    &quot;Noto Sans Linear B&quot;,</div><div class="line">    &quot;Noto Sans Lisu&quot;,</div><div class="line">    &quot;Noto Sans Lycian&quot;,</div><div class="line">    &quot;Noto Sans Lydian&quot;,</div><div class="line">    &quot;Noto Sans Mandaic&quot;,</div><div class="line">    &quot;Noto Sans Meetei Mayek&quot;,</div><div class="line">    &quot;Noto Sans Mongolian&quot;,</div><div class="line">    &quot;Noto Sans New Tai Lue&quot;,</div><div class="line">    &quot;Noto Sans NKo&quot;,</div><div class="line">    &quot;Noto Sans Ogham&quot;,</div><div class="line">    &quot;Noto Sans Ol Chiki&quot;,</div><div class="line">    &quot;Noto Sans Old Italic&quot;,</div><div class="line">    &quot;Noto Sans Old Persian&quot;,</div><div class="line">    &quot;Noto Sans Old South Arabian&quot;,</div><div class="line">    &quot;Noto Sans Old Turkic&quot;,</div><div class="line">    &quot;Noto Sans Osmanya&quot;,</div><div class="line">    &quot;Noto Sans Phags Pa&quot;,</div><div class="line">    &quot;Noto Sans Phoenician&quot;,</div><div class="line">    &quot;Noto Sans Rejang&quot;,</div><div class="line">    &quot;Noto Sans Runic&quot;,</div><div class="line">    &quot;Noto Sans Samaritan&quot;,</div><div class="line">    &quot;Noto Sans Saurashtra&quot;,</div><div class="line">    &quot;Noto Sans Shavian&quot;,</div><div class="line">    &quot;Noto Sans Sundanese&quot;,</div><div class="line">    &quot;Noto Sans Syloti Nagri&quot;,</div><div class="line">    &quot;Noto Sans Syriac Eastern&quot;,</div><div class="line">    &quot;Noto Sans Tagalog&quot;,</div><div class="line">    &quot;Noto Sans Tagbanwa&quot;,</div><div class="line">    &quot;Noto Sans Tai Le&quot;,</div><div class="line">    &quot;Noto Sans Tai Tham&quot;,</div><div class="line">    &quot;Noto Sans Tai Viet&quot;,</div><div class="line">    &quot;Noto Sans Thaana&quot;,</div><div class="line">    &quot;Noto Sans Tifinagh&quot;,</div><div class="line">    &quot;Noto Sans Ugaritic&quot;,</div><div class="line">    &quot;Noto Sans Vai&quot;,</div><div class="line">    &quot;Noto Sans Yi&quot;,</div><div class="line">    Optima,</div><div class="line">    &quot;Oriya Sangam MN&quot;,</div><div class="line">    Palatino,</div><div class="line">    Papyrus,</div><div class="line">    &quot;Party LET&quot;,</div><div class="line">    &quot;PingFang HK&quot;,</div><div class="line">    &quot;PingFang SC&quot;,</div><div class="line">    &quot;PingFang TC&quot;,</div><div class="line">    Rockwell,</div><div class="line">    &quot;Savoye LET&quot;,</div><div class="line">    Scheme,</div><div class="line">    Seravek,</div><div class="line">    SignPainter,</div><div class="line">    &quot;Sinhala Sangam MN&quot;,</div><div class="line">    &quot;Snell Roundhand&quot;,</div><div class="line">    Superclarendon,</div><div class="line">    Symbol,</div><div class="line">    &quot;Tamil Sangam MN&quot;,</div><div class="line">    &quot;The Hand Serif&quot;,</div><div class="line">    Thonburi,</div><div class="line">    &quot;Times New Roman&quot;,</div><div class="line">    &quot;Trebuchet MS&quot;,</div><div class="line">    Verdana,</div><div class="line">    &quot;Zapf Dingbats&quot;,</div><div class="line">    Zapfino,</div><div class="line">    &quot;Apple Color Emoji&quot;,</div><div class="line">    &quot;Apple SD Gothic Neo&quot;,</div><div class="line">    AppleGothic</div><div class="line">) count 194</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CFArrayRef CTFontManagerCopyAvailableFontURLs( void ) CT_AVAILABLE_MAC(10_6); </div><div class="line">mac 专用</div><div class="line">CFComparisonResult CTFontManagerCompareFontFamilyNames(</div><div class="line">    const void *        family1,</div><div class="line">    const void *        family2,</div><div class="line">    void * __nullable   context ) CT_AVAILABLE_MAC(10_6); </div><div class="line">    </div><div class="line">mac专用</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontManagerCreateFontDescriptorsFromURL(</div><div class="line">    CFURLRef            fileURL ) CT_AVAILABLE(10_6, 7_0);</div><div class="line">    这个不会用 ，不知道fileURL怎么来</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef __nullable CTFontManagerCreateFontDescriptorFromData(</div><div class="line">    CFDataRef               data )</div><div class="line">    这个也不会用，不知道data怎么来</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">typedef CF_ENUM(uint32_t, CTFontManagerScope) &#123;</div><div class="line">    kCTFontManagerScopeNone         = 0,</div><div class="line">    kCTFontManagerScopeProcess      = 1,</div><div class="line">    kCTFontManagerScopeUser         = 2,    /* not supported in iOS */</div><div class="line">    kCTFontManagerScopeSession      = 3     /* not supported in iOS */</div><div class="line">&#125;;</div><div class="line"></div><div class="line">这个权限 ios kCTFontManagerScopeProcess 能用</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">bool CTFontManagerRegisterFontsForURL(</div><div class="line">    CFURLRef                fontURL,</div><div class="line">    CTFontManagerScope      scope,</div><div class="line">    CFErrorRef *            error )</div><div class="line">    这个fontURL 不知道怎么来</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">bool CTFontManagerUnregisterFontsForURL(</div><div class="line">    CFURLRef                fontURL,</div><div class="line">    CTFontManagerScope      scope,</div><div class="line">    CFErrorRef *            error ) CT_AVAILABLE(10_6, 4_1);</div><div class="line">    这个fontRUL 不知道怎么来</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">bool CTFontManagerRegisterGraphicsFont(</div><div class="line">    CGFontRef               font,</div><div class="line">    CFErrorRef *            error ) CT_AVAILABLE(10_8, 4_1);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">bool CTFontManagerUnregisterGraphicsFont(</div><div class="line">    CGFontRef               font,</div><div class="line">    CFErrorRef *            error ) CT_AVAILABLE(10_8, 4_1)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">bool CTFontManagerRegisterFontsForURLs(</div><div class="line">    CFArrayRef              fontURLs,</div><div class="line">    CTFontManagerScope      scope,</div><div class="line">    CFArrayRef __nullable * __nullable errors )</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">bool CTFontManagerUnregisterFontsForURLs(</div><div class="line">    CFArrayRef              fontURLs,</div><div class="line">    CTFontManagerScope      scope,</div><div class="line">    CFArrayRef __nullable * __nullable errors )</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">void CTFontManagerEnableFontDescriptors(</div><div class="line">    CFArrayRef              descriptors,</div><div class="line">    bool                    enable ) CT_AVAILABLE_MAC(10_6);  </div><div class="line">    mac 有效</div><div class="line">    </div><div class="line"> CTFontManagerScope CTFontManagerGetScopeForURL(</div><div class="line">CFURLRef                fontURL ) CT_AVAILABLE_MAC(10_6);</div><div class="line">mac 有效</div><div class="line"></div><div class="line">bool CTFontManagerIsSupportedFont(</div><div class="line">    CFURLRef                fontURL ) CT_AVAILABLE_MAC(10_6)</div><div class="line">mac  有效</div><div class="line"></div><div class="line">CFRunLoopSourceRef __nullable CTFontManagerCreateFontRequestRunLoopSource(</div><div class="line">    CFIndex         sourceOrder,</div><div class="line">    CFArrayRef    (^createMatchesCallback)(CFDictionaryRef requestAttributes, pid_t requestingProcess)) CT_AVAILABLE_MAC(10_6);</div><div class="line">mac 有效</div><div class="line"></div><div class="line">CT_EXPORT const CFStringRef kCTFontManagerBundleIdentifier CT_AVAILABLE_MAC(10_6);</div><div class="line">mac bundle</div><div class="line"></div><div class="line">void CTFontManagerSetAutoActivationSetting(</div><div class="line">    CFStringRef __nullable              bundleIdentifier,</div><div class="line">    CTFontManagerAutoActivationSetting  setting ) CT_AVAILABLE_MAC(10_6);</div><div class="line"> mac 有效</div><div class="line"></div><div class="line">CTFontManagerAutoActivationSetting CTFontManagerGetAutoActivationSetting(</div><div class="line">    CFStringRef __nullable bundleIdentifier ) CT_AVAILABLE_MAC(10_6);</div><div class="line"> mac 有效</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CT_EXPORT const CFStringRef kCTFontManagerRegisteredFontsChangedNotification CT_AVAILABLE(10_6, 7_0); 字体注册变化通知。</div></pre></td></tr></table></figure>
<p>该类是用来manger 字体的，但是不知道有啥用。</p>
<h3 id="CTFontManagerError-h"><a href="#CTFontManagerError-h" class="headerlink" title="CTFontManagerError.h"></a>CTFontManagerError.h</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">CT_EXPORT const CFStringRef kCTFontManagerErrorDomain CT_AVAILABLE(10_6, 3_2);</div><div class="line">CT_EXPORT const CFStringRef kCTFontManagerErrorFontURLsKey CT_AVAILABLE(10_6, 3_2);</div><div class="line">typedef CF_ENUM(CFIndex, CTFontManagerError) &#123;</div><div class="line">    kCTFontManagerErrorFileNotFound             = 101,</div><div class="line">    kCTFontManagerErrorInsufficientPermissions  = 102,</div><div class="line">    kCTFontManagerErrorUnrecognizedFormat       = 103,</div><div class="line">    kCTFontManagerErrorInvalidFontData          = 104,</div><div class="line">    kCTFontManagerErrorAlreadyRegistered        = 105,</div><div class="line">    kCTFontManagerErrorNotRegistered            = 201,</div><div class="line">    kCTFontManagerErrorInUse                    = 202,</div><div class="line">    kCTFontManagerErrorSystemRequired           = 203,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="CTFontTraits-h"><a href="#CTFontTraits-h" class="headerlink" title="CTFontTraits.h"></a>CTFontTraits.h</h3><p>该类是字体特征，暂时没看api</p>
<h3 id="CTFontCollection-h"><a href="#CTFontCollection-h" class="headerlink" title="CTFontCollection.h"></a>CTFontCollection.h</h3><h3 id="CTFontDescriptor-h"><a href="#CTFontDescriptor-h" class="headerlink" title="CTFontDescriptor.h"></a>CTFontDescriptor.h</h3><p>该类从以下四个方面来学习。</p>
<h4 id="1-Descriptor-Types"><a href="#1-Descriptor-Types" class="headerlink" title="1.Descriptor Types"></a>1.Descriptor Types</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CFTypeID CTFontDescriptorGetTypeID( void ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<h4 id="2-Descriptor-Constants"><a href="#2-Descriptor-Constants" class="headerlink" title="2.Descriptor Constants"></a>2.Descriptor Constants</h4><table>
<thead>
<tr>
<th>ke’y</th>
<th>value</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCTFontURLAttribute</td>
<td>CFURLRef</td>
<td>通过 descriptor 访问字体的url</td>
</tr>
<tr>
<td>kCTFontNameAttribute</td>
<td>CFStringRef</td>
<td>先从 PostScript arr 中找， 没发现在从 family 数字找，没发现  用 display name 。， 如果还是从字体列表中没找到，默认返回 Helvetica 字体</td>
</tr>
<tr>
<td>kCTFontDisplayNameAttribute</td>
<td>CFStringRef</td>
<td>这个返回display name  大多数是 the full name。</td>
</tr>
<tr>
<td>kCTFontFamilyNameAttribute</td>
<td>CFStringRef</td>
<td>返回  family name</td>
</tr>
<tr>
<td>kCTFontStyleNameAttribute</td>
<td>CFStringRef</td>
<td>返回 the style name of the font。代表设计者对该字体样式的描述。</td>
</tr>
<tr>
<td>kCTFontTraitsAttribute</td>
<td>CFDictionaryRef</td>
<td>返回改字体的特性 traits 字典。</td>
</tr>
<tr>
<td>kCTFontVariationAttribute</td>
<td>CFDictionaryRef</td>
<td>不知道啥用</td>
</tr>
<tr>
<td>kCTFontSizeAttribute</td>
<td>CFNumberRef</td>
<td>返回字体的大小</td>
</tr>
<tr>
<td>kCTFontMatrixAttribute</td>
<td>CFDataRef</td>
<td>该data是 CGAffineTransform信息</td>
</tr>
<tr>
<td>kCTFontCascadeListAttribute</td>
<td>CFArrayRef</td>
<td>级联表格数组，具体干嘛的不知道。看结果在说</td>
</tr>
<tr>
<td>kCTFontCharacterSetAttribute</td>
<td>CFCharacterSetRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontLanguagesAttribute</td>
<td>CFArrayRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontBaselineAdjustAttribute</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontMacintoshEncodingsAttribute</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeaturesAttribute</td>
<td>CFArrayRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeatureSettingsAttribute</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontFixedAdvanceAttribute</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontOrientationAttribute</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontFormatAttribute</td>
<td>CFNumber</td>
<td></td>
</tr>
<tr>
<td>kCTFontRegistrationScopeAttribute</td>
<td>CTFontManagerScope</td>
<td></td>
</tr>
<tr>
<td>kCTFontPriorityAttribute</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontEnabledAttribute</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontDownloadableAttribute</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontDownloadedAttribute</td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">typedef CF_ENUM(uint32_t, CTFontOrientation) &#123;</div><div class="line">    kCTFontOrientationDefault    CT_ENUM_AVAILABLE(10_8, 6_0) = 0,</div><div class="line">    kCTFontOrientationHorizontal CT_ENUM_AVAILABLE(10_8, 6_0) = 1,</div><div class="line">    kCTFontOrientationVertical   CT_ENUM_AVAILABLE(10_8, 6_0) = 2,</div><div class="line"></div><div class="line">    kCTFontDefaultOrientation CT_ENUM_DEPRECATED(10_5, 10_11, 3_2, 9_0) = kCTFontOrientationDefault,</div><div class="line">    kCTFontHorizontalOrientation CT_ENUM_DEPRECATED(10_5, 10_11, 3_2, 9_0) = kCTFontOrientationHorizontal,</div><div class="line">    kCTFontVerticalOrientation CT_ENUM_DEPRECATED(10_5, 10_11, 3_2, 9_0) = kCTFontOrientationVertical</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">typedef CF_ENUM(uint32_t, CTFontFormat) &#123;</div><div class="line">    kCTFontFormatUnrecognized       = 0,</div><div class="line">    kCTFontFormatOpenTypePostScript = 1,</div><div class="line">    kCTFontFormatOpenTypeTrueType   = 2,</div><div class="line">    kCTFontFormatTrueType           = 3,</div><div class="line">    kCTFontFormatPostScript         = 4,</div><div class="line">    kCTFontFormatBitmap             = 5</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="3-Descriptor-Creation"><a href="#3-Descriptor-Creation" class="headerlink" title="3.Descriptor Creation"></a>3.Descriptor Creation</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef CTFontDescriptorCreateWithNameAndSize(</div><div class="line">    CFStringRef         name,</div><div class="line">    CGFloat             size ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef CTFontDescriptorCreateWithAttributes(</div><div class="line">    CFDictionaryRef     attributes ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef CTFontDescriptorCreateCopyWithAttributes(</div><div class="line">    CTFontDescriptorRef     original,</div><div class="line">    CFDictionaryRef         attributes ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef __nullable CTFontDescriptorCreateCopyWithFamily(</div><div class="line">    CTFontDescriptorRef     original,</div><div class="line">    CFStringRef             family ) CT_AVAILABLE(10_9, 7_0);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef __nullable CTFontDescriptorCreateCopyWithSymbolicTraits(</div><div class="line">    CTFontDescriptorRef     original,</div><div class="line">    CTFontSymbolicTraits    symTraitValue,</div><div class="line">    CTFontSymbolicTraits    symTraitMask ) CT_AVAILABLE(10_9, 7_0);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef CTFontDescriptorCreateCopyWithVariation(</div><div class="line">    CTFontDescriptorRef     original,</div><div class="line">    CFNumberRef             variationIdentifier,</div><div class="line">    CGFloat                 variationValue ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef CTFontDescriptorCreateCopyWithFeature(</div><div class="line">    CTFontDescriptorRef     original,</div><div class="line">    CFNumberRef             featureTypeIdentifier,</div><div class="line">    CFNumberRef             featureSelectorIdentifier ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontDescriptorCreateMatchingFontDescriptors(</div><div class="line">    CTFontDescriptorRef     descriptor,</div><div class="line">    CFSetRef __nullable     mandatoryAttributes ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef __nullable CTFontDescriptorCreateMatchingFontDescriptor(</div><div class="line">    CTFontDescriptorRef     descriptor,</div><div class="line">    CFSetRef __nullable     mandatoryAttributes ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">typedef CF_ENUM(uint32_t, CTFontDescriptorMatchingState) &#123;</div><div class="line">    kCTFontDescriptorMatchingDidBegin,              // called once at the beginning.</div><div class="line">    kCTFontDescriptorMatchingDidFinish,             // called once at the end.</div><div class="line">    </div><div class="line">    kCTFontDescriptorMatchingWillBeginQuerying,     // called once before talking to the server.  Skipped if not necessary.</div><div class="line">    kCTFontDescriptorMatchingStalled,               // called when stalled. (e.g. while waiting for server response.)</div><div class="line">    </div><div class="line">    // Downloading and activating are repeated for each descriptor.</div><div class="line">    kCTFontDescriptorMatchingWillBeginDownloading,  // Downloading part may be skipped if all the assets are already downloaded</div><div class="line">    kCTFontDescriptorMatchingDownloading,</div><div class="line">    kCTFontDescriptorMatchingDidFinishDownloading,</div><div class="line">    kCTFontDescriptorMatchingDidMatch,              // called when font descriptor is matched.</div><div class="line">    </div><div class="line">    kCTFontDescriptorMatchingDidFailWithError       // called when an error occurred.  (may be called multiple times.)</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>keys for progressParameter dictionary</p>
<table>
<thead>
<tr>
<th>key</th>
<th>value</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>kCTFontDescriptorMatchingSourceDescriptor</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontDescriptorMatchingDescriptors</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontDescriptorMatchingResult</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontDescriptorMatchingPercentage</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontDescriptorMatchingCurrentAssetSize</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontDescriptorMatchingTotalDownloadedSize</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontDescriptorMatchingTotalAssetSize</td>
<td></td>
<td></td>
</tr>
<tr>
<td>kCTFontDescriptorMatchingError</td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">bool CTFontDescriptorMatchFontDescriptorsWithProgressHandler(</div><div class="line">    CFArrayRef                          descriptors,</div><div class="line">    CFSetRef __nullable                 mandatoryAttributes,</div><div class="line">    CTFontDescriptorProgressHandler     progressBlock) CT_AVAILABLE(10_9, 6_0);</div></pre></td></tr></table></figure>
<h4 id="4-Descriptor-Accessors"><a href="#4-Descriptor-Accessors" class="headerlink" title="4.Descriptor Accessors"></a>4.Descriptor Accessors</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CFTypeRef __nullable CTFontDescriptorCopyAttribute(</div><div class="line">    CTFontDescriptorRef     descriptor,</div><div class="line">    CFStringRef             attribute ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CFTypeRef __nullable CTFontDescriptorCopyLocalizedAttribute(</div><div class="line">    CTFontDescriptorRef     descriptor,</div><div class="line">    CFStringRef             attribute,</div><div class="line">    CFStringRef __nullable * __nullable language ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<h3 id="CTFontCollection-h-1"><a href="#CTFontCollection-h-1" class="headerlink" title="CTFontCollection.h"></a>CTFontCollection.h</h3><h4 id="1-Collection-Types"><a href="#1-Collection-Types" class="headerlink" title="1.Collection Types"></a>1.Collection Types</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CFTypeID CTFontCollectionGetTypeID( void )</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">typedef CFComparisonResult (*CTFontCollectionSortDescriptorsCallback)(</div><div class="line">    CTFontDescriptorRef first,</div><div class="line">    CTFontDescriptorRef second,</div><div class="line">    void *refCon );</div><div class="line">    排序用的</div></pre></td></tr></table></figure>
<h4 id="2-Collection-Matching-Options"><a href="#2-Collection-Matching-Options" class="headerlink" title="2.Collection Matching Options"></a>2.Collection Matching Options</h4><table>
<thead>
<tr>
<th>key</th>
<th>value</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCTFontCollectionRemoveDuplicatesOption</td>
<td>a non-zero value</td>
<td>collection过滤相同的 duplicate font descriptors</td>
</tr>
<tr>
<td>kCTFontCollectionIncludeDisabledFontsOption</td>
<td>a non-zero value</td>
<td>匹配禁用字体</td>
</tr>
<tr>
<td>kCTFontCollectionDisallowAutoActivationOption</td>
<td>a non-zero value</td>
<td>不匹配丢失的字体</td>
</tr>
</tbody>
</table>
<h4 id="3-Collection-Creation"><a href="#3-Collection-Creation" class="headerlink" title="3.Collection Creation"></a>3.Collection Creation</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CTFontCollectionRef CTFontCollectionCreateFromAvailableFonts(</div><div class="line">    CFDictionaryRef __nullable options ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CTFontCollectionRef CTFontCollectionCreateWithFontDescriptors(</div><div class="line">    CFArrayRef __nullable queryDescriptors,</div><div class="line">    CFDictionaryRef __nullable options ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CTFontCollectionRef CTFontCollectionCreateCopyWithFontDescriptors(</div><div class="line">    CTFontCollectionRef original,</div><div class="line">    CFArrayRef __nullable queryDescriptors,</div><div class="line">    CFDictionaryRef __nullable options ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CTMutableFontCollectionRef CTFontCollectionCreateMutableCopy(</div><div class="line">    CTFontCollectionRef original ) CT_AVAILABLE_MAC(10_7);</div><div class="line">    mac专用</div></pre></td></tr></table></figure>
<h4 id="4-Editing-the-query-descriptors"><a href="#4-Editing-the-query-descriptors" class="headerlink" title="4.Editing the query descriptors"></a>4.Editing the query descriptors</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontCollectionCopyQueryDescriptors(</div><div class="line">    CTFontCollectionRef collection ) CT_AVAILABLE_MAC(10_7);</div><div class="line">    mac 专用</div><div class="line">    </div><div class="line">    void CTFontCollectionSetQueryDescriptors(</div><div class="line">    CTMutableFontCollectionRef  collection,</div><div class="line">    CFArrayRef __nullable       descriptors ) CT_AVAILABLE_MAC(10_7);</div><div class="line">   mac 专用</div><div class="line"> </div><div class="line"> CFArrayRef __nullable CTFontCollectionCopyExclusionDescriptors( CTFontCollectionRef collection ) CT_AVAILABLE_MAC(10_7);</div><div class="line"> mac 专用</div><div class="line"> </div><div class="line"> void CTFontCollectionSetExclusionDescriptors(</div><div class="line">    CTMutableFontCollectionRef  collection,</div><div class="line">    CFArrayRef __nullable       descriptors ) CT_AVAILABLE_MAC(10_7);</div><div class="line">  mac 专用</div></pre></td></tr></table></figure>
<h4 id="5-Retrieving-Matching-Descriptors"><a href="#5-Retrieving-Matching-Descriptors" class="headerlink" title="5.Retrieving Matching Descriptors"></a>5.Retrieving Matching Descriptors</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontCollectionCreateMatchingFontDescriptors(</div><div class="line">    CTFontCollectionRef collection ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontCollectionCreateMatchingFontDescriptorsSortedWithCallback(</div><div class="line">    CTFontCollectionRef                     collection,</div><div class="line">    CTFontCollectionSortDescriptorsCallback __nullable sortCallback,</div><div class="line">    void * __nullable                       refCon ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontCollectionCreateMatchingFontDescriptorsWithOptions(</div><div class="line">    CTFontCollectionRef collection,</div><div class="line">    CFDictionaryRef __nullable options ) CT_AVAILABLE_MAC(10_7);</div><div class="line">    mac 专用</div><div class="line">    </div><div class="line">    CFArrayRef __nullable CTFontCollectionCreateMatchingFontDescriptorsForFamily(</div><div class="line">    CTFontCollectionRef collection,</div><div class="line">    CFStringRef         familyName,</div><div class="line">    CFDictionaryRef __nullable options ) CT_AVAILABLE_MAC(10_7);</div><div class="line">    mac 专用</div></pre></td></tr></table></figure>
<h4 id="6-Bulk-attribute-access"><a href="#6-Bulk-attribute-access" class="headerlink" title="6.Bulk attribute access"></a>6.Bulk attribute access</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">typedef CF_OPTIONS(uint32_t, CTFontCollectionCopyOptions) &#123;</div><div class="line">    kCTFontCollectionCopyDefaultOptions = 0,</div><div class="line">    kCTFontCollectionCopyUnique = (1 &lt;&lt; 0),</div><div class="line">    kCTFontCollectionCopyStandardSort = (1 &lt;&lt; 1)</div><div class="line">&#125; CT_AVAILABLE_MAC(10_7);</div><div class="line">mac 专用</div><div class="line"></div><div class="line">CFArrayRef CTFontCollectionCopyFontAttribute(</div><div class="line">    CTFontCollectionRef         collection,</div><div class="line">    CFStringRef                 attributeName,</div><div class="line">    CTFontCollectionCopyOptions options ) CT_AVAILABLE_MAC(10_7);</div><div class="line">   mac 专用</div><div class="line">   </div><div class="line">   </div><div class="line"> CFArrayRef CTFontCollectionCopyFontAttributes(</div><div class="line">    CTFontCollectionRef         collection,</div><div class="line">    CFSetRef                    attributeNames,</div><div class="line">    CTFontCollectionCopyOptions options ) CT_AVAILABLE_MAC(10_7);</div><div class="line">    mac 专用</div></pre></td></tr></table></figure>
<h3 id="CTFont-h"><a href="#CTFont-h" class="headerlink" title="CTFont.h"></a>CTFont.h</h3><p>富文本离不开文字，下面我们学下字体Font</p>
<p>字体内容较多，我们从以下方面学下。</p>
<h4 id="1-Font-Types"><a href="#1-Font-Types" class="headerlink" title="1.Font Types"></a>1.Font Types</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CFTypeID CTFontGetTypeID( void )  获取font  CFTypeID</div></pre></td></tr></table></figure>
<h3 id="2-Font-Constants"><a href="#2-Font-Constants" class="headerlink" title="2.Font Constants"></a>2.Font Constants</h3><table>
<thead>
<tr>
<th>kCTFontCopyrightNameKey</th>
<th>版权key</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCTFontFamilyNameKey</td>
<td>family（家族） key</td>
</tr>
<tr>
<td>kCTFontSubFamilyNameKey</td>
<td>subfamily（子家族）key</td>
</tr>
<tr>
<td>kCTFontStyleNameKey</td>
<td>字体style key</td>
</tr>
<tr>
<td>kCTFontUniqueNameKey</td>
<td>独一无二key（value不是真的独一无二，不应该假设唯一）</td>
</tr>
<tr>
<td>kCTFontFullNameKey</td>
<td>字体全名key</td>
</tr>
<tr>
<td>kCTFontVersionNameKey</td>
<td>字体版本号key</td>
</tr>
<tr>
<td>kCTFontPostScriptNameKey</td>
<td>字体补充说明key</td>
</tr>
<tr>
<td>kCTFontTrademarkNameKey</td>
<td>商标key</td>
</tr>
<tr>
<td>kCTFontManufacturerNameKey</td>
<td>制造商key</td>
</tr>
<tr>
<td>kCTFontDesignerNameKey</td>
<td>设计者key</td>
</tr>
<tr>
<td>kCTFontDescriptionNameKey</td>
<td>字体描述key</td>
</tr>
<tr>
<td>kCTFontVendorURLNameKey</td>
<td>供应商url key</td>
</tr>
<tr>
<td>kCTFontLicenseNameKey</td>
<td>许可证key</td>
</tr>
<tr>
<td>kCTFontLicenseURLNameKey</td>
<td>许可证url key</td>
</tr>
<tr>
<td>kCTFontSampleTextNameKey</td>
<td>简单text key</td>
</tr>
<tr>
<td>kCTFontPostScriptCIDNameKey</td>
<td>补充说明CID key</td>
</tr>
</tbody>
</table>
<p>这些key 暂时不知道干嘛用的。</p>
<h4 id="3-Font-Creation"><a href="#3-Font-Creation" class="headerlink" title="3.Font Creation"></a>3.Font Creation</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">CTFontRef CTFontCreateWithName(</div><div class="line">    CFStringRef __nullable      name,</div><div class="line">    CGFloat                     size,</div><div class="line">    const CGAffineTransform * __nullable matrix )</div><div class="line">   </div><div class="line"> name 必须是postScript 字符串    </div><div class="line">  </div><div class="line"> 代码</div><div class="line"> -(void)createAllPostScript&#123;</div><div class="line">    NSArray * postScriptArr = (__bridge  NSArray *)  CTFontManagerCopyAvailablePostScriptNames();</div><div class="line">    UIScrollView * view = [[UIScrollView alloc]initWithFrame:self.bounds];</div><div class="line">    view.contentSize = CGSizeMake(self.bounds.size.width, 30*postScriptArr.count);</div><div class="line">    [self addSubview:view];</div><div class="line">    [postScriptArr enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</div><div class="line">        NSString * strName = obj;</div><div class="line">        UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0, idx*30, self.bounds.size.width, 30)];</div><div class="line"> </div><div class="line">        UIFont * font = (__bridge UIFont *)CTFontCreateWithName((__bridge CFStringRef)strName, 20, NULL);</div><div class="line">       strName =(__bridge NSString *) CTFontCopyPostScriptName((__bridge CTFontRef)font);</div><div class="line">        </div><div class="line">        label.font = font;</div><div class="line">        label.text = strName;</div><div class="line">        [view addSubview:label];</div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">        </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>结果：</p>
<p><img src="/images/image-15.tiff" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">CTFontRef CTFontCreateWithFontDescriptor(</div><div class="line">    CTFontDescriptorRef     descriptor,</div><div class="line">    CGFloat                 size,</div><div class="line">    const CGAffineTransform * __nullable matrix )</div><div class="line">    根据descriptor 创建字体      size 设置0.0 默认是12.0  </div><div class="line">    </div><div class="line">    代码</div><div class="line">    - (instancetype)initWithFrame:(CGRect)frame</div><div class="line">&#123;</div><div class="line">    self = [super initWithFrame:frame];</div><div class="line">    if (self) &#123;</div><div class="line">        [self createAllPostScript];</div><div class="line">    &#125;</div><div class="line">    return self;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)createAllPostScript&#123;</div><div class="line">    NSArray * postScriptArr = (__bridge  NSArray *)  CTFontManagerCopyAvailablePostScriptNames();</div><div class="line">    UIScrollView * view = [[UIScrollView alloc]initWithFrame:self.bounds];</div><div class="line">    view.contentSize = CGSizeMake(self.bounds.size.width, 30*postScriptArr.count);</div><div class="line">    [self addSubview:view];</div><div class="line">    [postScriptArr enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</div><div class="line">        NSString * strName = obj;</div><div class="line">        UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(0, idx*30, self.bounds.size.width, 30)];</div><div class="line"> </div><div class="line">        CTFontDescriptorRef des = CTFontDescriptorCreateWithNameAndSize((__bridge CFStringRef)strName, 20);</div><div class="line"></div><div class="line">        UIFont * font = (__bridge UIFont *)CTFontCreateWithFontDescriptor(des, 10, NULL);</div><div class="line">       strName =(__bridge NSString *) CTFontCopyPostScriptName((__bridge CTFontRef)font);</div><div class="line">        </div><div class="line">        label.font = font;</div><div class="line">        label.text = strName;</div><div class="line">        [view addSubview:label];</div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果：</p>
<p><img src="/images/image-16.tiff" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">CTFontRef CTFontCreateWithNameAndOptions(</div><div class="line">    CFStringRef                 name,</div><div class="line">    CGFloat                     size,</div><div class="line">    const CGAffineTransform * __nullable matrix,</div><div class="line">    CTFontOptions               options )</div><div class="line">    </div><div class="line">    主要是CTFontOptions  没发现有啥区别。  </div><div class="line">    同CTFontRef CTFontCreateWithName(</div><div class="line">    CFStringRef __nullable      name,</div><div class="line">    CGFloat                     size,</div><div class="line">    const CGAffineTransform * __nullable matrix )函数效果一样</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">CTFontRef CTFontCreateWithFontDescriptorAndOptions(</div><div class="line">    CTFontDescriptorRef     descriptor,</div><div class="line">    CGFloat                 size,</div><div class="line">    const CGAffineTransform * __nullable matrix,</div><div class="line">    CTFontOptions           options )</div><div class="line">    </div><div class="line">   效果同</div><div class="line">   CTFontRef CTFontCreateWithFontDescriptor(</div><div class="line">    CTFontDescriptorRef     descriptor,</div><div class="line">    CGFloat                 size,</div><div class="line">    const CGAffineTransform * __nullable matrix )</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CTFontRef __nullable CTFontCreateUIFontForLanguage(</div><div class="line">    CTFontUIFontType    uiType,</div><div class="line">    CGFloat             size,</div><div class="line">    CFStringRef __nullable language )</div><div class="line">    该函数不会使用  language 不知道怎么来的</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CTFontRef CTFontCreateCopyWithAttributes(</div><div class="line">    CTFontRef                   font,</div><div class="line">    CGFloat                     size,</div><div class="line">    const CGAffineTransform * __nullable matrix,</div><div class="line">    CTFontDescriptorRef __nullable attributes ) </div><div class="line">   根据font 和 attributes 创建一个新的font   CTFontDescriptorRef 属性不知道咋用</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CTFontRef __nullable CTFontCreateCopyWithSymbolicTraits(</div><div class="line">    CTFontRef                   font,</div><div class="line">    CGFloat                     size,</div><div class="line">    const CGAffineTransform * __nullable matrix,</div><div class="line">    CTFontSymbolicTraits        symTraitValue,</div><div class="line">    CTFontSymbolicTraits        symTraitMask )</div><div class="line">    暂时不研究</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CTFontRef __nullable CTFontCreateCopyWithFamily(</div><div class="line">    CTFontRef                   font,</div><div class="line">    CGFloat                     size,</div><div class="line">    const CGAffineTransform * __nullable matrix,</div><div class="line">    CFStringRef                 family )</div><div class="line">    暂时不研究</div></pre></td></tr></table></figure>
<h4 id="4-Font-Cascading"><a href="#4-Font-Cascading" class="headerlink" title="4.Font Cascading"></a>4.Font Cascading</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CTFontRef CTFontCreateForString(</div><div class="line">    CTFontRef       currentFont,</div><div class="line">    CFStringRef     string,</div><div class="line">    CFRange         range ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<h4 id="5-Font-Accessors"><a href="#5-Font-Accessors" class="headerlink" title="5.Font Accessors"></a>5.Font Accessors</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">CTFontDescriptorRef CTFontCopyFontDescriptor(</div><div class="line">    CTFontRef       font )</div><div class="line">    获取font 的 descriptorref</div><div class="line">    </div><div class="line">    -(void)font&#123;</div><div class="line">    UIFont * font = [UIFont systemFontOfSize:24];</div><div class="line">    CTFontDescriptorRef ref = CTFontCopyFontDescriptor((__bridge CTFontRef) font );</div><div class="line">    CFDictionaryRef attdic = CTFontDescriptorCopyAttributes(ref);</div><div class="line">    NSLog(@&quot;descriptorref %@&quot;,attdic);</div><div class="line">&#125;</div><div class="line">    结果：</div><div class="line">    2017-03-01 16:09:30.336 CoreTextDemo[43313:1154770] descriptorref &#123;</div><div class="line">    NSCTFontUIUsageAttribute = CTFontRegularUsage;</div><div class="line">    NSFontSizeAttribute = 24;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CFTypeRef __nullable CTFontCopyAttribute(</div><div class="line">    CTFontRef       font,</div><div class="line">    CFStringRef     attribute )</div><div class="line">    这个请求font  的 attribute 属性。 暂时 不清楚font到底有啥属性。</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">CGFloat CTFontGetSize( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取字体的大小</div><div class="line"></div><div class="line">UIFont * font = [UIFont systemFontOfSize:24];</div><div class="line">    CGFloat fontSize = CTFontGetSize( (__bridge CTFontRef) font );</div><div class="line">    NSLog(@&quot;font size %lf&quot;,fontSize);</div><div class="line">    结果：</div><div class="line">    2017-03-01 16:14:29.446 CoreTextDemo[43346:1159004] font size 24.000000</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">CGAffineTransform CTFontGetMatrix( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取 transform </div><div class="line"></div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    CGAffineTransform transform = CTFontGetMatrix(  font );</div><div class="line">    NSLog(@&quot;font transform %@&quot;,NSStringFromCGAffineTransform(transform));</div><div class="line">    结果：</div><div class="line">2017-03-01 16:16:31.407 CoreTextDemo[43362:1161110] font transform [1, 0, 0, 1, 0, 0]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">CTFontSymbolicTraits CTFontGetSymbolicTraits( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取  CTFontSymbolicTraits；</div><div class="line"></div><div class="line">代码：</div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    CTFontSymbolicTraits symolictraits = CTFontGetSymbolicTraits(font);</div><div class="line">    NSLog(@&quot;font SymbolicTraits %u&quot; , symolictraits);</div><div class="line">    </div><div class="line">结果：</div><div class="line">2017-03-01 16:19:06.667 CoreTextDemo[43380:1163730] font SymbolicTraits 0</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">CFDictionaryRef CTFontCopyTraits( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取一个Traits 字典</div><div class="line">代码：</div><div class="line">	 CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">   NSDictionary * traitsDic =(__bridge NSDictionary *) CTFontCopyTraits(font);</div><div class="line">    NSLog(@&quot;font traits dic %@&quot;,traitsDic);</div><div class="line"></div><div class="line">结果：</div><div class="line">	2017-03-01 16:22:06.911 CoreTextDemo[43403:1166912] font traits dic &#123;</div><div class="line">    NSCTFontSlantTrait = 0;</div><div class="line">    NSCTFontSymbolicTrait = 16384;</div><div class="line">    NSCTFontUIFontDesignTrait = NSCTFontUIFontDesignDefault;</div></pre></td></tr></table></figure>
<h4 id="6-Font-Names"><a href="#6-Font-Names" class="headerlink" title="6.Font Names"></a>6.Font Names</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">   CFStringRef CTFontCopyPostScriptName( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取postScriptName</div><div class="line"></div><div class="line"> 代码：</div><div class="line">   </div><div class="line">   CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    NSString * postScriptName =(__bridge NSString *) CTFontCopyPostScriptName( font ) ;</div><div class="line">    NSLog(@&quot;font name postScript %@&quot;,postScriptName);</div><div class="line">    </div><div class="line">结果：</div><div class="line">	2017-03-01 16:27:09.535 CoreTextDemo[43424:1171595] font name postScript .SFUIDisplay</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">CFStringRef CTFontCopyFamilyName( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取familyName </div><div class="line"></div><div class="line">代码：</div><div class="line">	    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    NSString * familyName =(__bridge NSString *) CTFontCopyFamilyName(  font );</div><div class="line">    NSLog(@&quot;font name familyName %@&quot;,familyName);</div><div class="line">结果：</div><div class="line">	2017-03-01 16:31:58.418 CoreTextDemo[43456:1176085] font name familyName .SF UI Display</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">CFStringRef CTFontCopyFullName( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line"> 获取full的名字</div><div class="line"> 代码：</div><div class="line"> 	    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    NSString * fullName =(__bridge NSString *) CTFontCopyFullName(  font );</div><div class="line">    NSLog(@&quot;font name fullName %@&quot;,fullName);</div><div class="line"> </div><div class="line"> 结果：</div><div class="line"> 	2017-03-01 16:34:50.587 CoreTextDemo[43474:1179511] font name fullName System Font Regular</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">CFStringRef CTFontCopyDisplayName( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取displayName</div><div class="line"></div><div class="line">代码：</div><div class="line">    NSString * displayName =(__bridge NSString *) CTFontCopyDisplayName(  font );</div><div class="line">    NSLog(@&quot;font name displayName %@&quot;,displayName);</div><div class="line"></div><div class="line">结果：</div><div class="line">	2017-03-01 16:37:05.363 CoreTextDemo[43491:1182119] font name displayName System Font</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CFStringRef __nullable CTFontCopyName(</div><div class="line">    CTFontRef       font,</div><div class="line">    CFStringRef     nameKey ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">    没看懂干嘛的</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CFStringRef __nullable CTFontCopyLocalizedName(</div><div class="line">    CTFontRef       font,</div><div class="line">    CFStringRef     nameKey,</div><div class="line">    CFStringRef __nullable * __nullable actualLanguage ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">没看懂干嘛的</div></pre></td></tr></table></figure>
<h4 id="7-Font-Encoding"><a href="#7-Font-Encoding" class="headerlink" title="7.Font Encoding"></a>7.Font Encoding</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CFCharacterSetRef CTFontCopyCharacterSet( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取一个CFCharcerSetRef</div><div class="line"></div><div class="line">代码：</div><div class="line">   CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    CFCharacterSetRef ref = CTFontCopyCharacterSet( font ) ;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">CFStringEncoding CTFontGetStringEncoding( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取编码</div><div class="line"></div><div class="line">代码：</div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    CFStringEncoding encoding = CTFontGetStringEncoding(font);</div><div class="line">    NSLog(@&quot;font encoding %u&quot;,(unsigned int)encoding);</div><div class="line"></div><div class="line">结果：</div><div class="line">	2017-03-01 16:56:38.895 CoreTextDemo[43667:1198531] font encoding 0</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div></pre></td><td class="code"><pre><div class="line">CFArrayRef CTFontCopySupportedLanguages( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取字体支持的语言</div><div class="line"></div><div class="line">代码：</div><div class="line">	CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    NSArray * supportLanguages = (__bridge NSArray *)  CTFontCopySupportedLanguages(  font ) ;</div><div class="line">    NSLog(@&quot;font support languages %@&quot;,supportLanguages);</div><div class="line">结果：</div><div class="line">	 font support languages (</div><div class="line">    wae,</div><div class="line">    hsb,</div><div class="line">    yo,</div><div class="line">    rof,</div><div class="line">    af,</div><div class="line">    dav,</div><div class="line">    be,</div><div class="line">    zu,</div><div class="line">    ca,</div><div class="line">    bg,</div><div class="line">    ce,</div><div class="line">    da,</div><div class="line">    jmc,</div><div class="line">    de,</div><div class="line">    ksb,</div><div class="line">    br,</div><div class="line">    bs,</div><div class="line">    mer,</div><div class="line">    cs,</div><div class="line">    ga,</div><div class="line">    gsw,</div><div class="line">    kde,</div><div class="line">    el,</div><div class="line">    gd,</div><div class="line">    fi,</div><div class="line">    en,</div><div class="line">    ksh,</div><div class="line">    eo,</div><div class="line">    cy,</div><div class="line">    es,</div><div class="line">    fo,</div><div class="line">    et,</div><div class="line">    eu,</div><div class="line">    gl,</div><div class="line">    id,</div><div class="line">    fr,</div><div class="line">    ig,</div><div class="line">    kam,</div><div class="line">    fil,</div><div class="line">    vun,</div><div class="line">    fy,</div><div class="line">    xog,</div><div class="line">    gv,</div><div class="line">    hr,</div><div class="line">    mgh,</div><div class="line">    rwk,</div><div class="line">    lb,</div><div class="line">    hu,</div><div class="line">    fur,</div><div class="line">    ki,</div><div class="line">    seh,</div><div class="line">    is,</div><div class="line">    kk,</div><div class="line">    it,</div><div class="line">    bem,</div><div class="line">    nb,</div><div class="line">    mg,</div><div class="line">    nd,</div><div class="line">    mk,</div><div class="line">    nyn,</div><div class="line">    asa,</div><div class="line">    kw,</div><div class="line">    mn,</div><div class="line">    sbp,</div><div class="line">    lt,</div><div class="line">    ky,</div><div class="line">    nl,</div><div class="line">    lv,</div><div class="line">    nn,</div><div class="line">    ms,</div><div class="line">    mt,</div><div class="line">    teo,</div><div class="line">    guz,</div><div class="line">    om,</div><div class="line">    pl,</div><div class="line">    bez,</div><div class="line">    os,</div><div class="line">    kln,</div><div class="line">    mfe,</div><div class="line">    pt,</div><div class="line">    sg,</div><div class="line">    rm,</div><div class="line">    rn,</div><div class="line">    ro,</div><div class="line">    sk,</div><div class="line">    dsb,</div><div class="line">    tg,</div><div class="line">    qu,</div><div class="line">    sl,</div><div class="line">    luo,</div><div class="line">    ebu,</div><div class="line">    sn,</div><div class="line">    cgg,</div><div class="line">    so,</div><div class="line">    sah,</div><div class="line">    tk,</div><div class="line">    ru,</div><div class="line">    sq,</div><div class="line">    sr,</div><div class="line">    rw,</div><div class="line">    ast,</div><div class="line">    uk,</div><div class="line">    sv,</div><div class="line">    tr,</div><div class="line">    vi,</div><div class="line">    sw,</div><div class="line">    kea,</div><div class="line">    luy,</div><div class="line">    saq</div><div class="line">)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">bool CTFontGetGlyphsForCharacters(</div><div class="line">    CTFontRef       font,</div><div class="line">    const UniChar   characters[],</div><div class="line">    CGGlyph         glyphs[],</div><div class="line">    CFIndex         count ) CT_AVAILABLE(10_5, 3_2);</div><div class="line"></div><div class="line">用来判断是字符编码是否是fong中的</div><div class="line">代码：</div><div class="line">- (BOOL)isCharacter:(unichar*)characters supportedByFont:(UIFont *)aFont length:(NSInteger)length</div><div class="line">&#123;</div><div class="line">    CGGlyph glyphs[length] ;</div><div class="line">    CTFontRef ctFont = CTFontCreateWithName((CFStringRef)aFont.fontName, aFont.pointSize, NULL);</div><div class="line">    BOOL ret = CTFontGetGlyphsForCharacters(ctFont, characters, glyphs, length);</div><div class="line">    CFRelease(ctFont);</div><div class="line">    return ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line">-(void)font&#123;</div><div class="line">CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    NSString *characters = @&quot;a&quot;;</div><div class="line">   unichar * chars = (unichar*)[characters cStringUsingEncoding:NSUTF8StringEncoding];</div><div class="line">    bool isSuccess=[self isCharacter:chars supportedByFont:[UIFont systemFontOfSize:24] length:characters.length];</div><div class="line">    if (isSuccess) &#123;</div><div class="line">        NSLog(@&quot;characters success&quot;);</div><div class="line">    &#125;else&#123;</div><div class="line">        NSLog(@&quot;characters failure&quot;);</div><div class="line">    &#125;</div><div class="line">   &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">  结果：</div><div class="line">  2017-03-01 17:15:34.008 CoreTextDemo[43765:1215312] characters success</div><div class="line">  </div><div class="line">  </div><div class="line">  要是为 characters = @&quot;🐯&quot; ； 结果就是 characters failure</div><div class="line">  目前实验只是针对一个字符好使，多个不好使。 中文字也不行。具体用法还要再探究。</div></pre></td></tr></table></figure>
<h4 id="8-Font-Metrics"><a href="#8-Font-Metrics" class="headerlink" title="8.Font Metrics"></a>8.Font Metrics</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CGFloat CTFontGetAscent( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取 ascent</div><div class="line">CGFloat CTFontGetDescent( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取descent</div><div class="line">CGFloat CTFontGetLeading( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取leading</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">unsigned CTFontGetUnitsPerEm( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CFIndex CTFontGetGlyphCount( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取字体总个数。</div><div class="line"></div><div class="line">   CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    CFIndex index =  CTFontGetGlyphCount(font);</div><div class="line">    NSLog(@&quot;font glyph count %ld&quot;,index);</div><div class="line">结果：</div><div class="line">	2017-03-01 17:45:17.390 CoreTextDemo[44046:1239054] font glyph count 2325</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">CGRect CTFontGetBoundingBox( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取font 设计大小</div><div class="line"></div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    CGRect fontRect = CTFontGetBoundingBox(  font );</div><div class="line">    NSLog(@&quot;font rect %@&quot;,NSStringFromCGRect(fontRect));</div><div class="line">    </div><div class="line">结果：2017-03-01 17:47:19.898 CoreTextDemo[44063:1241783] font rect &#123;&#123;-6.38671875, -6.5390625&#125;, &#123;36.43359375, 32.49609375&#125;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">CGFloat CTFontGetUnderlinePosition( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取下划线位置</div><div class="line"></div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    CGFloat UnderlinePosition = CTFontGetUnderlinePosition(  font );</div><div class="line">    NSLog(@&quot;font UnderlinePosition %lf&quot;,UnderlinePosition);</div><div class="line">    </div><div class="line"></div><div class="line">结果：</div><div class="line">2017-03-01 19:22:12.226 CoreTextDemo[47842:1272227] font UnderlinePosition -3.632812</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">CGFloat CTFontGetUnderlineThickness( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取下划线厚度</div><div class="line"></div><div class="line">代码：</div><div class="line">  CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    CGFloat UnderlineThickness = CTFontGetUnderlineThickness(font);</div><div class="line">    NSLog(@&quot;font UnderlineThickness %lf&quot;,UnderlineThickness);</div><div class="line">    </div><div class="line"></div><div class="line">结果</div><div class="line">2017-03-01 19:24:51.013 CoreTextDemo[47865:1275126] font UnderlineThickness 1.406250</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">CGFloat CTFontGetSlantAngle( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取字体的倾斜角度</div><div class="line"></div><div class="line">代码：</div><div class="line">	   CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">   CGFloat slantAngle =  CTFontGetSlantAngle(font);</div><div class="line">    NSLog(@&quot;font slantAngle %lf&quot;,slantAngle);</div><div class="line"></div><div class="line">结果：</div><div class="line">2017-03-01 19:27:27.999 CoreTextDemo[47890:1278289] font slantAngle 0.000000</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">CGFloat CTFontGetCapHeight( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取cap 高度</div><div class="line"></div><div class="line">代码：</div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    CGFloat capHeight =   CTFontGetCapHeight(font);</div><div class="line">    NSLog(@&quot;font capHeight %lf&quot;,capHeight);</div><div class="line">    </div><div class="line">结果：</div><div class="line">2017-03-01 19:30:31.542 CoreTextDemo[49032:1283158] font capHeight 16.910156</div><div class="line"></div><div class="line">我感觉像是大写字母的高度</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">CGFloat CTFontGetXHeight( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">获取XHeight 高度  </div><div class="line">小写字母的高度</div><div class="line"></div><div class="line">代码：</div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    CGFloat xHeight = CTFontGetXHeight(font);</div><div class="line">    NSLog(@&quot;font xHeight %lf&quot;,xHeight );</div><div class="line">    </div><div class="line">结果：</div><div class="line">2017-03-01 19:39:33.683 CoreTextDemo[49097:1293600] font xHeight 12.632812</div></pre></td></tr></table></figure>
<h4 id="9-Font-Glyphs"><a href="#9-Font-Glyphs" class="headerlink" title="9.Font Glyphs"></a>9.Font Glyphs</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">CGGlyph CTFontGetGlyphWithName(</div><div class="line">    CTFontRef           font,</div><div class="line">    CFStringRef         glyphName ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">  获取一个字形</div><div class="line">  代码</div><div class="line">      CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    NSString * str = @&quot;a&quot;;</div><div class="line">   CGGlyph glyph =  CTFontGetGlyphWithName(font,(__bridge CFStringRef)str);</div><div class="line">    NSLog(@&quot;font glyph 查询字符的 cgglyph %d&quot;,glyph);</div><div class="line"> </div><div class="line"> 结果：</div><div class="line"> enable_private_data: 0</div><div class="line">2017-03-01 19:48:52.196 CoreTextDemo[49149:1302956] font glyph 查询字符的 cgglyph 0</div><div class="line"></div><div class="line">该函数不会用</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CGRect CTFontGetBoundingRectsForGlyphs(</div><div class="line">    CTFontRef           font,</div><div class="line">    CTFontOrientation   orientation,</div><div class="line">    const CGGlyph       glyphs[],</div><div class="line">    CGRect * __nullable boundingRects,</div><div class="line">    CFIndex             count ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CGRect CTFontGetOpticalBoundsForGlyphs(</div><div class="line">    CTFontRef           font,</div><div class="line">    const CGGlyph       glyphs[],</div><div class="line">    CGRect * __nullable boundingRects,</div><div class="line">    CFIndex             count,</div><div class="line">    CFOptionFlags       options ) CT_AVAILABLE(10_8, 6_0)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">double CTFontGetAdvancesForGlyphs(</div><div class="line">    CTFontRef           font,</div><div class="line">    CTFontOrientation   orientation,</div><div class="line">    const CGGlyph       glyphs[],</div><div class="line">    CGSize * __nullable advances,</div><div class="line">    CFIndex             count ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">void CTFontGetVerticalTranslationsForGlyphs(</div><div class="line">    CTFontRef       font,</div><div class="line">    const CGGlyph   glyphs[],</div><div class="line">    CGSize          translations[],</div><div class="line">    CFIndex         count ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CGPathRef __nullable CTFontCreatePathForGlyph(</div><div class="line">    CTFontRef                   font,</div><div class="line">    CGGlyph                     glyph,</div><div class="line">    const CGAffineTransform * __nullable matrix ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">    </div><div class="line">    暂时不做研究</div></pre></td></tr></table></figure>
<h4 id="10-Font-Variations"><a href="#10-Font-Variations" class="headerlink" title="10.Font Variations"></a>10.Font Variations</h4><table>
<thead>
<tr>
<th>key</th>
<th>value</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCTFontVariationAxisIdentifierKey</td>
<td>CFNumberRef</td>
<td>axis identifier</td>
</tr>
<tr>
<td>kCTFontVariationAxisMinimumValueKey</td>
<td>CFNumberRef</td>
<td>minimum axis</td>
</tr>
<tr>
<td>kCTFontVariationAxisMaximumValueKey</td>
<td>CFNumberRef</td>
<td>maximum axis</td>
</tr>
<tr>
<td>kCTFontVariationAxisDefaultValueKey</td>
<td>CFNumberRef</td>
<td>default axis</td>
</tr>
<tr>
<td>kCTFontVariationAxisNameKey</td>
<td>CFNumberRef</td>
<td>the localized variation axis name.</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontCopyVariationAxes( CTFontRef font ) CT_AVAILABLE(10_5, 3_2)</div><div class="line">具体干嘛用的不知道</div><div class="line"></div><div class="line">代码：</div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    NSArray * axisArr =(__bridge NSArray *) CTFontCopyVariationAxes(font);</div><div class="line">    NSLog(@&quot;font axis Arr %@&quot;,axisArr);</div><div class="line"></div><div class="line">结果：</div><div class="line">2017-03-02 10:26:35.298 CoreTextDemo[50287:1355486] font axis Arr (</div><div class="line">    	&#123;</div><div class="line">	NSCTVariationAxisMaximumValue = 1.9989,</div><div class="line">	NSCTVariationAxisMinimumValue = 0,</div><div class="line">	NSCTVariationAxisIdentifier = 2003265652,</div><div class="line">	NSCTVariationAxisDefaultValue = 1,</div><div class="line">	NSCTVariationAxisName = Weight,</div><div class="line">	&#125;</div><div class="line"></div><div class="line">)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">CFDictionaryRef __nullable CTFontCopyVariation( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line"></div><div class="line">代码：</div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    NSDictionary * axesdic = (__bridge NSDictionary *)CTFontCopyVariationAxes(font);</div><div class="line">    NSLog(@&quot;font axes dic %@&quot;,axesdic);</div><div class="line">结果：</div><div class="line">2017-03-02 10:30:01.138 CoreTextDemo[50305:1358978] font axes dic (</div><div class="line">    	&#123;</div><div class="line">	NSCTVariationAxisMaximumValue = 1.9989,</div><div class="line">	NSCTVariationAxisMinimumValue = 0,</div><div class="line">	NSCTVariationAxisIdentifier = 2003265652,</div><div class="line">	NSCTVariationAxisDefaultValue = 1,</div><div class="line">	NSCTVariationAxisName = Weight,</div><div class="line">	&#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<h4 id="11-Font-Features"><a href="#11-Font-Features" class="headerlink" title="11.Font Features"></a>11.Font Features</h4><table>
<thead>
<tr>
<th>key</th>
<th>value</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCTFontOpenTypeFeatureTag</td>
<td>CFStringRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontOpenTypeFeatureValue</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeatureTypeIdentifierKey</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeatureTypeNameKey</td>
<td>CFString</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeatureTypeExclusiveKey</td>
<td>CFBoolean</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeatureTypeSelectorsKey</td>
<td>CFArrayRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeatureSelectorIdentifierKey</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeatureSelectorNameKey</td>
<td>CFStringRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeatureSelectorDefaultKey</td>
<td>CFBooleanRef</td>
<td></td>
</tr>
<tr>
<td>kCTFontFeatureSelectorSettingKey</td>
<td>CFBooleanRef</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontCopyFeatures( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line"></div><div class="line">代码：</div><div class="line">    CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">    NSArray *   fontFeatures = (__bridge NSArray *)CTFontCopyFeatures(font);</div><div class="line">    NSLog(@&quot;font Features %@&quot;,fontFeatures);</div><div class="line"></div><div class="line"></div><div class="line">结果：</div><div class="line">(</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeIdentifier = 0;</div><div class="line">        CTFeatureTypeName = &quot;All Typographic Features&quot;;</div><div class="line">        CTFeatureTypeNameID = &quot;-100&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorDefault = 1;</div><div class="line">                CTFeatureSelectorIdentifier = 0;</div><div class="line">                CTFeatureSelectorName = On;</div><div class="line">                CTFeatureSelectorNameID = &quot;-101&quot;;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;,</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeIdentifier = 1;</div><div class="line">        CTFeatureTypeName = Ligatures;</div><div class="line">        CTFeatureTypeNameID = &quot;-200&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorDefault = 1;</div><div class="line">                CTFeatureSelectorIdentifier = 2;</div><div class="line">                CTFeatureSelectorName = &quot;Common Ligatures&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-203&quot;;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;,</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeExclusive = 1;</div><div class="line">        CTFeatureTypeIdentifier = 6;</div><div class="line">        CTFeatureTypeName = &quot;Number Spacing&quot;;</div><div class="line">        CTFeatureTypeNameID = &quot;-700&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 0;</div><div class="line">                CTFeatureSelectorName = &quot;Monospaced Numbers&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-701&quot;;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 1;</div><div class="line">                CTFeatureSelectorName = &quot;Proportional Numbers&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-702&quot;;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorDefault = 1;</div><div class="line">                CTFeatureSelectorIdentifier = 4;</div><div class="line">                CTFeatureSelectorName = &quot;No Change&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-705&quot;;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;,</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeExclusive = 1;</div><div class="line">        CTFeatureTypeIdentifier = 10;</div><div class="line">        CTFeatureTypeName = &quot;Vertical Position&quot;;</div><div class="line">        CTFeatureTypeNameID = &quot;-1100&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorDefault = 1;</div><div class="line">                CTFeatureSelectorIdentifier = 0;</div><div class="line">                CTFeatureSelectorName = &quot;Normal Vertical Position&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-1101&quot;;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 1;</div><div class="line">                CTFeatureSelectorName = &quot;Superiors/Superscripts&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-1102&quot;;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 2;</div><div class="line">                CTFeatureSelectorName = &quot;Inferiors/Subscripts&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-1103&quot;;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;,</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeExclusive = 1;</div><div class="line">        CTFeatureTypeIdentifier = 11;</div><div class="line">        CTFeatureTypeName = &quot;Contextual Fractional Forms&quot;;</div><div class="line">        CTFeatureTypeNameID = &quot;-1200&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorDefault = 1;</div><div class="line">                CTFeatureSelectorIdentifier = 0;</div><div class="line">                CTFeatureSelectorName = &quot;No Fractional Forms&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-1201&quot;;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 2;</div><div class="line">                CTFeatureSelectorName = Diagonal;</div><div class="line">                CTFeatureSelectorNameID = &quot;-1203&quot;;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;,</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeIdentifier = 33;</div><div class="line">        CTFeatureTypeName = &quot;Case-Sensitive Layout&quot;;</div><div class="line">        CTFeatureTypeNameID = &quot;-3400&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 0;</div><div class="line">                CTFeatureSelectorName = &quot;Capital Forms&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-3401&quot;;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;,</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeIdentifier = 35;</div><div class="line">        CTFeatureTypeName = &quot;Alternative Stylistic Sets&quot;;</div><div class="line">        CTFeatureTypeNameID = &quot;-3600&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 2;</div><div class="line">                CTFeatureSelectorName = &quot;Straight-sided six and nine&quot;;</div><div class="line">                CTFeatureSelectorNameID = 256;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 4;</div><div class="line">                CTFeatureSelectorName = &quot;Open four&quot;;</div><div class="line">                CTFeatureSelectorNameID = 257;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 6;</div><div class="line">                CTFeatureSelectorName = &quot;Vertically centered colon&quot;;</div><div class="line">                CTFeatureSelectorNameID = 258;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 12;</div><div class="line">                CTFeatureSelectorName = &quot;High legibility&quot;;</div><div class="line">                CTFeatureSelectorNameID = 259;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 14;</div><div class="line">                CTFeatureSelectorName = &quot;One storey a&quot;;</div><div class="line">                CTFeatureSelectorNameID = 260;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;,</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeIdentifier = 36;</div><div class="line">        CTFeatureTypeName = &quot;Contextual Alternates&quot;;</div><div class="line">        CTFeatureTypeNameID = &quot;-3700&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorDefault = 1;</div><div class="line">                CTFeatureSelectorIdentifier = 0;</div><div class="line">                CTFeatureSelectorName = &quot;Contextual Alternates&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-3701&quot;;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;,</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeExclusive = 1;</div><div class="line">        CTFeatureTypeIdentifier = 37;</div><div class="line">        CTFeatureTypeName = &quot;Lower Case&quot;;</div><div class="line">        CTFeatureTypeNameID = &quot;-3800&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorDefault = 1;</div><div class="line">                CTFeatureSelectorIdentifier = 0;</div><div class="line">                CTFeatureSelectorName = &quot;No Change&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-3801&quot;;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 1;</div><div class="line">                CTFeatureSelectorName = &quot;Small Capitals&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-3802&quot;;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;,</div><div class="line">        &#123;</div><div class="line">        CTFeatureTypeExclusive = 1;</div><div class="line">        CTFeatureTypeIdentifier = 38;</div><div class="line">        CTFeatureTypeName = &quot;Upper Case&quot;;</div><div class="line">        CTFeatureTypeNameID = &quot;-3900&quot;;</div><div class="line">        CTFeatureTypeSelectors =         (</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorDefault = 1;</div><div class="line">                CTFeatureSelectorIdentifier = 0;</div><div class="line">                CTFeatureSelectorName = &quot;No Change&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-3901&quot;;</div><div class="line">            &#125;,</div><div class="line">                        &#123;</div><div class="line">                CTFeatureSelectorIdentifier = 1;</div><div class="line">                CTFeatureSelectorName = &quot;Small Capitals&quot;;</div><div class="line">                CTFeatureSelectorNameID = &quot;-3902&quot;;</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontCopyFeatureSettings( CTFontRef font ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">代码：</div><div class="line">	   CTFontRef  font =(__bridge CTFontRef)  [UIFont systemFontOfSize:24];</div><div class="line">    </div><div class="line">   NSArray * fontSettingsFeatre =(__bridge NSArray * ) CTFontCopyFeatureSettings(font);</div><div class="line">    NSLog(@&quot;font features settings %@&quot;,fontSettingsFeatre);</div><div class="line">    </div><div class="line">结果：</div><div class="line">2017-03-02 10:44:46.354 CoreTextDemo[50763:1374128] font features settings (null)</div></pre></td></tr></table></figure>
<h4 id="12-Font-Conversion"><a href="#12-Font-Conversion" class="headerlink" title="12.Font Conversion"></a>12.Font Conversion</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CGFontRef CTFontCopyGraphicsFont(</div><div class="line">    CTFontRef           font,</div><div class="line">    CTFontDescriptorRef __nullable * __nullable attributes ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">    </div><div class="line"> 讲CTfontRef 转换成CGFontRef</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CTFontRef CTFontCreateWithGraphicsFont(</div><div class="line">    CGFontRef                   graphicsFont,</div><div class="line">    CGFloat                     size,</div><div class="line">    const CGAffineTransform * __nullable matrix,</div><div class="line">    CTFontDescriptorRef __nullable attributes ) CT_AVAILABLE(10_5, 3_2);</div><div class="line"> 将CGfontRef 转换成CTFontRef</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ATSFontRef CTFontGetPlatformFont(</div><div class="line">    CTFontRef               font,</div><div class="line">    CTFontDescriptorRef __nullable * __nullable attributes ) CT_AVAILABLE_MAC(10_5);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CTFontRef __nullable CTFontCreateWithPlatformFont(</div><div class="line">    ATSFontRef                  platformFont,</div><div class="line">    CGFloat                     size,</div><div class="line">    const CGAffineTransform * __nullable matrix,</div><div class="line">    CTFontDescriptorRef __nullable attributes ) CT_AVAILABLE_MAC(10_5);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CTFontRef CTFontCreateWithQuickdrawInstance(</div><div class="line">    ConstStr255Param __nullable name,</div><div class="line">    int16_t             identifier,</div><div class="line">    uint8_t             style,</div><div class="line">    CGFloat             size ) CT_AVAILABLE_MAC(10_5);</div></pre></td></tr></table></figure>
<h4 id="13-Font-Tables"><a href="#13-Font-Tables" class="headerlink" title="13.Font Tables"></a>13.Font Tables</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">enum &#123;</div><div class="line">    kCTFontTableBASE    = &apos;BASE&apos;,   // Baseline</div><div class="line">    kCTFontTableCFF     = &apos;CFF &apos;,   // PostScript font program</div><div class="line">    kCTFontTableDSIG    = &apos;DSIG&apos;,   // Digital signature</div><div class="line">    kCTFontTableEBDT    = &apos;EBDT&apos;,   // Embedded bitmap</div><div class="line">    kCTFontTableEBLC    = &apos;EBLC&apos;,   // Embedded bitmap location</div><div class="line">    kCTFontTableEBSC    = &apos;EBSC&apos;,   // Embedded bitmap scaling</div><div class="line">    kCTFontTableGDEF    = &apos;GDEF&apos;,   // Glyph definition</div><div class="line">    kCTFontTableGPOS    = &apos;GPOS&apos;,   // Glyph positioning</div><div class="line">    kCTFontTableGSUB    = &apos;GSUB&apos;,   // Glyph substitution</div><div class="line">    kCTFontTableJSTF    = &apos;JSTF&apos;,   // Justification</div><div class="line">    kCTFontTableLTSH    = &apos;LTSH&apos;,   // Linear threshold</div><div class="line">    kCTFontTableMATH    = &apos;MATH&apos;,   // Math</div><div class="line">    kCTFontTableOS2     = &apos;OS/2&apos;,   // OS/2 and Windows specific metrics</div><div class="line">    kCTFontTablePCLT    = &apos;PCLT&apos;,   // PCL 5 data</div><div class="line">    kCTFontTableVDMX    = &apos;VDMX&apos;,   // Vertical device metrics</div><div class="line">    kCTFontTableVORG    = &apos;VORG&apos;,   // Vertical origin</div><div class="line">    kCTFontTableZapf    = &apos;Zapf&apos;,   // Glyph reference</div><div class="line">    kCTFontTableAcnt    = &apos;acnt&apos;,   // Accent attachment</div><div class="line">    kCTFontTableAnkr    = &apos;ankr&apos;,   // Anchor points</div><div class="line">    kCTFontTableAvar    = &apos;avar&apos;,   // Axis variation</div><div class="line">    kCTFontTableBdat    = &apos;bdat&apos;,   // Bitmap data</div><div class="line">    kCTFontTableBhed    = &apos;bhed&apos;,   // Bitmap font header</div><div class="line">    kCTFontTableBloc    = &apos;bloc&apos;,   // Bitmap location</div><div class="line">    kCTFontTableBsln    = &apos;bsln&apos;,   // Baseline</div><div class="line">    kCTFontTableCmap    = &apos;cmap&apos;,   // Character to glyph mapping</div><div class="line">    kCTFontTableCvar    = &apos;cvar&apos;,   // CVT variation</div><div class="line">    kCTFontTableCvt     = &apos;cvt &apos;,   // Control value table</div><div class="line">    kCTFontTableFdsc    = &apos;fdsc&apos;,   // Font descriptor</div><div class="line">    kCTFontTableFeat    = &apos;feat&apos;,   // Layout feature</div><div class="line">    kCTFontTableFmtx    = &apos;fmtx&apos;,   // Font metrics</div><div class="line">    kCTFontTableFpgm    = &apos;fpgm&apos;,   // Font program</div><div class="line">    kCTFontTableFvar    = &apos;fvar&apos;,   // Font variation</div><div class="line">    kCTFontTableGasp    = &apos;gasp&apos;,   // Grid-fitting/Scan-conversion</div><div class="line">    kCTFontTableGlyf    = &apos;glyf&apos;,   // Glyph data</div><div class="line">    kCTFontTableGvar    = &apos;gvar&apos;,   // Glyph variation</div><div class="line">    kCTFontTableHdmx    = &apos;hdmx&apos;,   // Horizontal device metrics</div><div class="line">    kCTFontTableHead    = &apos;head&apos;,   // Font header</div><div class="line">    kCTFontTableHhea    = &apos;hhea&apos;,   // Horizontal header</div><div class="line">    kCTFontTableHmtx    = &apos;hmtx&apos;,   // Horizontal metrics</div><div class="line">    kCTFontTableHsty    = &apos;hsty&apos;,   // Horizontal style</div><div class="line">    kCTFontTableJust    = &apos;just&apos;,   // Justification</div><div class="line">    kCTFontTableKern    = &apos;kern&apos;,   // Kerning</div><div class="line">    kCTFontTableKerx    = &apos;kerx&apos;,   // Extended kerning</div><div class="line">    kCTFontTableLcar    = &apos;lcar&apos;,   // Ligature caret</div><div class="line">    kCTFontTableLtag    = &apos;ltag&apos;,   // Language tags</div><div class="line">    kCTFontTableLoca    = &apos;loca&apos;,   // Index to location</div><div class="line">    kCTFontTableMaxp    = &apos;maxp&apos;,   // Maximum profile</div><div class="line">    kCTFontTableMort    = &apos;mort&apos;,   // Morph</div><div class="line">    kCTFontTableMorx    = &apos;morx&apos;,   // Extended morph</div><div class="line">    kCTFontTableName    = &apos;name&apos;,   // Naming table</div><div class="line">    kCTFontTableOpbd    = &apos;opbd&apos;,   // Optical bounds</div><div class="line">    kCTFontTablePost    = &apos;post&apos;,   // PostScript information</div><div class="line">    kCTFontTablePrep    = &apos;prep&apos;,   // CVT program</div><div class="line">    kCTFontTableProp    = &apos;prop&apos;,   // Properties</div><div class="line">    kCTFontTableSbit    = &apos;sbit&apos;,   // Bitmap data</div><div class="line">    kCTFontTableSbix    = &apos;sbix&apos;,   // Extended bitmap data</div><div class="line">    kCTFontTableTrak    = &apos;trak&apos;,   // Tracking</div><div class="line">    kCTFontTableVhea    = &apos;vhea&apos;,   // Vertical header</div><div class="line">    kCTFontTableVmtx    = &apos;vmtx&apos;    // Vertical metrics</div><div class="line">&#125;;</div><div class="line">typedef FourCharCode CTFontTableTag;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">typedef CF_OPTIONS(uint32_t, CTFontTableOptions) &#123;</div><div class="line">    kCTFontTableOptionNoOptions CT_ENUM_AVAILABLE(10_5, 3_2) = 0,</div><div class="line">    kCTFontTableOptionExcludeSynthetic CT_ENUM_DEPRECATED(10_5, 10_8, 3_2, 6_0) = (1 &lt;&lt; 0)</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CFArrayRef __nullable CTFontCopyAvailableTables(</div><div class="line">    CTFontRef           font,</div><div class="line">    CTFontTableOptions  options ) CT_AVAILABLE(10_5, 3_2);</div><div class="line">    </div><div class="line">    运行崩溃</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CFDataRef __nullable CTFontCopyTable(</div><div class="line">    CTFontRef           font,</div><div class="line">    CTFontTableTag      table,</div><div class="line">    CTFontTableOptions  options ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">void CTFontDrawGlyphs(</div><div class="line">    CTFontRef       font, </div><div class="line">    const CGGlyph   glyphs[], </div><div class="line">    const CGPoint   positions[], </div><div class="line">    size_t          count, </div><div class="line">    CGContextRef    context ) CT_AVAILABLE(10_7, 4_2);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CFIndex CTFontGetLigatureCaretPositions(</div><div class="line">    CTFontRef       font,</div><div class="line">    CGGlyph         glyph,</div><div class="line">    CGFloat * __nullable positions,</div><div class="line">    CFIndex         maxPositions ) CT_AVAILABLE(10_5, 3_2);</div></pre></td></tr></table></figure>
<h4 id="14-Baseline-Alignment"><a href="#14-Baseline-Alignment" class="headerlink" title="14.Baseline Alignment"></a>14.Baseline Alignment</h4><table>
<thead>
<tr>
<th>key</th>
<th>value</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>kCTBaselineClassRoman</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTBaselineClassIdeographicCentered</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTBaselineClassIdeographicLow</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTBaselineClassIdeographicHigh</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTBaselineClassHanging</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTBaselineClassMath</td>
<td>CFNumberRef</td>
<td></td>
</tr>
<tr>
<td>kCTBaselineReferenceFont</td>
<td>CTFontRef</td>
<td></td>
</tr>
<tr>
<td>kCTBaselineOriginalFont</td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">CFArrayRef __nullable CTFontCopyDefaultCascadeListForLanguages( CTFontRef font, CFArrayRef __nullable languagePrefList )</div></pre></td></tr></table></figure>
<h3 id="CTGlyphInfo-h"><a href="#CTGlyphInfo-h" class="headerlink" title="CTGlyphInfo.h"></a>CTGlyphInfo.h</h3><h3 id="CTParagraphStyle-h"><a href="#CTParagraphStyle-h" class="headerlink" title="CTParagraphStyle.h"></a>CTParagraphStyle.h</h3><h3 id="CTTextTab-h"><a href="#CTTextTab-h" class="headerlink" title="CTTextTab.h"></a>CTTextTab.h</h3><h3 id="CTRunDelegate-h"><a href="#CTRunDelegate-h" class="headerlink" title="CTRunDelegate.h"></a>CTRunDelegate.h</h3><h3 id="CTRubyAnnotation-h"><a href="#CTRubyAnnotation-h" class="headerlink" title="CTRubyAnnotation.h"></a>CTRubyAnnotation.h</h3><h3 id="SFNTLayoutTypes-h"><a href="#SFNTLayoutTypes-h" class="headerlink" title="SFNTLayoutTypes.h"></a>SFNTLayoutTypes.h</h3><h3 id="SFNTTypes-h"><a href="#SFNTTypes-h" class="headerlink" title="SFNTTypes.h"></a>SFNTTypes.h</h3><p>### </p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/23/coretext-framework-大全/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-18-mu-qian-chang-yong-di-san-fang-cha-jian" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/18/2015-08-18-mu-qian-chang-yong-di-san-fang-cha-jian/">目前常用第三方插件</a>
    </h1>
  

        
        <a href="/2015/08/18/2015-08-18-mu-qian-chang-yong-di-san-fang-cha-jian/" class="archive-article-date">
  	<time datetime="2015-08-18T06:23:43.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目前我在用的开发插件</p>
<p>1、xcode生成规范注释</p>
<p>VVDocumenter-Xcode <a href="https://github.com/onevcat/VVDocumenter-Xcode.git" target="_blank" rel="external">github地址</a></p>
<p><img src="/images/xcode.gif" alt="image"></p>
<p>我改了几行源码就成上面的样子了.<a href="http://pan.baidu.com/s/1bn8X7vL" target="_blank" rel="external">代码</a></p>
<p>安装出现问题可以参考<a href="http://www.bubuko.com/infodetail-922634.html" target="_blank" rel="external">这里</a></p>
<p>安装VVDocumenter-Xcode ，Xcode 6之后，重启Xcode时会提示“Load bundle”、 “Skip Bundle”，这里必须选择“Load bundle”，不然插件无法使用。但skip是你不小心点击<strong>“Skip Bundle”</strong><br> 你可以执行下面命令</p>
<pre><code>defaults delete com.apple.dt.Xcode DVTPlugInManagerNonApplePlugIns-Xcode-{your_xcode_version}
</code></pre><p>清除你的错误选择</p>
<pre><code>我的xcode是6.4 命令为
defaults delete com.apple.dt.Xcode DVTPlugInManagerNonApplePlugIns-Xcode-6.4
</code></pre><p>2、生成gif图的工具</p>
<p>licecap 这个工具是免费的 网上搜下到处都是就不提供链接了。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/18/2015-08-18-mu-qian-chang-yong-di-san-fang-cha-jian/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-18-geng-gai-xcodesheng-cheng-mei-ge-wen-jian-tou-xin-xi" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/18/2015-08-18-geng-gai-xcodesheng-cheng-mei-ge-wen-jian-tou-xin-xi/">更改xcode生成每个文件头信息</a>
    </h1>
  

        
        <a href="/2015/08/18/2015-08-18-geng-gai-xcodesheng-cheng-mei-ge-wen-jian-tou-xin-xi/" class="archive-article-date">
  	<time datetime="2015-08-18T02:13:11.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>修改xocde文件 的头信息</p>
<blockquote>
<p>点击工程文件</p>
<p>点击右边的文件设置窗口</p>
<p>配置project Document 选项中的相关信息</p>
</blockquote>
<p><img src="/images/xcodeSix.jpeg" alt="image"></p>
<p>上图第四步 class Prefix 是配置文件头，生成每个类前的头</p>
<p><img src="/images/xcodeFileFour.png" alt="image"> </p>
<p>organization 是配置文件中的    <strong>科技</strong>        位置的字</p>
<p><img src="/images/xcodeFileFive.png" alt="image"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/18/2015-08-18-geng-gai-xcodesheng-cheng-mei-ge-wen-jian-tou-xin-xi/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-17-avfoundation-dot-fromworkde-xue-xi" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/17/2015-08-17-avfoundation-dot-fromworkde-xue-xi/">AVFoundation.framework的学习</a>
    </h1>
  

        
        <a href="/2015/08/17/2015-08-17-avfoundation-dot-fromworkde-xue-xi/" class="archive-article-date">
  	<time datetime="2015-08-17T09:15:52.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-17</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近学习自定义相机的相关知识，可以自定义相机成功，但是对AVFoundation不是很了解，这里有必要对这个AVFoundation.framework。</p>
<p>（感觉写点东西咋这么困难）</p>
<p>##学习类对象</p>
<blockquote>
<p>AVCaptureSession、AVCaptureInput 和    AVCaptureOutput 的学习</p>
</blockquote>
<pre><code>AVCaptureInput is an abstract base-class describing an input data source to an AVCaptureSession object. 

AVCaptureOutput is an abstract base class describing an output destination of an AVCaptureSession object

You use an AVCaptureSession object to coordinate the flow of data from AV input devices to outputs
</code></pre><p>#####参考连接<br><a href="https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVFoundationFramework/" target="_blank" rel="external">苹果AVFoundation ref</a></p>
<p><a href="https://developer.apple.com/library/prerelease/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html" target="_blank" rel="external">苹果AVFoundation Programming Guide</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/17/2015-08-17-avfoundation-dot-fromworkde-xue-xi/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-12-zi-ding-yi-xiang-ji" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/12/2015-08-12-zi-ding-yi-xiang-ji/">自定义相机</a>
    </h1>
  

        
        <a href="/2015/08/12/2015-08-12-zi-ding-yi-xiang-ji/" class="archive-article-date">
  	<time datetime="2015-08-12T03:31:08.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-12</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##调用系统相机</p>
<p>调用系统相机一般的功能是可以满足的，如果没有特殊的要求要求，可以直接用系统相机。</p>
<p>代码如下：</p>
<pre><code>调用照相机

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {

    UIImagePickerController * picker = [[UIImagePickerController alloc]init];
    picker.delegate = self;
    block(picker);
    //摄像头
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    [self presentViewController:picker animated:YES completion:^{

    }];
}else{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@&quot;Error&quot; message:@&quot;你没有摄像头&quot; delegate:nil cancelButtonTitle:@&quot;Drat!&quot; otherButtonTitles:nil];
    [alert show];

}
</code></pre><p>获取图片或者取消图片实现代理</p>
<pre><code>- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

UIImage * image = [info objectForKey:UIImagePickerControllerOriginalImage];
if ([self respondsToSelector:@selector(getCameraImage:)]) {
    [self getCameraImage:image];
}
[self dismissViewControllerAnimated:YES completion:^{

}];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
[self dismissViewControllerAnimated:YES completion:^{

}];
}
</code></pre><p>以上代码只是简单的调用下系统相机。并没有对相机进行相关设置。</p>
<p>配置前</p>
<p><img src="/images/comera1.jpg" alt="image"></p>
<pre><code>注意将系统相机配置成中文 ，在工程文件plist 中添加下面一项即可。
</code></pre><p><img src="/images/camerasytemChinese.png" alt="image"></p>
<p>配置后</p>
<p><img src="/images/comera2.jpg" alt="image"></p>
<p>##自定义相机</p>
<pre><code>我个人偏向用自定义相机，个人理由只有一条，可以高度定制。（虽然有点麻烦）

暂时更新到这里（哈哈。没有上下文了。）我发现学习相机还是先系统学习学习avfoudation.framework 比较靠谱些。学完av 再回来学喽
</code></pre><p>#####参考连接</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/12/2015-08-12-zi-ding-yi-xiang-ji/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-11-jin-jun-er-wei-ma-,cong-ling-kai-shi-xue-xi-er-wei-ma" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/11/2015-08-11-jin-jun-er-wei-ma-,cong-ling-kai-shi-xue-xi-er-wei-ma/">进军二维码，从零开始学习二维码</a>
    </h1>
  

        
        <a href="/2015/08/11/2015-08-11-jin-jun-er-wei-ma-,cong-ling-kai-shi-xue-xi-er-wei-ma/" class="archive-article-date">
  	<time datetime="2015-08-11T10:30:03.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-11</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>做项目挺久的了，但是二维码这块总是用别人写好的，自己从来没有操过刀，内心有点小不爽啊，今天索性就写个博客，自己给自己定定需要，学学学习二维码。</p>
<pre><code>二维条码/二维码（2-dimensional bar code）是用某种特定的几何图形按一定规律在平面（二维方向上）分布的黑白相间的图形记录数据符号信息的；在代码编制上巧妙地利用构成计算机内部逻辑基础的“0”、“1”比特流的概念，使用若干个与二进制相对应的几何形体来表示文字数值信息，通过图象输入设备或光电扫描设备自动识读以实现信息自动处理：它具有条码技术的一些共性：每种码制有其特定的字符集；每个字符占有一定的宽度；具有一定的校验功能等。同时还具有对不同行的信息自动识别功能、及处理图形旋转变化点。
</code></pre><h2 id="二维码扫描"><a href="#二维码扫描" class="headerlink" title="二维码扫描"></a>二维码扫描</h2><p>现在都是2015年了。就不研究ZBar和ZXing了。今天要介绍的是iOS7.0后AVFoundation框架提供的原生二维码扫描。</p>
<h2 id="二维码生成"><a href="#二维码生成" class="headerlink" title="二维码生成"></a>二维码生成</h2><p>#####参考链接</p>
<p><a href="http://" target="_blank" rel="external">二维码百度百科</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/11/2015-08-11-jin-jun-er-wei-ma-,cong-ling-kai-shi-xue-xi-er-wei-ma/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-10-cgaffinetransform-dot-hlei-de-xue-xi-he-yuan-li-jiang-jie" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/10/2015-08-10-cgaffinetransform-dot-hlei-de-xue-xi-he-yuan-li-jiang-jie/">CGAffineTransform.h类的学习和原理讲解</a>
    </h1>
  

        
        <a href="/2015/08/10/2015-08-10-cgaffinetransform-dot-hlei-de-xue-xi-he-yuan-li-jiang-jie/" class="archive-article-date">
  	<time datetime="2015-08-10T07:25:44.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-10</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> 第一次写ios相关技术博客，所以先写个简单的，写的不好大家多多提意见。<br> 想学好这个类，我感觉最好还是从理论上弄明白什么二维图形到底是怎么变换的。</p>
<h2 id="矩阵及其运算"><a href="#矩阵及其运算" class="headerlink" title="矩阵及其运算"></a>矩阵及其运算</h2><blockquote>
<p>一．数学概念<br>定义1.1 由<img src="/images/juzhen1.gif" alt="image">个数<img src="/images/juzhen2.gif" alt="image">   排成m行n列的数表<br><img src="/images/juzhen3.gif" alt="image"></p>
</blockquote>
<p>称为m行n列的矩阵，简称   矩阵，记作</p>
<p><img src="/images/juzhen4.gif" alt="image"></p>
<blockquote>
<p>二．原理，公式和法则</p>
</blockquote>
<p>1．矩阵的加法<br>(1) 公式</p>
<p> <img src="/images/juzhen5.gif" alt="image"></p>
<p>  (2) 运算律</p>
<p> <img src="/images/juzhen6.gif" alt="image"></p>
<p> 2．数乘矩阵<br> (1) 公式</p>
<p>  <img src="/images/juzhen7.gif" alt="image"></p>
<p>(2) 运算律<br>  <img src="/images/juzhen8.gif" alt="image"></p>
<p> 3．矩阵与矩阵相乘<br> (1) 设 <img src="/images/juzhen9.gif" alt="image">  ,<br> 则 <img src="/images/juzhen10.gif" alt="image">  其中 <img src="/images/juzhen11.gif" alt="image">  ，且</p>
<p><img src="/images/juzhen12.gif" alt="image"> </p>
<p>（2）　运算符(假设运算都是可行的)：</p>
<p><img src="/images/juzhen13.gif" alt="image"> </p>
<p>(3)　方阵的运算</p>
<p><img src="/images/juzhen14.gif" alt="image"> </p>
<p>注意：①矩阵乘法一般不满足交换律。<br>②一般 <img src="/images/juzhen15.gif" alt="image"> </p>
<p>4.矩阵的转置<br>(1)　公式</p>
<p><img src="/images/juzhen16.png" alt="image"> </p>
<p><img src="/images/juzhen17.png" alt="image"> </p>
<p> (2)　运算律</p>
<p> <img src="/images/juzhen18.gif" alt="image"> </p>
<p> 5.方阵的行列式</p>
<p><img src="/images/juzhen19.png" alt="image"> </p>
<p>6.共轭矩阵</p>
<p><img src="/images/juzhen20.png" alt="image"> </p>
<p>上面一定要看懂矩阵的乘法是怎么运算的才行。</p>
<h2 id="数学原理"><a href="#数学原理" class="headerlink" title="数学原理"></a>数学原理</h2><blockquote>
<p>1、基本几何变换及变换矩阵</p>
</blockquote>
<p>基本几何变换都是相对于坐标原点和坐标轴进行的几何变换，有平移、比例、旋转、反射和错切等</p>
<p><strong>1.1 平移变换</strong></p>
<p>是指将p点沿直线路径从一个坐标位置移到另一个坐标位置的重定位过程。他是一种不产生变形而移动物体的刚体变换（rigid-body transformation），如下图所示。</p>
<p><img src="/images/juzhen21.png" alt="image"></p>
<p> 推导：</p>
<p> <img src="/images/juzhen22.png" alt="image"></p>
<pre><code>    解释(个人理解)
    x&apos;=x+Tx  相当于x&apos;= x*1 + y*0 +  1 * Tx
    y&apos;=y+Ty  相当于y&apos;= x*0 + y*1 +  1 * Ty

    所以 A 矩阵  [x  y 1]
         C 矩阵要和A矩阵格式一样 [x&apos; y&apos; 1]
        c矩阵的1 怎么来。只能添加一行了

        1=x*0+y*0+ 1*1

所以b矩阵为 上面如图
</code></pre><p><strong>1.2 缩放变换</strong><br>缩放变换是指对p点相对于坐标原点沿x方向放缩Sx倍，沿y方向放缩Sy倍。其中Sx和Sy称为缩放系数。</p>
<p><img src="/images/juzhen23.png" alt="image"><br>推导：</p>
<p><img src="/images/juzhen24.png" alt="image">    </p>
<p>  矩阵<br><img src="/images/juzhen25.png" alt="image">        </p>
<pre><code>x&apos;=x*Sx+y*0 + 0*0;
y&apos;=x*0 +y *Sy+0*0;
0=x*0+y*0+0*1;
</code></pre><p>缩放变换可改变物体的大小，如下图所示。当Sx=Sy &gt;1时，图形沿两个坐标轴方向等比例放大；当Sx=Sy&lt;1，图形沿两个坐标轴方向等比例缩小；当Sx≠Sy，图形沿两个坐标轴方向作非均匀的比例变换。                        </p>
<p><img src="/images/juzhen26.png" alt="image">        </p>
<p>  <strong>1.3 旋转变换</strong></p>
<p>二维旋转是指将p点绕坐标原点转动某个角度（逆时针为正，顺时针为负）得到新的点p’的重定位过程。</p>
<p><img src="/images/juzhen27.png" alt="image">    </p>
<p> 推导：利用极坐标方程</p>
<p><img src="/images/juzhen28.png" alt="image">    </p>
<p>逆时针旋转θ角的矩阵如下：</p>
<p><img src="/images/juzhen29.png" alt="image">    </p>
<p><strong>1.4 对称变换</strong></p>
<p>对称变换后的图形是原图形关于某一轴线或原点的镜像。<br><img src="/images/juzhen30.png" alt="image"></p>
<p>  (1)关于x轴对称</p>
<p><img src="/images/juzhen31.png" alt="image">    </p>
<pre><code>x&apos;=x*1+y*0+0*0;
y&apos;=x*0+y*(-1)+0*0;
0=x*0+y*0+0*1;
</code></pre><p> (2)关于y轴对称</p>
<p> <img src="/images/juzhen33.png" alt="image">    </p>
<p>  (3)关于原点对称</p>
<p>  <img src="/images/juzhen34.png" alt="image">    </p>
<p>  (4)关于y=x轴对称</p>
<p>   <img src="/images/juzhen35.png" alt="image"></p>
<p>   (5)关于y=-x轴对称</p>
<p>   <img src="/images/juzhen36.png" alt="image"></p>
<p><strong>1.5 错切变换</strong></p>
<p>错切变换也称为剪切、错位变换，用于产生弹性物体的变形处理。</p>
<p>   <img src="/images/juzhen37.png" alt="image"></p>
<p> 错切变换的变换矩阵为：</p>
<p>   <img src="/images/juzhen38.png" alt="image"></p>
<p>   (1)沿x方向错切：b=0<br>   (2)沿y方向错切：c=0<br>   (3)两个方向错切：b和c都不等于0。</p>
<blockquote>
<p>2、 复合变换</p>
</blockquote>
<p>如果图形要做一次以上的几何变换，那么可以将各个变换矩阵综合起来进行一步到位的变换。复合变换有如下的性质：</p>
<p><strong>1）复合平移</strong></p>
<p>对同一图形做两次平移相当于将两次的平移两加起来：</p>
<p> <img src="/images/juzhen39.png" alt="image"></p>
<p> <strong>2）复合缩放</strong></p>
<p>两次连续的缩放相当于将缩放操作相乘：</p>
<p> <img src="/images/juzhen40.png" alt="image"></p>
<p><strong>3）复合旋转</strong></p>
<p>两次连续的旋转相当于将两次的旋转角度相加： </p>
<p> <img src="/images/juzhen41.png" alt="image"></p>
<pre><code>缩放、旋转变换都与参考点有关，上面进行的各种变换都是以原点为参考点的。如果相对某个一般的参考点（xf，yf）作缩放、旋转变换，相当于将该点移到坐标原点处，然后进行缩放、旋转变换，最后将（xf，yf）点移回原来的位置。
</code></pre><p><strong>4）关于（xf，yf）点的缩放变换</strong></p>
<p> <img src="/images/juzhen42.png" alt="image"></p>
<p><strong>5）绕（xf，yf）点的旋转变换</strong></p>
<p>  <img src="/images/juzhen43.png" alt="image"></p>
<blockquote>
<p>  3、二维图形几何变换的计算</p>
</blockquote>
<p>几何变换均可表示成P’=P*T的形式</p>
<p>(1)点的变换：先将点表示为规范化齐次坐标形式，再乘以变换矩阵。</p>
<p>  <img src="/images/juzhen44.png" alt="image"></p>
<p>(2)直线的变换：将直线的两个端点表示为规范化齐次坐标形式，再乘以变换矩阵。</p>
<p>  <img src="/images/juzhen45.png" alt="image"></p>
<p>(3)多边形的变换：将多边形的顶点表示为规范化齐次坐标形式，再乘以变换矩阵。</p>
<p>  <img src="/images/juzhen46.png" alt="image"></p>
<p> (4)曲线的变换：将曲线的每个点表示为规范化齐次坐标形式，再乘以变换矩阵。</p>
<blockquote>
<p> 4、复合变换的矩阵点乘的先后问题</p>
</blockquote>
<p>1)如果采用以下方式计算几何变换的变换矩阵</p>
<p><img src="/images/juzhen47.png" alt="image"></p>
<p>如上范例所示，其先执行变换的矩阵放在前面，后执行变换的矩阵放在后面。</p>
<p>2)如果采用以下方式计算几何变换的变换矩阵：</p>
<p><img src="/images/juzhen48.png" alt="image"></p>
<p>如上范例所示，其先执行变换的矩阵放在后面，后执行变换的矩阵放在前面。</p>
<p>这是因为矩阵的特性：<img src="/images/juzhen49.png" alt="image"></p>
<p>##CGAffineTransform.h 函数介绍</p>
<p>说了半天，不来点代码怎么行。    </p>
<pre><code>在CGAffineTransform.h 文件中

typedef struct CGAffineTransform CGAffineTransform;

struct CGAffineTransform {
      CGFloat a, b, c, d;
      CGFloat tx, ty;
};

矩阵数学模型是[a  b]
             c  d
            tx  ty
省略了  [a  b  0]  中的最后一列
        c  d  0
        tx ty 1
</code></pre><p> 函数介绍代码</p>
<pre><code>///获取一个标准矩阵。没有变化的矩阵
CGAffineTransform transform=  CGAffineTransformIdentity;
NSLog(@&quot;CGAffineTransformIdentity 数值%@&quot; ,     NSStringFromCGAffineTransform(transform));

///获取一个变幻矩阵 这个函数可以平移旋转和缩放
/* Return the transform [ a b c d tx ty ]. */
</code></pre><p>  transform=  CGAffineTransformMake(a, b, c, d,x,y);</p>
<pre><code>///获取一个只做平移的矩阵
//        t&apos; = [ 1 0 0 1 tx ty ]
</code></pre><p> transform=   CGAffineTransformMakeTranslation(x, y);</p>
<pre><code>///获取一个缩放矩阵
//         t&apos; = [ sx 0 0 sy 0 0 ] 
</code></pre><p>  transform=  CGAffineTransformMakeScale(a,c);</p>
<pre><code>//获取一个旋转矩阵
/* Return a transform which rotates by `angle&apos; radians:
 t&apos; = [ cos(angle) sin(angle) -sin(angle) cos(angle) 0 0 ] */
</code></pre><p>  transform=  CGAffineTransformMakeRotation(3);</p>
<pre><code>///验证是否是标准矩阵
</code></pre><p>  BOOL isTrue =  CGAffineTransformIsIdentity(transform);</p>
<pre><code>///这个是矩阵之间的换算了
/* Translate `t&apos; by `(tx, ty)&apos; and return the result:
 t&apos; = [ 1 0 0 1 tx ty ] * t */
/// 说的很明确 用只有平移的矩阵和 t 矩阵相乘 t*t&apos; 意思是在t&apos;的基础上做t 变幻（例如平移旋转等等）
transform=   CGAffineTransformTranslate(transform,x,y);

///矩阵先缩放再transform
/* Scale `t&apos; by `(sx, sy)&apos; and return the result:
 t&apos; = [ sx 0 0 sy 0 0 ] * t */
</code></pre><p>  transform=  CGAffineTransformScale(transform,a,c);</p>
<pre><code>///矩阵先旋转再transform
/* Rotate `t&apos; by `angle&apos; radians and return the result:
 t&apos; =  [ cos(angle) sin(angle) -sin(angle) cos(angle) 0 0 ] * t */
transform = CGAffineTransformRotate(transform,3);


NSLog(@&quot;CGAffineTransformInvert前 数值%@&quot; , NSStringFromCGAffineTransform(transform));
/// 获取 反转矩阵  看不出效果。做图看看  可以仔细研究下
///我看着就是沿着y轴做了一个对称变换 （不见得对）
transform =   CGAffineTransformInvert(transform);
NSLog(@&quot;CGAffineTransformInvert后 数值%@&quot; , NSStringFromCGAffineTransform(transform));


///矩阵相乘
/* Concatenate `t2&apos; to `t1&apos; and return the result:
 t&apos; = t1 * t2 */
</code></pre><p>   transform = CGAffineTransformConcat(transform,transform);</p>
<pre><code>///判断两个矩阵是否相等
/* Return true if `t1&apos; and `t2&apos; are equal, false otherwise. */
isTrue =CGAffineTransformEqualToTransform(transform,transform);

///获取一个点矩阵变幻另一个点的位置
/* Transform `point&apos; by `t&apos; and return the result:
 p&apos; = p * t
 where p = [ x y 1 ]. */
</code></pre><p>  CGPoint point=  CGPointApplyAffineTransform(CGPointMake(30, 30), transform);</p>
<pre><code>///获取一个矩形矩形变换的大小
/* Transform `size&apos; by `t&apos; and return the result:
 s&apos; = s * t
 where s = [ width height 0 ]. */
CGSize size= CGSizeApplyAffineTransform(CGSizeMake(30, 30),transform);

///获取矩形位置变幻后的位置
 CGRect rect=CGRectApplyAffineTransform(CGRectMake(0, 0, 30, 30),transform);
</code></pre><p>项目中有每个函数的具体用法。</p>
<p><img src="/images/transformNew.gif" alt="image"></p>
<p>项目托管在<a href="https://github.com/NPOpenSource/transform.github.com.git" target="_blank" rel="external">github</a> </p>
<p>#####参考文章：<br><a href="http://dec3.jlu.edu.cn/webcourse/t000022/teach/chapter2/2_1.htm" target="_blank" rel="external">矩阵定义</a></p>
<p><a href="http://blog.csdn.net/wcyoot/article/details/33310329" target="_blank" rel="external">变换原理</a></p>
<p><a href="https://developer.apple.com/library/prerelease/watchos/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_affine/dq_affine.html" target="_blank" rel="external">苹果官方文档</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/10/2015-08-10-cgaffinetransform-dot-hlei-de-xue-xi-he-yuan-li-jiang-jie/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-04-ji-lu-unixming-ling-de-shi-yong" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/04/2015-08-04-ji-lu-unixming-ling-de-shi-yong/">记录unix命令的使用</a>
    </h1>
  

        
        <a href="/2015/08/04/2015-08-04-ji-lu-unixming-ling-de-shi-yong/" class="archive-article-date">
  	<time datetime="2015-08-04T10:07:24.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-04</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>经常为在mac 终端操作，所以不得不学习一些终端命令并做下记录，方便以后查询。</p>
<p>##命令查询<br>其实所有的命令参数都是可以通过man 来查询的。</p>
<pre><code>eg：
man cd
man rm
man ls
man open
</code></pre><p>都有命令的详细使用情况</p>
<p>##命令介绍</p>
<ul>
<li>rm -rf xxx 删除文件夹xxx（包括里面的内容）</li>
<li>mkdir xxx 新建xxx文件夹</li>
<li>cd xxx 进入xxx文件夹，xxx可以是个路径</li>
<li>open . 使用Finder打开当前目录</li>
<li>open ./source 使用Finder打开当前目录下的source文件夹</li>
<li>ls 查看当面文件夹中的目录列表</li>
<li>cd .. 返回上已目录</li>
<li>rm xxx 删除文件</li>
<li>vi xxx 打开文件<br>  进入vi文件之后，q键是功能切换<pre><code>a键是插入操作
shift+q 进入退出模式。wq 写入并保存 q! 强制退出不保存
</code></pre></li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/04/2015-08-04-ji-lu-unixming-ling-de-shi-yong/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 温杰
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.2d7529.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>