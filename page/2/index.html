<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>温杰的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="温杰的博客">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="温杰的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="温杰的博客">
  
    <link rel="alternative" href="/atom.xml" title="温杰的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.2d7529.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="null" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">温杰</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="null" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">温杰</h1>
			</hgroup>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/tags/随笔/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-CTFrameSetter学习" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/CTFrameSetter学习/">CTFrameSetter.h学习</a>
    </h1>
  

        
        <a href="/2017/03/02/CTFrameSetter学习/" class="archive-article-date">
  	<time datetime="2017-03-02T05:55:02.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-02</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>创建 CTFrame 需要CTFrameSetter.h 类中</p>
<p>该类分四部分，<strong>Framesetter Types</strong> ， <strong>Framesetter Creation</strong> ，<strong>Frame Creation</strong>   ， <strong>Frame Sizing</strong></p>
<h3 id="1-Framesetter-Types"><a href="#1-Framesetter-Types" class="headerlink" title="1.Framesetter Types"></a>1.Framesetter Types</h3><p>CFTypeID CTFramesetterGetTypeID( void )  返回一个CTFramesetter 的 id 。</p>
<h3 id="2-Framesetter-Creation"><a href="#2-Framesetter-Creation" class="headerlink" title="2.Framesetter Creation"></a>2.Framesetter Creation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CTFramesetterRef CTFramesetterCreateWithAttributedString(CFAttributedStringRef string )</div><div class="line">用CFAttributedStringRef 属性字符串创建一个CTFramesetterRef</div></pre></td></tr></table></figure>
<p>获取Framesetter 只有这一种方式获取</p>
<h3 id="3-Frame-Creation"><a href="#3-Frame-Creation" class="headerlink" title="3.Frame Creation"></a>3.Frame Creation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">CTFrameRef CTFramesetterCreateFrame(</div><div class="line">	CTFramesetterRef framesetter,</div><div class="line">	CFRange stringRange,</div><div class="line">	CGPathRef path,</div><div class="line">	CFDictionaryRef __nullable frameAttributes )</div><div class="line">	</div><div class="line">该函数返回一个CTFrame 只有这一种方式创建CTFrameRef</div><div class="line">参数，需要一个CTFramesetterRef  </div><div class="line">      需要一个CFRange</div><div class="line">      需要一个CGPathRef</div><div class="line">	  需要一个CFDictionaryRef</div><div class="line">	  </div><div class="line">	  CFRange 控制的是文本的长度。如果设置长度是0，就是将attstr 字符串绘制到结束</div><div class="line">	  CGPathRef 就是绘制区域</div><div class="line">	  CFDictionaryRef 绘制CTFrame的相关属性设置，key值在CFFrame中</div></pre></td></tr></table></figure>
<p>测试代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CFRange range = CFRangeMake(2, mabstring.length-4);</div><div class="line">CTFrameRef frame = CTFramesetterCreateFrame(framesetter,range, Path, (__bridge CFDictionaryRef) Framedic);</div></pre></td></tr></table></figure>
<p>测试结果：</p>
<p><img src="/images/image-3.tiff" alt="image"></p>
<p>要是代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CFRange range = CFRangeMake(0, 0);  </div><div class="line">CTFrameRef frame = CTFramesetterCreateFrame(framesetter,range, Path, (__bridge CFDictionaryRef) Framedic);</div></pre></td></tr></table></figure>
<p>测试结果</p>
<p><img src="/images/image-4.tiff" alt="image"></p>
<p>从上下两个图看的出来，前面图的文本前后各少两个字。 所有字体还是对其排列。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CTTypesetterRef CTFramesetterGetTypesetter(</div><div class="line">	CTFramesetterRef framesetter ) </div><div class="line">	根据CTFramesetterRef 获取一个CTTypesetterRef  </div><div class="line">	目前还不知道CTTypesetterRef 有啥用</div></pre></td></tr></table></figure>
<h3 id="4-Frame-Sizing"><a href="#4-Frame-Sizing" class="headerlink" title="4.Frame Sizing"></a>4.Frame Sizing</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">CGSize CTFramesetterSuggestFrameSizeWithConstraints(</div><div class="line"></div><div class="line">	CTFramesetterRef framesetter,</div><div class="line"></div><div class="line">	CFRange stringRange,</div><div class="line"></div><div class="line">	CFDictionaryRef __nullable frameAttributes,</div><div class="line"></div><div class="line">	CGSize constraints,</div><div class="line"></div><div class="line">	CFRange * __nullable fitRange )</div><div class="line"></div><div class="line">获取Frame的大小</div><div class="line">这个函数适合创建Frame CGPath是矩形的算法，要是三角形等不规则图形就不适合</div></pre></td></tr></table></figure>
<p>测试代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">     </div><div class="line">    NSMutableDictionary * Framedic = [NSMutableDictionary dictionary];</div><div class="line">    </div><div class="line">    [Framedic setObject:@(kCTFrameProgressionTopToBottom) forKey:(__bridge NSString *)kCTFrameProgressionAttributeName];</div><div class="line">    [Framedic setObject:@(kCTFramePathFillEvenOdd) forKey:(__bridge NSString *)kCTFramePathFillRuleAttributeName];</div><div class="line">    </div><div class="line">    NSMutableArray * arr = [NSMutableArray array];</div><div class="line">    </div><div class="line">    NSMutableDictionary * fillDic = [NSMutableDictionary dictionary];</div><div class="line">    CGMutablePathRef clippath = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(clippath, NULL ,CGRectMake(100 , 20 ,self.bounds.size.width-150 , self.bounds.size.height-60));</div><div class="line">    [fillDic setObject:(__bridge id _Nonnull)(clippath) forKey:(__bridge NSString *)kCTFramePathClippingPathAttributeName];</div><div class="line">    [arr addObject:fillDic];</div><div class="line">    </div><div class="line">    fillDic = [NSMutableDictionary dictionary];</div><div class="line">     clippath = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(clippath, NULL ,CGRectMake(10 , 20 ,10 , self.bounds.size.height-60));</div><div class="line">    [fillDic setObject:(__bridge id _Nonnull)(clippath) forKey:(__bridge NSString *)kCTFramePathClippingPathAttributeName];</div><div class="line">    [arr addObject:fillDic];</div><div class="line">//    [Framedic setObject:arr forKey:(__bridge NSString *)kCTFrameClippingPathsAttributeName];</div><div class="line">    </div><div class="line">    </div><div class="line">    CFRange range = CFRangeMake(0, 0);</div><div class="line">    </div><div class="line">    CTFrameRef frame = CTFramesetterCreateFrame(framesetter,range, Path, (__bridge CFDictionaryRef) Framedic);</div><div class="line">    </div><div class="line">    CGRect rectBoud = CGPathGetBoundingBox(Path);</div><div class="line">    CFRange fitRange = CFRangeMake(0, 0);</div><div class="line">    </div><div class="line">    CGSize size =CTFramesetterSuggestFrameSizeWithConstraints(framesetter, range, (__bridge CFDictionaryRef) Framedic, rectBoud.size, &amp;fitRange);</div><div class="line">    NSLog(@&quot; 获取frame 的大小 %f %f %ld %ld&quot;,size.height,size.width,fitRange.location,fitRange.location);</div></pre></td></tr></table></figure>
<p>这个函数只能测试矩形排版，矩形内必须一次排满路径才行。不能有clip path存在才能准确。局限性比较大。</p>
<p>## </p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/02/CTFrameSetter学习/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-CTFrame学习" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/CTFrame学习/">CTFrame.h学习</a>
    </h1>
  

        
        <a href="/2017/03/02/CTFrame学习/" class="archive-article-date">
  	<time datetime="2017-03-02T03:52:19.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-02</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>CTFrame 相当于布局控制文件。控制文本的整体绘制。</p>
<p>我们从三个方面来看这个类 </p>
<h2 id="1-frame-访问函数"><a href="#1-frame-访问函数" class="headerlink" title="1. frame 访问函数"></a>1. frame 访问函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">void CTFrameDraw(CTFrameRef frame,CGContextRef context )` </div><div class="line"></div><div class="line">将文本呈现在屏幕上</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">void CTFrameGetLineOrigins(CTFrameRef frame,CFRange range,CGPoint origins[] )</div><div class="line"></div><div class="line">获取range范围内frame每行的起点 range 需要解释下 range.location 是 从第几个开始返回point  range.len 是返回几个，要是0就默认返回都最后一个。要是range 的location + len 大于CTLine的数量，所有的origins 都会是（0，0） 获取的坐标点是 coretext坐标系中的坐标</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CFArrayRef CTFrameGetLines(CTFrameRef frame )</div><div class="line"></div><div class="line">获取frame所有线的数组，frame是由CTLine组成的</div><div class="line"></div><div class="line">   NSArray * array = (__bridge NSArray * )CTFrameGetLines(frame);</div><div class="line"></div><div class="line">    NSLog(@&quot;frame lines %@&quot;,array);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CFDictionaryRef __nullable CTFrameGetFrameAttributes(CTFrameRef frame )</div><div class="line"></div><div class="line">获取修身frame的相关属性</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CGPathRef CTFrameGetPath(CTFrameRef frame )</div><div class="line"></div><div class="line">获取frame绘制的路径不包括剪切路径</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CFRange CTFrameGetVisibleStringRange(CTFrameRef frame ) </div><div class="line"></div><div class="line">获取frame 能看见的，绘制在屏幕上的string 的range范围</div><div class="line"></div><div class="line">CFRange CTFrameGetStringRange(CTFrameRef frame )</div><div class="line"></div><div class="line">获取frame 字符串的范围(包括不可见的)</div></pre></td></tr></table></figure>
<h6 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">- (void)drawRect:(CGRect)rect &#123;</div><div class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</div><div class="line">    CGContextSetTextMatrix(context , CGAffineTransformIdentity);</div><div class="line">    CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</div><div class="line">        CGContextScaleCTM(context, 1.0 ,-1.0);</div><div class="line">    </div><div class="line">    NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@&quot;富文本学习/慢慢来吧。不是一朝一夕之功。ok \n ok ok&quot;];</div><div class="line">    </div><div class="line">    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);</div><div class="line">    </div><div class="line">    CGMutablePathRef Path = CGPathCreateMutable();</div><div class="line">    CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-640));</div><div class="line">    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);</div><div class="line">    </div><div class="line">    ///frame 相关访问函数 相当于布局控制器。我们能获取布局控制器相关参数</div><div class="line">    CTFrameDraw(frame,context);</div><div class="line">    NSArray * array = (__bridge NSArray * )CTFrameGetLines(frame);</div><div class="line">    NSLog(@&quot;frame lines %@&quot;,array);</div><div class="line">    </div><div class="line">    NSInteger count = CFArrayGetCount((__bridge CFArrayRef)array);</div><div class="line">    CGPoint  origins[count] ;</div><div class="line">    ///range 需要解释下 range.location 是 从第几个开始返回point  range.len 是返回几个，要是0就默认返回都最后一个。要是range 的location + len 大于CTLine的数量，所有的origins 都会是（0，0） 获取的坐标点是 coretext坐标系中的坐标 </div><div class="line">    CTFrameGetLineOrigins(frame, CFRangeMake(0, 0), origins);</div><div class="line">    for (int i =0; i&lt;count; i++) &#123;</div><div class="line">        NSLog(@&quot;frame origins %f %f&quot;,origins[i].x,origins[i].y);</div><div class="line">    &#125;</div><div class="line">   NSDictionary * dic = (__bridge NSDictionary *) CTFrameGetFrameAttributes(frame);</div><div class="line">    NSLog(@&quot;frame att %@&quot;,dic);</div><div class="line">    </div><div class="line">    CGPathRef path = CTFrameGetPath(frame);</div><div class="line">    NSLog(@&quot;frame path %@&quot;,path);</div><div class="line">    </div><div class="line">    CFRange range =  CTFrameGetVisibleStringRange(frame);</div><div class="line">    NSLog(@&quot;frame visibleString Range %ld  %ld&quot;,range.location,range.length);</div><div class="line">    </div><div class="line">    range =  CTFrameGetStringRange(frame);</div><div class="line">    NSLog(@&quot;frame String Range %ld  %ld&quot;,range.location,range.length);</div><div class="line"></div><div class="line">    </div><div class="line">    CGPathRelease(Path);</div><div class="line">    CFRelease(framesetter);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">2017-02-23 15:19:42.578 CoreTextDemo[83004:902122] frame lines (</div><div class="line">    &quot;&lt;CTLine: 0x6080001ae8c0&gt;&#123;run count = 4, string range = (0, 24), width = 250.676, A/D/L = 12.72/4.08/0, glyph count = 24, runs = (\n\n&lt;CTRun: 0x7f8539f09720&gt;&#123;string range = (0, 5), string = \&quot;\\u5BCC\\u6587\\u672C\\u5B66\\u4E60\&quot;, attributes = &lt;CFBasicHash 0x608000267e40 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e05c788 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7f8539f1f160&gt;&#123;name = PingFangSC-Regular, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x608000086a90&gt;&#123;attributes = &lt;CFBasicHash 0x608000261640 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e062908 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x11af8e6c0 [0x10d69fc70]&gt;&#123;contents = \&quot;PingFangSC-Regular\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;\n\n\n&lt;CTRun: 0x7f8539f0de20&gt;&#123;string range = (5, 1), string = \&quot;/\&quot;, attributes = &lt;CFBasicHash 0x6080002609c0 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e05c788 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7f8539f04950&gt;&#123;name = Helvetica, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x600000085960&gt;&#123;attributes = &lt;CFBasicHash 0x60000007dd40 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e062908 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x10e0548a8 [0x10d69fc70]&gt;&#123;contents = \&quot;Helvetica\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;\n\n\n&lt;CTRun: 0x7f8539f2e9b0&gt;&#123;string range = (6, 14), string = \&quot;\\u6162\\u6162\\u6765\\u5427\\u3002\\u4E0D\\u662F\\u4E00\\u671D\\u4E00\\u5915\\u4E4B\\u529F\\u3002\&quot;, attributes = &lt;CFBasicHash 0x608000267e40 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e05c788 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7f8539f1f160&gt;&#123;name = PingFangSC-Regular, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x608000086a90&gt;&#123;attributes = &lt;CFBasicHash 0x608000261640 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e062908 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x11af8e6c0 [0x10d69fc70]&gt;&#123;contents = \&quot;PingFangSC-Regular\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;\n\n\n&lt;CTRun: 0x7f8539f2eaf0&gt;&#123;string range = (20, 4), string = \&quot;ok \\n\&quot;, attributes = &lt;CFBasicHash 0x6080002609c0 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e05c788 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFont\&quot;&#125; = &lt;CTFont: 0x7f8539f04950&gt;&#123;name = Helvetica, size = 12.000000, matrix = 0x0, descriptor = &lt;CTFontDescriptor: 0x600000085960&gt;&#123;attributes = &lt;CFBasicHash 0x60000007dd40 [0x10d69fc70]&gt;&#123;type = mutable dict, count = 1,\nentries =&gt;\n\t2 : &lt;CFString 0x10e062908 [0x10d69fc70]&gt;&#123;contents = \&quot;NSFontNameAttribute\&quot;&#125; = &lt;CFString 0x10e0548a8 [0x10d69fc70]&gt;&#123;contents = \&quot;Helvetica\&quot;&#125;\n&#125;\n&gt;&#125;&#125;\n&#125;\n&#125;\n\n)\n&#125;&quot;</div><div class="line">)</div><div class="line">2017-02-23 15:19:42.578 CoreTextDemo[83004:902122] frame origins 0.000000 14.000000</div><div class="line">2017-02-23 15:19:42.579 CoreTextDemo[83004:902122] frame att (null)</div><div class="line">2017-02-23 15:19:42.579 CoreTextDemo[83004:902122] frame path &lt;CGPath 0x60800003a300&gt;</div><div class="line">2017-02-23 15:19:42.579 CoreTextDemo[83004:902122] frame visibleString Range 0  24</div><div class="line">2017-02-23 15:19:42.580 CoreTextDemo[83004:902122] frame String Range 0  30</div></pre></td></tr></table></figure>
<p>从上面结果看 frame 没有设置 att 属性。那怎么设置属性值呢？请看 <strong>CTFramesetterRef</strong></p>
<h5 id="2-frame-values"><a href="#2-frame-values" class="headerlink" title="2 frame values"></a>2 frame values</h5><p>下面是frame att 属性的key  通过 这些key 可以控制 frame 的绘制布局</p>
<table>
<thead>
<tr>
<th style="text-align:left">kCTFrameProgressionAttributeName</th>
<th style="text-align:left">文字绘制方向，有三个值， kCTFrameProgressionTopToBottom水平绘制  从上到下， kCTFrameProgressionRightToLeft 垂直绘制，从右到左， kCTFrameProgressionLeftToRight 垂直绘制，从左到右</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">kCTFramePathFillRuleAttributeName</td>
<td style="text-align:left">在path路径的绘制规则。有两种 kCTFramePathFillEvenOdd 根据 CGContextEOFillPath 规则绘制  kCTFramePathFillWindingNumber 充满整个path  默认是kCTFramePathFillEvenOdd</td>
</tr>
<tr>
<td style="text-align:left">kCTFramePathWidthAttributeName</td>
<td style="text-align:left">这个属性暂时不知道干嘛用的，使用起来无效</td>
</tr>
<tr>
<td style="text-align:left">kCTFrameClippingPathsAttributeName</td>
<td style="text-align:left">这个value 是array  ，array 中必须包含 字典 ，字典的key值是kCTFramePathClippingPathAttributeName  ，value是path，可选key  kCTFramePathFillRuleAttributeName 可以配置path路径的填充方式</td>
</tr>
<tr>
<td style="text-align:left">kCTFramePathClippingPathAttributeName</td>
<td style="text-align:left">这个value是path</td>
</tr>
</tbody>
</table>
<h6 id="kCTFrameProgressionAttributeName"><a href="#kCTFrameProgressionAttributeName" class="headerlink" title="kCTFrameProgressionAttributeName"></a>kCTFrameProgressionAttributeName</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSMutableDictionary * Framedic = [NSMutableDictionary dictionary];</div><div class="line">  [Framedic setObject:@(kCTFrameProgressionLeftToRight) forKey:(__bridge NSString *)kCTFrameProgressionAttributeName];</div><div class="line">  CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, (__bridge CFDictionaryRef) Framedic);</div></pre></td></tr></table></figure>
<p>效果</p>
<p><img src="/images/coretext3.tiff" alt="image"></p>
<h6 id="kCTFrameProgressionRightToLeft"><a href="#kCTFrameProgressionRightToLeft" class="headerlink" title="kCTFrameProgressionRightToLeft"></a>kCTFrameProgressionRightToLeft</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSMutableDictionary * Framedic = [NSMutableDictionary dictionary];</div><div class="line"> [Framedic setObject:@(kCTFrameProgressionRightToLeft) forKey:(__bridge NSString *)kCTFrameProgressionAttributeName];</div><div class="line"> CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, (__bridge CFDictionaryRef) Framedic);</div></pre></td></tr></table></figure>
<p>效果</p>
<p><img src="images/image.tiff" alt="image"></p>
<h6 id="默认是kCTFrameProgressionTopToBottom"><a href="#默认是kCTFrameProgressionTopToBottom" class="headerlink" title="默认是kCTFrameProgressionTopToBottom"></a>默认是kCTFrameProgressionTopToBottom</h6><h6 id="kCTFramePathFillRuleAttributeName"><a href="#kCTFramePathFillRuleAttributeName" class="headerlink" title="kCTFramePathFillRuleAttributeName"></a>kCTFramePathFillRuleAttributeName</h6><p>我认为这个主要是填充path 规则的 kCTFramePathFillEvenOdd 这种方式进行理解</p>
<p>什么是 CGContextEOFillPath 规则  //使用奇偶规则填充当前路径</p>
<p>修改路径代码如下：使一个大的矩形套一个小的矩形</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CGMutablePathRef Path = CGPathCreateMutable();</div><div class="line">   CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-60));</div><div class="line">   CGPathAddRect(Path, NULL ,CGRectMake(100 , 0 ,self.bounds.size.width-150 , self.bounds.size.height-60));</div></pre></td></tr></table></figure>
<p>结果显示</p>
<p><img src="/images/image-1.tiff" alt="image"></p>
<h6 id="kCTFrameClippingPathsAttributeName-和-kCTFramePathClippingPathAttributeName"><a href="#kCTFrameClippingPathsAttributeName-和-kCTFramePathClippingPathAttributeName" class="headerlink" title="kCTFrameClippingPathsAttributeName 和 kCTFramePathClippingPathAttributeName"></a>kCTFrameClippingPathsAttributeName 和 kCTFramePathClippingPathAttributeName</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">NSMutableArray * arr = [NSMutableArray array];</div><div class="line"></div><div class="line">NSMutableDictionary * fillDic = [NSMutableDictionary dictionary];</div><div class="line">CGMutablePathRef clippath = CGPathCreateMutable();</div><div class="line">CGPathAddRect(clippath, NULL ,CGRectMake(100 , 20 ,self.bounds.size.width-150 , self.bounds.size.height-60));</div><div class="line">[fillDic setObject:(__bridge id _Nonnull)(clippath) forKey:(__bridge NSString *)kCTFramePathClippingPathAttributeName];</div><div class="line">[arr addObject:fillDic];</div><div class="line"></div><div class="line">fillDic = [NSMutableDictionary dictionary];</div><div class="line"> clippath = CGPathCreateMutable();</div><div class="line">CGPathAddRect(clippath, NULL ,CGRectMake(10 , 20 ,10 , self.bounds.size.height-60));</div><div class="line">[fillDic setObject:(__bridge id _Nonnull)(clippath) forKey:(__bridge NSString *)kCTFramePathClippingPathAttributeName];</div><div class="line">[arr addObject:fillDic];</div><div class="line">[Framedic setObject:arr forKey:(__bridge NSString *)kCTFrameClippingPathsAttributeName];</div></pre></td></tr></table></figure>
<p>剪切上面的路径 。与 kCTFramePathFillRuleAttributeName  暂时看不出变化来，应该是这个里面的路径全部clip。可能与path 重叠有关系，目前没做具体研究。</p>
<h5 id="3-frame-types"><a href="#3-frame-types" class="headerlink" title="3 frame types"></a>3 frame types</h5><h6 id="CFTypeID-CTFrameGetTypeID-void"><a href="#CFTypeID-CTFrameGetTypeID-void" class="headerlink" title="CFTypeID CTFrameGetTypeID( void )"></a>CFTypeID CTFrameGetTypeID( void )</h6><p>返回一个CFTypeID </p>
<h3 id="综合CFFrame-h-api-，可以看出该类能获取到frame的信息是-CTLIne-和CTLine-的起点。"><a href="#综合CFFrame-h-api-，可以看出该类能获取到frame的信息是-CTLIne-和CTLine-的起点。" class="headerlink" title="综合CFFrame.h api ，可以看出该类能获取到frame的信息是 CTLIne 和CTLine 的起点。"></a>综合CFFrame.h api ，可以看出该类能获取到frame的信息是 CTLIne 和CTLine 的起点。</h3><p>见图</p>
<p><img src="/images/image-2.tiff" alt="image"></p>
<p>上图不包含剪切的路径。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/02/CTFrame学习/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-coreText概述" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/coreText概述/">coreText概述</a>
    </h1>
  

        
        <a href="/2017/03/02/coreText概述/" class="archive-article-date">
  	<time datetime="2017-03-02T03:44:29.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-02</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>想学好一个framework ，以前总是看看简单的写写代码，实现基本功能。可是稍微遇到点困难的问题，就很难解决，所以这次我决定还是把所有的api都给实现一遍，看看功能，印象深刻。</p>
<h2 id="coretext包含的类文件"><a href="#coretext包含的类文件" class="headerlink" title="coretext包含的类文件"></a>coretext包含的类文件</h2><table>
<thead>
<tr>
<th>CoreText.h</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>CTDefines.h</td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTFont学习/" target="_blank" rel="external">CTFont.h</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTFontCollection学习/" target="_blank" rel="external">CTFontCollection.h</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTFontDescriptor学习/" target="_blank" rel="external">CTFontDescriptor.h</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTFontManager学习/" target="_blank" rel="external">CTFontManager.h</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTFontManagerError学习/" target="_blank" rel="external">CTFontManagerError.h</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTFontTraits学习/" target="_blank" rel="external">CTFontTraits.h</a></td>
<td></td>
</tr>
<tr>
<td><a href="http://npopensource.github.io/2017/03/02/CTFrame学习/" target="_blank" rel="external">CTFrame.h</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTFrameSetter学习/" target="_blank" rel="external">CTFramesetter.h</a></td>
<td></td>
</tr>
<tr>
<td>CTGlyphInfo.h</td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTLine学习/" target="_blank" rel="external">CTLine.h</a></td>
<td></td>
</tr>
<tr>
<td>CTParagraphStyle.h</td>
<td></td>
</tr>
<tr>
<td>CTRubyAnnotation.h</td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTRun学习/" target="_blank" rel="external">CTRun.h</a></td>
<td></td>
</tr>
<tr>
<td>CTRunDelegate.h</td>
<td></td>
</tr>
<tr>
<td><a href="https://npopensource.github.io/2017/03/02/CTStringAttributes学习/" target="_blank" rel="external">CTStringAttributes.h</a></td>
<td></td>
</tr>
<tr>
<td>CTTextTab.h</td>
<td></td>
</tr>
<tr>
<td>CTTypesetter.h</td>
<td></td>
</tr>
<tr>
<td>SFNTLayoutTypes.h</td>
<td></td>
</tr>
<tr>
<td>SFNTTypes.h</td>
</tr>
</tbody>
</table>
<p>以上是coretext.framework 包含的所有类</p>
<h2 id="富文本字体规范"><a href="#富文本字体规范" class="headerlink" title="富文本字体规范"></a>富文本字体规范</h2><h3 id="字体的相关知识"><a href="#字体的相关知识" class="headerlink" title="字体的相关知识"></a>字体的相关知识</h3><p>字体(Font):是一系列字号、样式和磅值相同的字符(例如:10磅黑体Palatino)。现多被视为字样的同义词</p>
<p>字面(Face):是所有字号的磅值和格式的综合</p>
<p>字体集(Font family):是一组相关字体(例如:Franklin family包括Franklin Gothic、Fran-klinHeavy和Franklin Compressed)</p>
<p>磅值(Weight):用于描述字体粗度。典型的磅值,从最粗到最细,有极细、细、book、中等、半粗、粗、较粗、极粗</p>
<p>样式(Style):字形有三种形式:Roman type是直体;oblique type是斜体;utakuc type是斜体兼曲线(比Roman type更像书法体)。</p>
<p>x高度(X height):指小写字母的平均高度(以x为基准)。磅值相同的两字母,x高度越大的字母看起来比x高度小的字母要大</p>
<p>Cap高度(Cap height):与x高度相似。指大写字母的平均高度(以C为基准)</p>
<p>下行字母(Descender):例如在字母q中,基线以下的字母部分叫下伸部分</p>
<p>上行字母(Ascender):x高度以上的部分(比如字母b)叫做上伸部分</p>
<p>基线(Baseline):通常在x、v、b、m下的那条线</p>
<p>描边(Stroke):组成字符的线或曲线。可以加粗或改变字符形状</p>
<p>衬线(Serif):用来使字符更可视的一条水平线。如字母左上角和下部的水平线。</p>
<p>无衬线(Sans Serif):可以让排字员不使用衬线装饰。</p>
<p>方形字(Block):这种字体的笔画使字符看起来比无衬线字更显眼,但还不到常见的衬线字的程度。例如Lubalin Graph就是方形字,这种字看起来好像是木头块刻的一样</p>
<p>手写体脚本(Calligraphic script):是一种仿效手写体的字体。例如Murray Hill或者Fraktur字体</p>
<p>艺术字(Decorative):像绘画般的字体</p>
<p>Pi符号(Pisymbol):非标准的字母数字字符的特殊符号。例如Wingdings和Mathematical Pi</p>
<p>连写(Ligature):是一系列连写字母如fi、fl、ffi或ffl。由于字些字母形状的原因经常被连写,故排字员已习惯将它们连写。</p>
<p><img src="/images/font.gif" alt="image"></p>
<p><img src="/images/font2.gif" alt="image"></p>
<p>该框架的整体视窗组合图</p>
<p><img src="/images/coretext1.png" alt="image"></p>
<h2 id="坐标系"><a href="#坐标系" class="headerlink" title="坐标系"></a>坐标系</h2><p>UIKit框架的坐标系是左上角</p>
<p>而 coretext的坐标系是左下角</p>
<p>因此 要进行坐标系转换</p>
<h2 id="简单demo"><a href="#简单demo" class="headerlink" title="简单demo"></a>简单demo</h2><p>我们学习这个框架从简单的demo慢慢扩充到复杂功能及所有api介绍</p>
<p>demo 代码<br>$$</p>
<ul>
<li><p>(void)drawRect:(CGRect)rect {<br>  CGContextRef context = UIGraphicsGetCurrentContext();<br>  CGContextSetTextMatrix(context , CGAffineTransformIdentity);<br>  CGContextTranslateCTM(context , 0 ,self.bounds.size.height);</p>
<pre><code>CGContextScaleCTM(context, 1.0 ,-1.0);
</code></pre><p>  NSMutableAttributedString *mabstring = [[NSMutableAttributedString alloc]initWithString:@”富文本学习/慢慢来吧。不是一朝一夕之功。ok \n ok ok”];</p>
<p>  CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)mabstring);</p>
<p>  CGMutablePathRef Path = CGPathCreateMutable();<br>  CGPathAddRect(Path, NULL ,CGRectMake(10 , 0 ,self.bounds.size.width-10 , self.bounds.size.height-20));<br>  CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), Path, NULL);<br>  CTFrameDraw(frame,context);</p>
<p>  CGPathRelease(Path);<br>  CFRelease(framesetter);<br>}<br>$$<br>显示效果</p>
</li>
</ul>
<p><img src="/images/coretext2.tiff" alt="image"></p>
<p>上面就是用coretext实现的简单效果，看着一点都不酷。一个UIlabel就能实现的效果。不过不要紧，慢慢往下看。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/02/coreText概述/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-coretext-framework-大全" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/23/coretext-framework-大全/">coretext.framework 大全</a>
    </h1>
  

        
        <a href="/2017/02/23/coretext-framework-大全/" class="archive-article-date">
  	<time datetime="2017-02-23T03:07:41.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-23</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###</p>
<h3 id="CTParagraphStyle-h"><a href="#CTParagraphStyle-h" class="headerlink" title="CTParagraphStyle.h"></a>CTParagraphStyle.h</h3><h3 id="CTTextTab-h"><a href="#CTTextTab-h" class="headerlink" title="CTTextTab.h"></a>CTTextTab.h</h3><h3 id="CTRunDelegate-h"><a href="#CTRunDelegate-h" class="headerlink" title="CTRunDelegate.h"></a>CTRunDelegate.h</h3><h3 id="CTRubyAnnotation-h"><a href="#CTRubyAnnotation-h" class="headerlink" title="CTRubyAnnotation.h"></a>CTRubyAnnotation.h</h3><h3 id="SFNTLayoutTypes-h"><a href="#SFNTLayoutTypes-h" class="headerlink" title="SFNTLayoutTypes.h"></a>SFNTLayoutTypes.h</h3><h3 id="SFNTTypes-h"><a href="#SFNTTypes-h" class="headerlink" title="SFNTTypes.h"></a>SFNTTypes.h</h3><p>### </p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/23/coretext-framework-大全/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-18-mu-qian-chang-yong-di-san-fang-cha-jian" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/18/2015-08-18-mu-qian-chang-yong-di-san-fang-cha-jian/">目前常用第三方插件</a>
    </h1>
  

        
        <a href="/2015/08/18/2015-08-18-mu-qian-chang-yong-di-san-fang-cha-jian/" class="archive-article-date">
  	<time datetime="2015-08-18T06:23:43.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目前我在用的开发插件</p>
<p>1、xcode生成规范注释</p>
<p>VVDocumenter-Xcode <a href="https://github.com/onevcat/VVDocumenter-Xcode.git" target="_blank" rel="external">github地址</a></p>
<p><img src="/images/xcode.gif" alt="image"></p>
<p>我改了几行源码就成上面的样子了.<a href="http://pan.baidu.com/s/1bn8X7vL" target="_blank" rel="external">代码</a></p>
<p>安装出现问题可以参考<a href="http://www.bubuko.com/infodetail-922634.html" target="_blank" rel="external">这里</a></p>
<p>安装VVDocumenter-Xcode ，Xcode 6之后，重启Xcode时会提示“Load bundle”、 “Skip Bundle”，这里必须选择“Load bundle”，不然插件无法使用。但skip是你不小心点击<strong>“Skip Bundle”</strong><br> 你可以执行下面命令</p>
<pre><code>defaults delete com.apple.dt.Xcode DVTPlugInManagerNonApplePlugIns-Xcode-{your_xcode_version}
</code></pre><p>清除你的错误选择</p>
<pre><code>我的xcode是6.4 命令为
defaults delete com.apple.dt.Xcode DVTPlugInManagerNonApplePlugIns-Xcode-6.4
</code></pre><p>2、生成gif图的工具</p>
<p>licecap 这个工具是免费的 网上搜下到处都是就不提供链接了。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/18/2015-08-18-mu-qian-chang-yong-di-san-fang-cha-jian/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-18-geng-gai-xcodesheng-cheng-mei-ge-wen-jian-tou-xin-xi" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/18/2015-08-18-geng-gai-xcodesheng-cheng-mei-ge-wen-jian-tou-xin-xi/">更改xcode生成每个文件头信息</a>
    </h1>
  

        
        <a href="/2015/08/18/2015-08-18-geng-gai-xcodesheng-cheng-mei-ge-wen-jian-tou-xin-xi/" class="archive-article-date">
  	<time datetime="2015-08-18T02:13:11.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>修改xocde文件 的头信息</p>
<blockquote>
<p>点击工程文件</p>
<p>点击右边的文件设置窗口</p>
<p>配置project Document 选项中的相关信息</p>
</blockquote>
<p><img src="/images/xcodeSix.jpeg" alt="image"></p>
<p>上图第四步 class Prefix 是配置文件头，生成每个类前的头</p>
<p><img src="/images/xcodeFileFour.png" alt="image"> </p>
<p>organization 是配置文件中的    <strong>科技</strong>        位置的字</p>
<p><img src="/images/xcodeFileFive.png" alt="image"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/18/2015-08-18-geng-gai-xcodesheng-cheng-mei-ge-wen-jian-tou-xin-xi/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-17-avfoundation-dot-fromworkde-xue-xi" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/17/2015-08-17-avfoundation-dot-fromworkde-xue-xi/">AVFoundation.framework的学习</a>
    </h1>
  

        
        <a href="/2015/08/17/2015-08-17-avfoundation-dot-fromworkde-xue-xi/" class="archive-article-date">
  	<time datetime="2015-08-17T09:15:52.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-17</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近学习自定义相机的相关知识，可以自定义相机成功，但是对AVFoundation不是很了解，这里有必要对这个AVFoundation.framework。</p>
<p>（感觉写点东西咋这么困难）</p>
<p>##学习类对象</p>
<blockquote>
<p>AVCaptureSession、AVCaptureInput 和    AVCaptureOutput 的学习</p>
</blockquote>
<pre><code>AVCaptureInput is an abstract base-class describing an input data source to an AVCaptureSession object. 

AVCaptureOutput is an abstract base class describing an output destination of an AVCaptureSession object

You use an AVCaptureSession object to coordinate the flow of data from AV input devices to outputs
</code></pre><p>#####参考连接<br><a href="https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVFoundationFramework/" target="_blank" rel="external">苹果AVFoundation ref</a></p>
<p><a href="https://developer.apple.com/library/prerelease/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html" target="_blank" rel="external">苹果AVFoundation Programming Guide</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/17/2015-08-17-avfoundation-dot-fromworkde-xue-xi/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-12-zi-ding-yi-xiang-ji" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/12/2015-08-12-zi-ding-yi-xiang-ji/">自定义相机</a>
    </h1>
  

        
        <a href="/2015/08/12/2015-08-12-zi-ding-yi-xiang-ji/" class="archive-article-date">
  	<time datetime="2015-08-12T03:31:08.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-12</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##调用系统相机</p>
<p>调用系统相机一般的功能是可以满足的，如果没有特殊的要求要求，可以直接用系统相机。</p>
<p>代码如下：</p>
<pre><code>调用照相机

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {

    UIImagePickerController * picker = [[UIImagePickerController alloc]init];
    picker.delegate = self;
    block(picker);
    //摄像头
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    [self presentViewController:picker animated:YES completion:^{

    }];
}else{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@&quot;Error&quot; message:@&quot;你没有摄像头&quot; delegate:nil cancelButtonTitle:@&quot;Drat!&quot; otherButtonTitles:nil];
    [alert show];

}
</code></pre><p>获取图片或者取消图片实现代理</p>
<pre><code>- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

UIImage * image = [info objectForKey:UIImagePickerControllerOriginalImage];
if ([self respondsToSelector:@selector(getCameraImage:)]) {
    [self getCameraImage:image];
}
[self dismissViewControllerAnimated:YES completion:^{

}];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
[self dismissViewControllerAnimated:YES completion:^{

}];
}
</code></pre><p>以上代码只是简单的调用下系统相机。并没有对相机进行相关设置。</p>
<p>配置前</p>
<p><img src="/images/comera1.jpg" alt="image"></p>
<pre><code>注意将系统相机配置成中文 ，在工程文件plist 中添加下面一项即可。
</code></pre><p><img src="/images/camerasytemChinese.png" alt="image"></p>
<p>配置后</p>
<p><img src="/images/comera2.jpg" alt="image"></p>
<p>##自定义相机</p>
<pre><code>我个人偏向用自定义相机，个人理由只有一条，可以高度定制。（虽然有点麻烦）

暂时更新到这里（哈哈。没有上下文了。）我发现学习相机还是先系统学习学习avfoudation.framework 比较靠谱些。学完av 再回来学喽
</code></pre><p>#####参考连接</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/12/2015-08-12-zi-ding-yi-xiang-ji/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-11-jin-jun-er-wei-ma-,cong-ling-kai-shi-xue-xi-er-wei-ma" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/11/2015-08-11-jin-jun-er-wei-ma-,cong-ling-kai-shi-xue-xi-er-wei-ma/">进军二维码，从零开始学习二维码</a>
    </h1>
  

        
        <a href="/2015/08/11/2015-08-11-jin-jun-er-wei-ma-,cong-ling-kai-shi-xue-xi-er-wei-ma/" class="archive-article-date">
  	<time datetime="2015-08-11T10:30:03.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-11</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>做项目挺久的了，但是二维码这块总是用别人写好的，自己从来没有操过刀，内心有点小不爽啊，今天索性就写个博客，自己给自己定定需要，学学学习二维码。</p>
<pre><code>二维条码/二维码（2-dimensional bar code）是用某种特定的几何图形按一定规律在平面（二维方向上）分布的黑白相间的图形记录数据符号信息的；在代码编制上巧妙地利用构成计算机内部逻辑基础的“0”、“1”比特流的概念，使用若干个与二进制相对应的几何形体来表示文字数值信息，通过图象输入设备或光电扫描设备自动识读以实现信息自动处理：它具有条码技术的一些共性：每种码制有其特定的字符集；每个字符占有一定的宽度；具有一定的校验功能等。同时还具有对不同行的信息自动识别功能、及处理图形旋转变化点。
</code></pre><h2 id="二维码扫描"><a href="#二维码扫描" class="headerlink" title="二维码扫描"></a>二维码扫描</h2><p>现在都是2015年了。就不研究ZBar和ZXing了。今天要介绍的是iOS7.0后AVFoundation框架提供的原生二维码扫描。</p>
<h2 id="二维码生成"><a href="#二维码生成" class="headerlink" title="二维码生成"></a>二维码生成</h2><p>#####参考链接</p>
<p><a href="http://" target="_blank" rel="external">二维码百度百科</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/11/2015-08-11-jin-jun-er-wei-ma-,cong-ling-kai-shi-xue-xi-er-wei-ma/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-2015-08-10-cgaffinetransform-dot-hlei-de-xue-xi-he-yuan-li-jiang-jie" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/10/2015-08-10-cgaffinetransform-dot-hlei-de-xue-xi-he-yuan-li-jiang-jie/">CGAffineTransform.h类的学习和原理讲解</a>
    </h1>
  

        
        <a href="/2015/08/10/2015-08-10-cgaffinetransform-dot-hlei-de-xue-xi-he-yuan-li-jiang-jie/" class="archive-article-date">
  	<time datetime="2015-08-10T07:25:44.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2015-08-10</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> 第一次写ios相关技术博客，所以先写个简单的，写的不好大家多多提意见。<br> 想学好这个类，我感觉最好还是从理论上弄明白什么二维图形到底是怎么变换的。</p>
<h2 id="矩阵及其运算"><a href="#矩阵及其运算" class="headerlink" title="矩阵及其运算"></a>矩阵及其运算</h2><blockquote>
<p>一．数学概念<br>定义1.1 由<img src="/images/juzhen1.gif" alt="image">个数<img src="/images/juzhen2.gif" alt="image">   排成m行n列的数表<br><img src="/images/juzhen3.gif" alt="image"></p>
</blockquote>
<p>称为m行n列的矩阵，简称   矩阵，记作</p>
<p><img src="/images/juzhen4.gif" alt="image"></p>
<blockquote>
<p>二．原理，公式和法则</p>
</blockquote>
<p>1．矩阵的加法<br>(1) 公式</p>
<p> <img src="/images/juzhen5.gif" alt="image"></p>
<p>  (2) 运算律</p>
<p> <img src="/images/juzhen6.gif" alt="image"></p>
<p> 2．数乘矩阵<br> (1) 公式</p>
<p>  <img src="/images/juzhen7.gif" alt="image"></p>
<p>(2) 运算律<br>  <img src="/images/juzhen8.gif" alt="image"></p>
<p> 3．矩阵与矩阵相乘<br> (1) 设 <img src="/images/juzhen9.gif" alt="image">  ,<br> 则 <img src="/images/juzhen10.gif" alt="image">  其中 <img src="/images/juzhen11.gif" alt="image">  ，且</p>
<p><img src="/images/juzhen12.gif" alt="image"> </p>
<p>（2）　运算符(假设运算都是可行的)：</p>
<p><img src="/images/juzhen13.gif" alt="image"> </p>
<p>(3)　方阵的运算</p>
<p><img src="/images/juzhen14.gif" alt="image"> </p>
<p>注意：①矩阵乘法一般不满足交换律。<br>②一般 <img src="/images/juzhen15.gif" alt="image"> </p>
<p>4.矩阵的转置<br>(1)　公式</p>
<p><img src="/images/juzhen16.png" alt="image"> </p>
<p><img src="/images/juzhen17.png" alt="image"> </p>
<p> (2)　运算律</p>
<p> <img src="/images/juzhen18.gif" alt="image"> </p>
<p> 5.方阵的行列式</p>
<p><img src="/images/juzhen19.png" alt="image"> </p>
<p>6.共轭矩阵</p>
<p><img src="/images/juzhen20.png" alt="image"> </p>
<p>上面一定要看懂矩阵的乘法是怎么运算的才行。</p>
<h2 id="数学原理"><a href="#数学原理" class="headerlink" title="数学原理"></a>数学原理</h2><blockquote>
<p>1、基本几何变换及变换矩阵</p>
</blockquote>
<p>基本几何变换都是相对于坐标原点和坐标轴进行的几何变换，有平移、比例、旋转、反射和错切等</p>
<p><strong>1.1 平移变换</strong></p>
<p>是指将p点沿直线路径从一个坐标位置移到另一个坐标位置的重定位过程。他是一种不产生变形而移动物体的刚体变换（rigid-body transformation），如下图所示。</p>
<p><img src="/images/juzhen21.png" alt="image"></p>
<p> 推导：</p>
<p> <img src="/images/juzhen22.png" alt="image"></p>
<pre><code>    解释(个人理解)
    x&apos;=x+Tx  相当于x&apos;= x*1 + y*0 +  1 * Tx
    y&apos;=y+Ty  相当于y&apos;= x*0 + y*1 +  1 * Ty

    所以 A 矩阵  [x  y 1]
         C 矩阵要和A矩阵格式一样 [x&apos; y&apos; 1]
        c矩阵的1 怎么来。只能添加一行了

        1=x*0+y*0+ 1*1

所以b矩阵为 上面如图
</code></pre><p><strong>1.2 缩放变换</strong><br>缩放变换是指对p点相对于坐标原点沿x方向放缩Sx倍，沿y方向放缩Sy倍。其中Sx和Sy称为缩放系数。</p>
<p><img src="/images/juzhen23.png" alt="image"><br>推导：</p>
<p><img src="/images/juzhen24.png" alt="image">    </p>
<p>  矩阵<br><img src="/images/juzhen25.png" alt="image">        </p>
<pre><code>x&apos;=x*Sx+y*0 + 0*0;
y&apos;=x*0 +y *Sy+0*0;
0=x*0+y*0+0*1;
</code></pre><p>缩放变换可改变物体的大小，如下图所示。当Sx=Sy &gt;1时，图形沿两个坐标轴方向等比例放大；当Sx=Sy&lt;1，图形沿两个坐标轴方向等比例缩小；当Sx≠Sy，图形沿两个坐标轴方向作非均匀的比例变换。                        </p>
<p><img src="/images/juzhen26.png" alt="image">        </p>
<p>  <strong>1.3 旋转变换</strong></p>
<p>二维旋转是指将p点绕坐标原点转动某个角度（逆时针为正，顺时针为负）得到新的点p’的重定位过程。</p>
<p><img src="/images/juzhen27.png" alt="image">    </p>
<p> 推导：利用极坐标方程</p>
<p><img src="/images/juzhen28.png" alt="image">    </p>
<p>逆时针旋转θ角的矩阵如下：</p>
<p><img src="/images/juzhen29.png" alt="image">    </p>
<p><strong>1.4 对称变换</strong></p>
<p>对称变换后的图形是原图形关于某一轴线或原点的镜像。<br><img src="/images/juzhen30.png" alt="image"></p>
<p>  (1)关于x轴对称</p>
<p><img src="/images/juzhen31.png" alt="image">    </p>
<pre><code>x&apos;=x*1+y*0+0*0;
y&apos;=x*0+y*(-1)+0*0;
0=x*0+y*0+0*1;
</code></pre><p> (2)关于y轴对称</p>
<p> <img src="/images/juzhen33.png" alt="image">    </p>
<p>  (3)关于原点对称</p>
<p>  <img src="/images/juzhen34.png" alt="image">    </p>
<p>  (4)关于y=x轴对称</p>
<p>   <img src="/images/juzhen35.png" alt="image"></p>
<p>   (5)关于y=-x轴对称</p>
<p>   <img src="/images/juzhen36.png" alt="image"></p>
<p><strong>1.5 错切变换</strong></p>
<p>错切变换也称为剪切、错位变换，用于产生弹性物体的变形处理。</p>
<p>   <img src="/images/juzhen37.png" alt="image"></p>
<p> 错切变换的变换矩阵为：</p>
<p>   <img src="/images/juzhen38.png" alt="image"></p>
<p>   (1)沿x方向错切：b=0<br>   (2)沿y方向错切：c=0<br>   (3)两个方向错切：b和c都不等于0。</p>
<blockquote>
<p>2、 复合变换</p>
</blockquote>
<p>如果图形要做一次以上的几何变换，那么可以将各个变换矩阵综合起来进行一步到位的变换。复合变换有如下的性质：</p>
<p><strong>1）复合平移</strong></p>
<p>对同一图形做两次平移相当于将两次的平移两加起来：</p>
<p> <img src="/images/juzhen39.png" alt="image"></p>
<p> <strong>2）复合缩放</strong></p>
<p>两次连续的缩放相当于将缩放操作相乘：</p>
<p> <img src="/images/juzhen40.png" alt="image"></p>
<p><strong>3）复合旋转</strong></p>
<p>两次连续的旋转相当于将两次的旋转角度相加： </p>
<p> <img src="/images/juzhen41.png" alt="image"></p>
<pre><code>缩放、旋转变换都与参考点有关，上面进行的各种变换都是以原点为参考点的。如果相对某个一般的参考点（xf，yf）作缩放、旋转变换，相当于将该点移到坐标原点处，然后进行缩放、旋转变换，最后将（xf，yf）点移回原来的位置。
</code></pre><p><strong>4）关于（xf，yf）点的缩放变换</strong></p>
<p> <img src="/images/juzhen42.png" alt="image"></p>
<p><strong>5）绕（xf，yf）点的旋转变换</strong></p>
<p>  <img src="/images/juzhen43.png" alt="image"></p>
<blockquote>
<p>  3、二维图形几何变换的计算</p>
</blockquote>
<p>几何变换均可表示成P’=P*T的形式</p>
<p>(1)点的变换：先将点表示为规范化齐次坐标形式，再乘以变换矩阵。</p>
<p>  <img src="/images/juzhen44.png" alt="image"></p>
<p>(2)直线的变换：将直线的两个端点表示为规范化齐次坐标形式，再乘以变换矩阵。</p>
<p>  <img src="/images/juzhen45.png" alt="image"></p>
<p>(3)多边形的变换：将多边形的顶点表示为规范化齐次坐标形式，再乘以变换矩阵。</p>
<p>  <img src="/images/juzhen46.png" alt="image"></p>
<p> (4)曲线的变换：将曲线的每个点表示为规范化齐次坐标形式，再乘以变换矩阵。</p>
<blockquote>
<p> 4、复合变换的矩阵点乘的先后问题</p>
</blockquote>
<p>1)如果采用以下方式计算几何变换的变换矩阵</p>
<p><img src="/images/juzhen47.png" alt="image"></p>
<p>如上范例所示，其先执行变换的矩阵放在前面，后执行变换的矩阵放在后面。</p>
<p>2)如果采用以下方式计算几何变换的变换矩阵：</p>
<p><img src="/images/juzhen48.png" alt="image"></p>
<p>如上范例所示，其先执行变换的矩阵放在后面，后执行变换的矩阵放在前面。</p>
<p>这是因为矩阵的特性：<img src="/images/juzhen49.png" alt="image"></p>
<p>##CGAffineTransform.h 函数介绍</p>
<p>说了半天，不来点代码怎么行。    </p>
<pre><code>在CGAffineTransform.h 文件中

typedef struct CGAffineTransform CGAffineTransform;

struct CGAffineTransform {
      CGFloat a, b, c, d;
      CGFloat tx, ty;
};

矩阵数学模型是[a  b]
             c  d
            tx  ty
省略了  [a  b  0]  中的最后一列
        c  d  0
        tx ty 1
</code></pre><p> 函数介绍代码</p>
<pre><code>///获取一个标准矩阵。没有变化的矩阵
CGAffineTransform transform=  CGAffineTransformIdentity;
NSLog(@&quot;CGAffineTransformIdentity 数值%@&quot; ,     NSStringFromCGAffineTransform(transform));

///获取一个变幻矩阵 这个函数可以平移旋转和缩放
/* Return the transform [ a b c d tx ty ]. */
</code></pre><p>  transform=  CGAffineTransformMake(a, b, c, d,x,y);</p>
<pre><code>///获取一个只做平移的矩阵
//        t&apos; = [ 1 0 0 1 tx ty ]
</code></pre><p> transform=   CGAffineTransformMakeTranslation(x, y);</p>
<pre><code>///获取一个缩放矩阵
//         t&apos; = [ sx 0 0 sy 0 0 ] 
</code></pre><p>  transform=  CGAffineTransformMakeScale(a,c);</p>
<pre><code>//获取一个旋转矩阵
/* Return a transform which rotates by `angle&apos; radians:
 t&apos; = [ cos(angle) sin(angle) -sin(angle) cos(angle) 0 0 ] */
</code></pre><p>  transform=  CGAffineTransformMakeRotation(3);</p>
<pre><code>///验证是否是标准矩阵
</code></pre><p>  BOOL isTrue =  CGAffineTransformIsIdentity(transform);</p>
<pre><code>///这个是矩阵之间的换算了
/* Translate `t&apos; by `(tx, ty)&apos; and return the result:
 t&apos; = [ 1 0 0 1 tx ty ] * t */
/// 说的很明确 用只有平移的矩阵和 t 矩阵相乘 t*t&apos; 意思是在t&apos;的基础上做t 变幻（例如平移旋转等等）
transform=   CGAffineTransformTranslate(transform,x,y);

///矩阵先缩放再transform
/* Scale `t&apos; by `(sx, sy)&apos; and return the result:
 t&apos; = [ sx 0 0 sy 0 0 ] * t */
</code></pre><p>  transform=  CGAffineTransformScale(transform,a,c);</p>
<pre><code>///矩阵先旋转再transform
/* Rotate `t&apos; by `angle&apos; radians and return the result:
 t&apos; =  [ cos(angle) sin(angle) -sin(angle) cos(angle) 0 0 ] * t */
transform = CGAffineTransformRotate(transform,3);


NSLog(@&quot;CGAffineTransformInvert前 数值%@&quot; , NSStringFromCGAffineTransform(transform));
/// 获取 反转矩阵  看不出效果。做图看看  可以仔细研究下
///我看着就是沿着y轴做了一个对称变换 （不见得对）
transform =   CGAffineTransformInvert(transform);
NSLog(@&quot;CGAffineTransformInvert后 数值%@&quot; , NSStringFromCGAffineTransform(transform));


///矩阵相乘
/* Concatenate `t2&apos; to `t1&apos; and return the result:
 t&apos; = t1 * t2 */
</code></pre><p>   transform = CGAffineTransformConcat(transform,transform);</p>
<pre><code>///判断两个矩阵是否相等
/* Return true if `t1&apos; and `t2&apos; are equal, false otherwise. */
isTrue =CGAffineTransformEqualToTransform(transform,transform);

///获取一个点矩阵变幻另一个点的位置
/* Transform `point&apos; by `t&apos; and return the result:
 p&apos; = p * t
 where p = [ x y 1 ]. */
</code></pre><p>  CGPoint point=  CGPointApplyAffineTransform(CGPointMake(30, 30), transform);</p>
<pre><code>///获取一个矩形矩形变换的大小
/* Transform `size&apos; by `t&apos; and return the result:
 s&apos; = s * t
 where s = [ width height 0 ]. */
CGSize size= CGSizeApplyAffineTransform(CGSizeMake(30, 30),transform);

///获取矩形位置变幻后的位置
 CGRect rect=CGRectApplyAffineTransform(CGRectMake(0, 0, 30, 30),transform);
</code></pre><p>项目中有每个函数的具体用法。</p>
<p><img src="/images/transformNew.gif" alt="image"></p>
<p>项目托管在<a href="https://github.com/NPOpenSource/transform.github.com.git" target="_blank" rel="external">github</a> </p>
<p>#####参考文章：<br><a href="http://dec3.jlu.edu.cn/webcourse/t000022/teach/chapter2/2_1.htm" target="_blank" rel="external">矩阵定义</a></p>
<p><a href="http://blog.csdn.net/wcyoot/article/details/33310329" target="_blank" rel="external">变换原理</a></p>
<p><a href="https://developer.apple.com/library/prerelease/watchos/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_affine/dq_affine.html" target="_blank" rel="external">苹果官方文档</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2015/08/10/2015-08-10-cgaffinetransform-dot-hlei-de-xue-xi-he-yuan-li-jiang-jie/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 温杰
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.2d7529.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>